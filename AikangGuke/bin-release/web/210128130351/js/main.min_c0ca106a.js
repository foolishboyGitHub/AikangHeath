var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function a(e){try{h(i.next(e))}catch(t){s(t)}}function r(e){try{h(i["throw"](e))}catch(t){s(t)}}function h(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,r)}h((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,s&&(a=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(s,n[1])).done)return a;switch(s=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,s=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){h.label=n[1];break}if(6===n[0]&&h.label<a[1]){h.label=a[1],a=n;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(n);break}a[2]&&h.ops.pop(),h.trys.pop();continue}n=t.call(e,h)}catch(i){n=[6,i],s=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,s,a,r,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},BaseClass=function(){function e(){Util.GetClass(this)._instance=this}return e.ins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;if(!n._instance){var i=e.length;0==i?n._instance=new n:1==i?n._instance=new n(e[0]):2==i?n._instance=new n(e[0],e[1]):3==i?n._instance=new n(e[0],e[1],e[2]):4==i?n._instance=new n(e[0],e[1],e[2],e[3]):5==i&&(n._instance=new n(e[0],e[1],e[2],e[3],e[4]))}return n._instance},e}();__reflect(BaseClass.prototype,"BaseClass");var BaseEuiLayer=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t.horizontalCenter=0,t}return __extends(t,e),t}(eui.Group);__reflect(BaseEuiLayer.prototype,"BaseEuiLayer");var BaseSpriteLayer=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchEnabled=!1,t}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(BaseSpriteLayer.prototype,"BaseSpriteLayer");var BaseView=function(e){function t(){var t=e.call(this)||this;t.mIsAutoSkin=!0,t.m_IsOpen=!1,t.m_EventList=[],t.eventList=[],t.m_RefSkinName=null;var n=Util.GetClass(t).NAME;return n&&(t.name=n),t}return __extends(t,e),t.RedPointCheck=function(){return!1},t.prototype.$setParent=function(t){var n=this.$parent,i=e.prototype.$setParent.call(this,t);if(i){if(n){var o=Util.GetParentByType(t,BaseEuiView);o&&o.UnRefBaseView&&o.UnRefBaseView(this)}if(t){var o=Util.GetParentByType(t,BaseEuiView);o&&o.RefBaseView&&o.RefBaseView(this)}return!0}return!1},t.prototype._AddClick=function(e,t){this._AddEvent(egret.TouchEvent.TOUCH_TAP,e,t)},t.prototype._AddItemClick=function(e,t){this._AddEvent(eui.ItemTapEvent.ITEM_TAP,e,t)},t.prototype._AddChange=function(e,t){this._AddEvent(egret.TouchEvent.CHANGE,e,t)},t.prototype._AddEvent=function(e,t,n){if(null==t)return void console.log("没有给定目标控件",this.__class__);for(var i=this.m_EventList,o=0;o<i.length;++o)if(i[o].addObject==t)return;var s=new EventListenerData(t,e,n,this,!1,0);i.push(s)},t.prototype.destoryView=function(){this.OnDestroy(),TimerManager.ins().removeAll(this);for(var e=this.m_EventList,t=0,n=e.length;n>t;t++)e[t].clean();this.m_EventList=[],this.UnrefSkin()},t.prototype.OnDestroy=function(){},t.prototype.AddTimer=function(e,t,n){TimerManager.ins().doTimer(e,t,n,this)},t.prototype.AddLoopTimer=function(e,t){t.call(this),TimerManager.ins().doTimer(1e3,0,t,this)},t.prototype.RemoveTimer=function(e){TimerManager.ins().remove(e,this)},t.prototype.observe=function(e,t){MessageCenter.ins().addListener(e,t,this)},t.prototype.removeObserve=function(){MessageCenter.ins().removeAll(this)},t.prototype.AddClick=function(e,t){this.AddEvent(egret.TouchEvent.TOUCH_TAP,t,this,e)},t.prototype.AddItemClick=function(e,t){this.AddEvent(eui.ItemTapEvent.ITEM_TAP,t,this,e)},t.prototype.AddChange=function(e,t){this.AddEvent(egret.TouchEvent.CHANGE,t,this,e)},t.prototype.AddEvent=function(e,t,n,i,o){if(void 0===i&&(i=null),void 0===o&&(o=!1),null==i)return void console.log("没有给定目标控件",this.__class__);for(var s=0,a=this.eventList;s<a.length;++s)if(a[s].addObject==i)return;var r=new EventListenerData(i,e,t,n,o,0);r?this.eventList.push(r):console.log("绑定侦听事件失败")},t.prototype.removeEvents=function(){for(var e=this.eventList,t=0,n=e.length;n>t;t++)e[t].clean();this.eventList=[]},t.prototype.DoOpen=function(e){void 0===e&&(e=null),this.m_IsOpen||(this.m_IsOpen=!0,this.OnOpen.apply(this,e||t.EMPTY)),this.OnResume.apply(this,e||t.EMPTY)},t.prototype.DoClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.m_IsOpen){this.m_IsOpen=!1,this.OnClose.apply(this,e);for(var n=0;n<this.numChildren;n++){var i=this.getChildAt(n);egret.is(i,"BaseView")&&i.DoClose(e)}this.removeEvents(),this.removeObserve(),TimerManager.ins().removeAll(this)}},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.OnResume=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.OnClose=function(){},t.prototype.$parseSkinName=function(){e.prototype.$parseSkinName.call(this);var t=this.skinName;this.m_RefSkinName!=t&&(this.UnrefSkin(),this.m_RefSkinName=t,this.RefSkin())},t.prototype.RefSkin=function(){this.m_RefSkinName&&ResMgr.RefSkin(this.m_RefSkinName)},t.prototype.UnrefSkin=function(){this.m_RefSkinName&&(ResMgr.UnrefSkin(this.m_RefSkinName),this.m_RefSkinName=null)},t.prototype.$onAddToStage=function(t,n){e.prototype.$onAddToStage.call(this,t,n),this.addEvent()},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.mIsAutoSkin&&this.UnrefSkin(),this.removeStage()},t.prototype.removeStage=function(e){void 0===e&&(e=null),this.removeEvent()},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(e){void 0===e&&(e=null)},t.prototype.CheckUnrefSkin=function(){!this.$stage&&this.mIsAutoSkin&&this.UnrefSkin()},t.EMPTY=[],t}(eui.Component);__reflect(BaseView.prototype,"BaseView");var BaseSystem=function(e){function t(){var t=e.call(this)||this;return t.m_Init=!1,GameGlobal.AllModule.push(t),t}return __extends(t,e),t.prototype.InitConfig=function(){this.m_Init||(this.m_Init=!0,this.Init())},t.prototype.Init=function(){},t.prototype.OnDayTimer=function(){},t.prototype.OnSocketClose=function(){},t}(BaseClass);__reflect(BaseSystem.prototype,"BaseSystem");var LayerManager=function(){function e(){}return e.Init=function(){if(!this.m_Init){this.m_Init=!0;var t=GameGlobal.StageUtils.GetStage(),n=GameGlobal.StageUtils.GetUIStage();t.addChildAt(e.Game_Main,0),n.addChild(e.UI_GAME_MAP).name="UI_GAME_MAP",n.addChild(e.UI_BATTLE).name="UI_BATTLE",n.addChild(e.UI_USER_INFO).name="UI_USER_INFO",n.addChild(e.UI_Main).name="UI_Main",n.addChild(e.UI_Main_1).name="UI_Main_1",n.addChild(e.UI_FullScreen_Popup).name="UI_FullScreen_Popup",n.addChild(e.UI_Main_2).name="UI_Main_2",n.addChild(e.UI_Popup).name="UI_Popup",n.addChild(e.UI_Message).name="UI_Message",n.addChild(e.UI_Tips).name="UI_Tips",this._SetType1(this.UI_Main),this._SetType1(this.UI_Main_2),this._SetType1(this.UI_Popup),this._SetType2(this.UI_FullScreen_Popup),this._SetType2(this.UI_GAME_MAP),this._SetType2(this.UI_BATTLE),this._SetType2(this.UI_USER_INFO),this._SetType2(this.UI_Message),this._SetType2(this.UI_Tips)}},e._SetType1=function(e){e.touchEnabled=!1,e.horizontalCenter=0,e.verticalCenter=0,e.width=StageUtils.WIDTH,e.height=StageUtils.HEIGHT,e.__TOP_LAYER__=!0},e._SetType2=function(e){e.touchEnabled=!1,e.horizontalCenter=0,e.percentWidth=100,e.percentHeight=100,e.__TOP_LAYER__=!0},e.IsShowGameMain=function(){return e.Game_Main.$stage?!0:!1},e.HasMainPanel=function(){return e.UI_Main.numChildren>0},e.Game_Main=new BaseSpriteLayer,e.UI_GAME_MAP=new BaseEuiLayer,e.UI_BATTLE=new BaseEuiLayer,e.UI_USER_INFO=new BaseEuiLayer,e.UI_Main=new BaseEuiLayer,e.UI_Main_1=new BaseEuiLayer,e.UI_Main_2=new BaseEuiLayer,e.UI_FullScreen_Popup=new BaseEuiLayer,e.UI_Popup=new BaseEuiLayer,e.UI_Message=new BaseEuiLayer,e.UI_Tips=new BaseEuiLayer,e.m_Init=!1,e}();__reflect(LayerManager.prototype,"LayerManager");var BaseEuiView=function(e){function t(){var t=e.call(this)||this;return t.mIsAutoSkin=!1,t._resources=null,t._isInit=!1,t.mRefBaseView={},t._resources=null,t._isInit=!1,t.SetFullType(),t}return __extends(t,e),t.prototype.SetFullType=function(){this.percentHeight=100,this.percentWidth=100},t.prototype.isInit=function(){return this._isInit},t.prototype.isShow=function(){return ViewManager.ins().isShow(this)},t.prototype.DoClose=function(){e.prototype.DoClose.call(this)},t.prototype.DoInit=function(){this._isInit=!0,this.initUI()},t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.destoryView=function(){if(!this.mRemoveNotDestroyView&&(e.prototype.destoryView.call(this),ViewManager.ins().destroy(this.hashCode),this.mRefBaseView)){for(var t in this.mRefBaseView){var n=this.mRefBaseView[t];n&&n.destoryView()}this.mRefBaseView=null}},t.prototype.loadResource=function(e,t){this._resources&&this._resources.length>0?ResourceUtils.ins().loadResource(this._resources,[],function(){e(),t()},null,this):(e(),t())},t.prototype.setVisible=function(e){this.visible=e},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!0},t.prototype.GetLayerLevel=function(){return null},t.prototype.SetTableIndex=function(e){},t.prototype.getSubViewByIndex=function(e){return null},t.prototype.CloseSelf=function(){ViewManager.ins().close(this)},t.prototype.RefBaseView=function(e){egret.is(e,"BaseView")&&(this.mRefBaseView||(this.mRefBaseView={}),e.mIsAutoSkin=null,this.mRefBaseView[e.hashCode]=e)},t.prototype.UnRefBaseView=function(e){egret.is(e,"BaseView")&&this.mRefBaseView&&(e.mIsAutoSkin=!0,delete this.mRefBaseView[e.hashCode],e.CheckUnrefSkin())},t.prototype.OnFullScreenResize=function(){if(this.width=GameGlobal.StageUtils.GetWidth(),this.height=GameGlobal.StageUtils.GetHeight(),this.parent){var e=StageUtils.WIDTH,t=StageUtils.HEIGHT;this.x=e-this.width>>1,this.y=t-this.height>>1}else this.x=0,this.y=0},t.LAYER_LEVEL=null,t.VIEW_LAYER_LEVEL=null,t}(BaseView);__reflect(BaseEuiView.prototype,"BaseEuiView");var FuncUrlUtil=function(){function e(){}return e.ShopInfo_GetShopInfo="/ShopInfo/GetShopInfo",e.ShopInfo_newShopMake="/ShopInfo/newShopMake",e.ShopInfo_GetCanWorkerList="/ShopInfo/GetCanWorkerList",e.ShopInfo_GetThisWorkerOrderList="/ShopInfo/GetThisWorkerOrderList",e.ShopInfo_MakeShop="/ShopInfo/MakeShop",e.ShopInfo_AddShopFor="/ShopInfo/AddShopFor",e.ShopInfo_GetMakeShopInfo="/ShopInfo/GetMakeShopInfo",e.ShopInfo_DelShopItem="/ShopInfo/DelShopItem",e.ShopInfo_DelAddItem="/ShopInfo/DelAddItem",e.ShopInfo_FreshOrderList="/ShopInfo/FreshOrderList",e.ShopInfo_MakeOrder="/ShopInfo/MakeOrder",e.ShopInfo_BackToShoping="/ShopInfo/BackToShoping",e.ShopInfo_RequestMoneyChannel="/ShopInfo/RequestMoneyChannel",e.ShopInfo_RequestHuiYuanPayInfo="/ShopInfo/RequestHuiYuanPayInfo",e.ShopInfo_SelMyHuiYuanAndToPay="/ShopInfo/SelMyHuiYuanAndToPay",e.ShopInfo_SureToSelMyHuiYuanAndToPay="/ShopInfo/SureToSelMyHuiYuanAndToPay",e.ShopInfo_AskMoneyChannel="/ShopInfo/AskMoneyChannel",e.ShopInfo_CheckOrderBills="/ShopInfo/CheckOrderBills",e.ShopInfo_GetHistoryShopInfo="/ShopInfo/GetHistoryShopInfo",e.ShopInfo_GetHistoryShopInfoDetail="/ShopInfo/GetHistoryShopInfoDetail",e.ShopInfo_GetMyHuiYuanInfo="/ShopInfo/GetMyHuiYuanInfo",e.ShopInfo_BindTeleVerifySendCode="/ShopInfo/BindTeleVerifySendCode",e.ShopInfo_BindTeleVerifyBindByCode="/ShopInfo/BindTeleVerifyBindByCode",e}();__reflect(FuncUrlUtil.prototype,"FuncUrlUtil");var DisplayUtils=function(){function e(){}return e.removeAllItems=function(t){if(t&&0!=t.numChildren)for(;t.numChildren>0;)e.removeFromParent(t.getChildAt(0))},e.removeFromParent=function(e){e&&null!=e.parent&&e.parent.removeChild(e)},e.drawCir=function(e,t,n,i){return null==e&&(e=new egret.Shape),e.graphics.clear(),e.graphics.beginFill(65535,1),e.graphics.moveTo(0,0),e.graphics.lineTo(t,0),e.graphics.drawArc(0,0,t,0,n*Math.PI/180,i),e.graphics.lineTo(0,0),e.graphics.endFill(),e},e.drawLine=function(e,t,n,i,o,s,a){return null==e&&(e=new egret.Shape),e.graphics.clear(),e.graphics.lineStyle(s,a),e.graphics.moveTo(t,n),e.graphics.lineTo(i,o),e.graphics.endFill(),e},e.shakeIt=function(t,n,i,o,s){if(void 0===o&&(o=1),void 0===s&&(s=null),null==s&&(s=e.EMPTY_FUNC),t&&t.$stage&&o>=1&&s()){var a=e.shakingList[t.hashCode];if(!a){e.shakingList[t.hashCode]=!0;var r=[{anchorOffsetX:0,anchorOffsetY:-n},{anchorOffsetX:-n,anchorOffsetY:0},{anchorOffsetX:n,anchorOffsetY:0},{anchorOffsetX:0,anchorOffsetY:n},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(t);var h=i/5;egret.Tween.get(t).to(r[0],h).to(r[1],h).to(r[2],h).to(r[3],h).to(r[4],h).call(function(){delete e.shakingList[t.hashCode],e.shakeIt(t,n,i,--o)},this)}}},e.prototype.flashingObj=function(e,t,n){void 0===n&&(n=300);var i=function(){if(t){e.visible=!0;var o=1==e.alpha?0:1;egret.Tween.removeTweens(e),egret.Tween.get(e).to({alpha:o},n).call(i)}else egret.Tween.removeTweens(e),e.alpha=1,e.visible=!1};i()},e.SetParent=function(t,n){if(t&&n){var i=e.POINT,o=t.parent;o?(o.localToGlobal(t.x,t.y,i),o.removeChild(t)):(i.x=t.x,i.y=t.y),n.globalToLocal(i.x,i.y,i),n.addChild(t),null!=t.bottom?(t.x=i.x,t.bottom=n.height-i.y-t.height):(t.x=i.x,t.y=i.y)}},e.ChangeParent=function(e,t){e&&t&&(e.parent&&e.parent.removeChild(e),t.addChild(e))},e.GetGlobalPos=function(e,t){e&&(e.parent?e.parent.localToGlobal(e.x,e.y,t):(t.x=e.x,t.y=e.y))},e.ConvertPos=function(e,t){if(e&&t){var n=egret.$TempPoint;return this.GetGlobalPos(e,n),t.globalToLocal(n.x,n.y,n),n}},e.shakingList={},e.EMPTY_FUNC=function(){return!0},e.POINT=new egret.Point,e}();__reflect(DisplayUtils.prototype,"DisplayUtils");var EventListenerData=function(){function e(e,t,n,i,o,s){this.addObject=e,this.type=t,this.listener=n,this.thisObject=i,this.useCapture=o,this.priority=s,e?e.addEventListener(t,n,i,o,s):console.warn("不存在增加侦听事件的对象")}return e.prototype.clean=function(){this.addObject&&this.addObject.hasEventListener(this.type)&&(this.addObject.removeEventListener(this.type,this.listener,this.thisObject,this.useCapture),this.addObject=null,this.type=null,this.listener=null,this.useCapture=null,this.priority=null)},e}();__reflect(EventListenerData.prototype,"EventListenerData");var MClUtil=function(){function e(){}return e.CHANNEL_BLOCK_TIME=180,e}();__reflect(MClUtil.prototype,"MClUtil");var MessageCenter=function(e){function t(t){var n=e.call(this)||this;return n.flag=0,n.type=0,n.dict={},n.eVec=[],n.lastRunTime=0,n.m_TempDict={},n.type=t,0==n.type&&TimerManager.ins().doFrame(1,0,n.run,n),n}return __extends(t,e),t.ins=function(){return e.ins.call(this,0)},t.prototype.clear=function(){this.dict={},this.eVec.splice(0)},t.prototype.addListener=function(e,t,n){var i=this.dict[e];i?0!=this.flag&&(this.dict[e]=i=i.concat()):this.dict[e]=i=[];for(var o=0,s=i;o<s.length;o++){var a=s[o];if(a[0]==t&&a[1]==n)return}i.push([t,n])},t.prototype.removeListener=function(e,t,n){var i=this.dict[e];if(i){0!=this.flag&&(this.dict[e]=i=i.concat());for(var o=i.length,s=o-1;s>=0;--s){var a=i[s];if(a[0]==t&&a[1]==n){i.splice(s,1);break}}0==i.length&&(this.dict[e]=null,delete this.dict[e])}},t.prototype.removeAll=function(e){for(var t=Object.keys(this.dict),n=0,i=t;n<i.length;n++){var o=i[n],s=this.dict[o];0!=this.flag&&(this.dict[o]=s=s.concat());for(var a=0;a<s.length;a++)s[a][1]==e&&(s.splice(a,1),a--);0==s.length&&(this.dict[o]=null,delete this.dict[o])}},t.prototype.dispatch=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(null==t||0==t.length){if(this.m_TempDict[e])return;this.m_TempDict[e]=!0}var i=ObjectPool.pop("MessageVo");i.type=e,i.param=t,0==this.type?this.eVec.push(i):1==this.type?this.dealMsg(i):console.log("MessageCenter未实现的类型")},t.prototype.dispatchImmediate=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=ObjectPool.pop("MessageVo");i.type=e,i.param=t,this.dealMsg(i)},t.prototype.run=function(){var e=egret.getTimer(),t=e-this.lastRunTime>100;if(this.lastRunTime=e,t)for(;this.eVec.length>0;)this.dealMsg(this.eVec.shift());else for(;this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-e>5)););},t.prototype.dealMsg=function(e){this.m_TempDict[e.type]&&delete this.m_TempDict[e.type];var t=this.dict[e.type];if(t){var n=t.length;if(0!=n){this.flag++;for(var i=0,o=t;i<o.length;i++){var s=o[i];s[0].apply(s[1],e.param)}this.flag--,e.dispose(),ObjectPool.push(e)}}},t}(BaseClass);__reflect(MessageCenter.prototype,"MessageCenter");var MessageVo=function(){function e(){this.type=null,this.param=null}return e.prototype.dispose=function(){this.type=null,this.param=null},e}();__reflect(MessageVo.prototype,"MessageVo");var MvLoadingPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="MvLoading",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.speed=.6},t.prototype.OnOpen=function(){TimerManager.ins().doFrame(1,0,this.enterFrame,this),this.opentime=(new Date).getTime()},t.prototype.OnClose=function(){TimerManager.ins().remove(this.enterFrame,this)},t.prototype.enterFrame=function(e){this.uiImageContainer.rotation+=this.speed*e,(new Date).getTime()-this.opentime>15e3&&(WarnWin.show("网络连接超时，请重试!",null,this,null),this.CloseSelf())},t.LAYER_LEVEL=LayerManager.UI_Tips,t}(BaseEuiView);__reflect(MvLoadingPanel.prototype,"MvLoadingPanel");var ObjectPool=function(){function e(){this._objs=new Array}return e.GetColorMat=function(){var e=this.COLOR_MAT.pop();return e||(e=[new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0])]),e},e.SetColorMat=function(e){this.COLOR_MAT.push(e)},e.prototype.pushObj=function(e){this._objs.push(e)},e.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},e.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},e.pop=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e._content[t]||(e._content[t]=[]);var o=e._content[t];if(o.length){var s=o.pop();return s}var a=egret.getDefinitionByName(t),r=n.length,h=void 0;return 0==r?h=new a:1==r?h=new a(n[0]):2==r?h=new a(n[0],n[1]):3==r?h=new a(n[0],n[1],n[2]):4==r?h=new a(n[0],n[1],n[2],n[3]):5==r&&(h=new a(n[0],n[1],n[2],n[3],n[4])),h.ObjectPoolKey=t,h},e.popWithExtraKey=function(t,n){e._content[t]||(e._content[t]=[]);var i,o=e._content[t];if(o.length)for(var s=0;s<o.length;s++)if(o[s].extraKey==n){i=o[s],o.splice(s,1);break}if(!i){var a=egret.getDefinitionByName(t);i=new a(n),i.extraKey=n,i.ObjectPoolKey=t}return i},e.push=function(t){if(null==t)return!1;var n=t.ObjectPoolKey;return!e._content[n]||e._content[n].indexOf(t)>-1?!1:(e._content[n].push(t),!0)},e.clear=function(){e._content={}},e.clearClass=function(t,n){void 0===n&&(n=null);var i=e._content[t];if(null!=i){for(;i&&i.length;){var o=i.pop();n&&o[n](),o=null}e._content[t]=null,delete e._content[t]}},e.dealFunc=function(t,n){var i=e._content[t];if(null!=i){var o=0,s=i.length;for(o;s>o;o++)i[o][n]()}},e.COLOR_MAT=[],e._content={},e}();__reflect(ObjectPool.prototype,"ObjectPool");var RES_REF={ActivityRewardShowPanel:["ui_hddt_bm_jiuchongtianBG"],PlayerInfoSkin:["ui_bh_icon_VIP","chongzhi_json","boss_json"],FuliGoldTreeSkin:["xiyoulilian_json","js_json","ui_fldt_bt_bj","fulidating_json"],CustomServicePanelSkin:["ui_fk_banner"],ReferrerSkin:["haoyou_json"],FeatsShopItem:["shangcheng_json"],TreasureBaseIconSkin:["jineng_json"],briberyItem:["hongbao_json"],GangMemberListItemSkin:["guankia_json"],DeityEquipMainSkin:["shenzhuang_json"],TsumKoBaseMemberSkin:["shenjiang_json"],PetInfoSkin:["chongwu_json","tujian_json","ui_skill_31"],BtnTab5Skin:["yunyinghuodong_json"],FuliSignBoardSkin:["ui_fldt_bm_qiandaoBanner","fuben_json"],DailyFomalhautMainSkin:["ui_smrw_bm_yuanhua","zuoqi_json"],NpcDialogSkin:["npc_800001"],ChatFaceSkin:["faceIcon_json","wanjiaxiangqing_json"],KaiFuJiJieBtnSkin:["jineng_json"],GBattleGangRankItemSkin:["chongwu_json"],ForgeEquipSkin:["duanzao_json"],YingYuanZhengShuSkin:["yinyuan_json"],GBattleGateSkin:["zd_json","ui_kfbz_bm_yuanhua","huodongdating_json","kuafuboss_json","ui_kfbz_bm_jiangliBG","kuafubangzhan_json"],StudentSkin:["fuben_json"],CangbaotuPopSkin:["fuben_json"],RoleHeadSkin:["boss_json"],GodPetActiveTipSkin:["chongwu_json"],PageButtonSkin:["paihangbang_json"],briberyOpenSkin:["ui_hb_bm_hongbao02","hongbao_json"],XiandaoSceneSkin:["zd_json","banghui_json"],GodPetActiveLotterySkin:["ui_ssjl_bm_tupian01","ui_ssjl_bm_bg","shenshoujianglin_json"],CmLabel3Skin:["name_bg_json"],DailyTeamSkin:["zuoqi_json","ui_xyll_bm_kuafuzudui"],GangProtectorAwarkListItemSkin:["guankia_json"],GameBattleSelectSkin:["zd_json"],TreasureResultSkin:["xunbao_json"],KaiFuJiJieShopItemSkin:["jinjiekuanghuan_json","shangcheng_json"],OpenDayGifItemSkin:["denglusongyuanbao_json","fuben_json"],FieldBossSkin:["zd_json","boss_json","name_bg_json"],FriendMainSkin:["haoyou_json"],FuliLvNoticeSkin:["ui_fldt_bm_gonggaoBanner"],RoleSuitSkin:["js_json","name_bg_json","jineng_json","taozhuang_json","chibang_json"],OpenDayGifSkin:["denglusongyuanbao_json","fuben_json"],FuliWeeklyCardSkin:["ui_fldt_bm_zhoukaBanner","qujingdonggui_json","fulidating_json"],MainPlayerInfoSkin:[],FuliBtnSkin:["jineng_json","fulidating_json"],QujingRecordListItemSkin:["qujingdonggui_json"],XiandaoRankItemSkin:["chongwu_json"],FateFadeViewSkin:["js_json","ui_zd_bm_taizi"],DailyResRetrieveSkin:[],briberySkin:["hongbao_json","ui_hb_bm_hongbao01"],LadderLevelSkin:["kuafuwangzhe_json"],ItemAuctionTipsSkin:[],GodPetActiveAwardSkin:["ui_ssjl_bm_tupian02","huodongdating_json","shangcheng_json"],WorldMapContentSkin:["shijieditu_json","fuben_json"],AnswerSkin:["dati_json","ui_dt_bm_bg","banghui_json"],UpLvWayMainSkin:["dati_json","shengjitujing_json"],XianlvAttrSkin:["name_bg_json"],GodLotterySkin:["ui_ts_bm_tupian","tianshenjianglin_json","ui_ts_bm_bg"],KaiFuTargetFightPanelSkin:["chibang_json","fuben_json","guankia_json"],GrowUpItemSkin:["fuben_json"],XiandaoVideoSkin:["xiandaohui_json","boss_json"],ChatSkin:[],PetInactiveSkin:["shenjiang_json","tujian_json","chongwu_json","ui_skill_31"],TianShenHeChengItemSkin:["shenjiang_json"],TianShenGmSkin:[],XianlvupStarSkin:["xianlv_json","name_bg_json","chongwu_json","ui_skill_31"],CaiLiaoItem:["fuben_json"],RideItemSkin:[],PetHeadSkin:["chongwu_json"],RoleSkillSetSkinItemSkin:["jineng_json"],ForgeGemSkin:[],RechargeRebateSkin:["chongzhifanli_json","chongzhi_json"],XiandaoRankItem2Skin:["xiandaohui_json"],GangMapSceneSkin:["zuoqi_json","zd_json","banghui_json","chongwu_json"],HouseDetailSkin:["fangwu_json"],SystemSettingSkin:["youjian_json"],CrossBattleItemSkin:["boss_json"],CommonDialogSkin:[],Btn2Skin:["zd_json"],DailyFirstChargeSkin:["ui_yyhd_bm_meirishouchongBG"],FansSkin:["haoyou_json"],MainGameNoticeSkin:["xiandaohui_json"],TsumKoListItemSkin:["qujingdonggui_json","ui_bsyn_bm_ditu01","bashiyinan_json"],LadderInfoHeadItemSkin:["kuafuwangzhe_json"],BagMakeListSkin:[],BossTipsItemSkin:["chongwu_json"],ShopIntegralItemSkin:["shangcheng_json"],PlotLeftMsgSkin:["plot_json"],GangMemberInfoSkin:["ui_bh_icon_VIP","chongzhi_json","guankia_json"],TianShenHeChengSkin:["shenjiang_json"],GBattleRankItemSkin:["chongwu_json"],KaiFuTargetPanelSkin:["jineng_json"],GangMineKuangItemSkin:["huodongdating_json"],PowerLabel3Skin:["js_json"],XianlvSkillTipSkin:["chongwu_json","ui_skill_31"],TopActivitySkin:["ui_bm_xuannvxiafan"],XiandaoRankSkin:["chongwu_json","xiandaohui_json"],XiandaoSkin:["xiandaohui_json"],TotemsActivationModelSkin:["youjian_json","tuteng_json"],RankDataItemSkin:["chongwu_json"],RechargeRebateMainSkin:["jineng_json","fulidating_json"],DestinyEquipDlgSkin:[],RoleInfoItemSkin:["js_json"],DestinyArrTipSkin:[],FuliGiveGoldMainSkin:["ui_yyhd_bm_songshiwanyuanbaoBG","fuben_json","qujingdonggui_json"],GBRoleHeadSkin:["kuafubangzhan_json"],LadderLevelNameSkin:["kuafuwangzhe_json"],TreasureMakeRectSkin:["ui_fb_bm_bg","fabao_json"],zhuangPanItemSkin:["jinjiekuanghuan_json","shangcheng_json"],HavingLockItemSkin:["xianlv_json"],RoleInfoSkin:["js_json"],PetGodQualitySkin:["js_json","chongwu_json","tujian_json","ui_skill_31"],HeadSkin:["boss_json"],TianShenLevelUpSkin:["shenjiang_json","zuoqi_json","name_bg_json","chongwu_json"],CangbaotuRewardSkin:["name_bg_json","fuben_json"],welComeLandingSkin:["ui_xsyd_bg"],ResultFailSkin:["jineng_json","jiesuan_json"],YuanfenTipSkin:["chongwu_json"],FuliPracticeSkin:["fuben_json","xiyoulilian_json","zuoqi_json","ui_fldt_bm_fuliBanner","fulidating_json"],YingyueEnAiSkin:["yinyuan_json","huodongdating_json","shangcheng_json"],DailyExpRetrieveItemSkin:["chongwu_json"],TeacherSecendSkin:["shitu_json","chongwu_json"],RoleHead1Skin:["xiandaohui_json","boss_json"],PositionForeshowSkin:["name_bg_json","ui_zwgnt_bm_bj","zhenweigongneng_json","jiesuan_json","ui_skill_31","chongwu_json"],LadderRankPanelSkin:["kuafuwangzhe_json"],ForgeSkin:["ui_bm_duanzaowenli","duanzao_json"],GangMineRankSkin:[],EquipUserTipsSkin:["tips_json"],DestinyRectInfoSkin:["zd_json"],FuliActivationCodeSkin:["ui_fldt_bm_jihuomaBanner"],KaiFuTargetUpLevelPanelSkin:["ui_kfhd_bm_dengjiBanner","fuben_json"],ActivityEndAwardIconSkin:["banghui_json"],InvestmentPlanItemSkin:["fuben_json"],HavingMagicSkin:["tiannv_json","skill_0_3"],TreasureArrRectInfo:["zd_json"],RoleTemplateRewardSkin:["ui_jjjl_bg","fuben_json"],GodPetActiveResultSkin:["xunbao_json"],CloudNineRankItemSkin:["ui_ch_bm_xiandaozhizun"],GangMineMyTeamPanelSkin:["shenjiang_json","boss_json"],DestinyResolveSkin:["chongwu_json"],FriendBlacklistSkin:["haoyou_json"],GuaQiaRankItemSkin:["chongwu_json"],WorldMapSkin:["shijieditu_json","fuben_json"],TeacherFirstSkin:["shitu_json","chongwu_json"],DestinyResolveHandleDlgSkin:[],GangApplyListSkin:["guankia_json"],GangMineRoleItemSkin:["zuoqi_json"],CommonWindowBgSkin:["js_json"],DayBtnSkin:["qitianzunxiang_json"],GangMineCrossRankSkin:["ui_hddt_bm_kszdpaimingBG"],CloudNineRankSkin:["ui_hddt_bm_jiuchongtianpaimingBG","ui_ch_bm_xiandaozhizun"],XianlvAllAttrSkin:["name_bg_json"],LingtongSkillSkin:["name_bg_json","chongwu_json","ui_skill_31"],TsumKoBaseRecordSkin:["youjian_json","name_bg_json","bashiyinan_json"],HouseUpgradeTipSkin:["chongwu_json"],TreasureUpPanelSkin:["duanzao_json","zd_json","jineng_json","chongwu_json"],FuliMonthlyCardSkin:["ui_fldt_bm_yuekaBanner","qujingdonggui_json","fulidating_json"],KaiFuTargetShopItemSkin:["jinjiekuanghuan_json","shangcheng_json"],ShopResolveSkin:["duanzao_json"],YingYuanXianHuaSkin:[],YuanfenItemSkin:["shenjiang_json","js_json"],RoleSkillItemSkin:["jineng_json"],YingYuanZjmSkin:["boss_json"],XianlvupAttrSkin:["xianlv_json"],GangJuanXianListItemSkin:["guankia_json"],CommonDialog2Skin:[],XianlvUpLevelSkin:["shenjiang_json","zuoqi_json","xianlv_json","name_bg_json","chongwu_json"],TeacherSendSkin:["ui_st_bm_chuangongBG"],UpLvWayItemSkin2:["shengjitujing_json"],PlayerChangeNameSkin:[],RoleSkillSkin:["jineng_json","ui_bm_jinengwenli"],MoneyTreeBoxSkin:[],LingLongTaSkin:["fuben_json","ui_fb_bm_linglongbaotabg"],TheFirstPlayerTipSkin:["ui_zjm_mobaiBG"],ChangeLinerSkin:["chongwu_json"],KaiFuJiJieRankItemSkin:["chongwu_json"],GangCreateSkin:[],MailContentSkin:["youjian_json"],AcrossBossSkin:["name_bg_json","ui_kf_bm_beijingBG","kuafubangzhan_json"],GangMapTaskResetTipSkin:[],KaiFuJiJieAwardItemSkin:["fuben_json"],TiantiRankItem:["kuafuwangzhe_json"],TianshilianItemSkin:["fuben_json"],GodPieWinSkin:["jineng_json","fulidating_json"],TsumKoPanelSkin:["bashiyinan_json","qujingdonggui_json","ui_bsyn_bm_ditu01"],BagItemTypeSkin:[],TsumKoCheckItemListSkin:["shenjiang_json","bashiyinan_json"],GBattleJoinTipSkin:["banghui_json"],GangMineRankItemSkin:[],HavingSkillIconSkin:["jineng_json","chongwu_json"],KaiFuTargetShopSkin:["ui_kfhd_bm_zhekouBanner","jinjiekuanghuan_json","shangcheng_json"],HouseUpgradeTipItemSkin:["chongwu_json"],TsumKoBaseBagItemSkin:[],TreasureHoldIconSkin:["jineng_json","chongwu_json"],PublicBossItemSkin:["zd_json","boss_json","name_bg_json"],ChatItem1Skin:["wanjiaxiangqing_json","boss_json"],MapCitySkin:["ui_hddt_bm_wangcheng","boss_json"],CrossBattleJfViewSkin:["huodongdating_json","shangcheng_json","vip_json"],zhuangPanPanelSkin:["zuoqi_json","jingcaihuodong_json","ui_jchd_bm_zhuanpan02"],FuliForeverCardSkin:["qujingdonggui_json","ui_fldt_bm_zskbanner","fulidating_json"],DailyPeaceItemSkin:["fuben_json"],KillBossItemSkin:["chongwu_json"],bar0Skin:["zd_json"],CommonFuHuSkin:[],PublicBossSkin:["zd_json","boss_json","name_bg_json"],RoleTemplateSkin:["zuoqi_json","name_bg_json"],YingyueInfoSkin:["yinyuan_json","fuben_json","ui_yy_bm_huenliBG","name_bg_json","ui_yy_bm_qiuhuenBG","banghui_json","xiandaohui_json","boss_json"],AuctionSelectSkin:["paimaihang_json"],AcrossBossMiniRankSkin:["jineng_json","boss_json"],ShopTitle:["shangcheng_json"],RideDressItemSkin:["chibang_json"],XiandaoBetTipSkin:[],PetSkillIcon2Skin:["ui_skill_31","chongwu_json"],GBattleDragonSceneSkin:["ui_bm_tiaozhan","huodongdating_json","zd_json","kuafubangzhan_json","kuafuboss_json"],TianShenMainSkin:["js_json","chongwu_json"],YingyueEnAiItemSkin:["yinyuan_json","huodongdating_json","shangcheng_json"],BossKillRecordSkin:["chongwu_json"],TeamCheckItemListSkin:["shenjiang_json","bashiyinan_json"],HavingTipsSkin:["xuannvchuzhan_json","ui_xncz_bm_renwu","ui_xncz_bm_tupian"],BossHurtItemSkin:["chongwu_json"],RankWinSkin:["chongwu_json"],TeacherGetReItemSkin:["shitu_json","chongwu_json"],PlayerChatSkin:["dati_json","wanjiaxiangqing_json"],VipBossItemSkin:["boss_json","name_bg_json"],GangProtectorAwardListSkin:["guankia_json"],LingtongInactiveSkin:["lingtong_json","name_bg_json","ui_skill_31","chongwu_json"],YingYuanAddSkin:[],TeamBaseSkin:["name_bg_json"],CrossBattleMainSkin:["huodongdating_json"],BagStarTypeSkin:[],QujingRecordListSkin:["qujingdonggui_json"],TeacherInvItemSkin:["guankia_json","chongwu_json"],GangChangeNameSkin:[],PetTuJianItemSkin:["tujian_json","chongwu_json"],KaiFuJiJieRankPanelItemSkin:["jinjiekuanghuan_json"],GangMapExchangItemSkin:["chongwu_json"],DestinySkin:["mingge_json","chongwu_json","duanzao_json"],KaiFuJiJieRankPanelSkin:["jinjiekuanghuan_json"],YingYuanHeliSkin:["boss_json","shangcheng_json"],GBattleEnterTempleTipSkin:["kuafubangzhan_json"],HouseUpgradeSkin:["zuoqi_json","fangwu_json","name_bg_json"],PetTuJianSkin:["tujian_json","chongwu_json"],TreasureSkillDescSkin:["chongwu_json"],CrossBattleChargeSkin:["huodongdating_json"],TsumKoBaseSkin:["name_bg_json","bashiyinan_json"],MiniMapCityInfoSkin:["ui_hddt_bm_wangcheng"],RankingKeyItemSkin:["paihangbang_json"],TianshilianPopSkin:["name_bg_json","zd_json","fuben_json"],GangMineTeamPanelSkin:["shenjiang_json","huodongdating_json"],RoleSuitItemSkin:["taozhuang_json"],TotemsInfoSkin:["name_bg_json","vip_json","chongwu_json"],KaiFuTargetGuanQiaItmeSkin:["fuben_json"],TotemsMainSkin:["vip_json","js_json","jineng_json","name_bg_json","chongwu_json","ui_tt_bm_yuanquan"],GainNewImageSkin:["js_json","ui_zd_bm_taizi"],GangJuanXianListSkin:["name_bg_json","guankia_json"],zhuangPanResultSkin:["xunbao_json"],YingYuanHeLiItemSkin:["shangcheng_json"],XianlvInactiveSkin:["shenjiang_json","xianlv_json","name_bg_json","chongwu_json"],CreateRolSkin:["chuangjue_json","ui_cjjs_bm_ditu"],FormationSkillSkin:["name_bg_json","zuoqi_json","chongwu_json","ui_skill_31"],DeityEquipDetailSkin:["chongwu_json","tips_json"],GangMemberListSkin:["guankia_json","banghui_json"],TreasureShowSkin:["fabao_json"],CaiLiaoItemSkin:["fuben_json"],bar4Skin:["zd_json"],InvestmentPlanPanelSkin:["ui_yyhd_bm_touzijihuaBG","yunyinghuodong_json","fuben_json"],ChatItem2Skin:["wanjiaxiangqing_json","boss_json"],XiandaoApplySkin:["xiandaohui_json","boss_json"],GwHeadSkin:["boss_json"],BtnN7Skin:["chongzhitehui_json"],KaiFuTargetFuncTargetSkin:["ui_kfhd_bm_banner","fuben_json"],QujingEscortItemSkin:["qujingdonggui_json"],RechargeItemSkin:["chongzhi_json"],GameCityPanelSkin:["ui_zc_bm_shenmishangdian","ui_zc_jz_boss","ui_zc_jz_jingji","ui_zc_jz_kuafu","ui_zc_jz_huodong","ui_zc_jz_ditu","ui_zc_bt_szzp","ui_zc_jz_fuben","ui_bm_xuannvxiafan","ui_bm_zjm_songxuannv"],RideDressSkin:["chibang_json","zuoqi_json"],AuctionPanelSkin:["paimaihang_json"],GangMinePanelSkin:["huodongdating_json","ui_hddt_bm_wakuangBG","name_bg_json"],UpLvWayItemSkin:["shengjitujing_json"],MiniMapSkin:["huodongdating_json"],TreasureResolvePanelSkin:["chongwu_json","jineng_json"],ResultBossWinSkin:["ui_bm_shengli","jiesuan_json"],CrossBattleJfItemSkin:["huodongdating_json","shangcheng_json","vip_json"],XiandaoBetSkin:["xiandaohui_json","boss_json"],TeacherThird:["guankia_json","chongwu_json"],TsumKoCheckpointItemSkin:["shenjiang_json","bashiyinan_json"],VipBossSkin:["boss_json","name_bg_json"],RankingWinSkin:["paihangbang_json","chongwu_json","js_json"],QujingRevengeSkin:[],TestSkin:[],CrossBattleTipSkin:["tips_json"],TreasureArrSkin:["tips_json"],ShopMysterySkin:["shangcheng_json"],GangBossPanelSkin:["name_bg_json","ui_kf_bm_beijingBG","kuafubangzhan_json"],GangMapTaskItemSkin:["zd_json"],ActivityTipSkin:[],AreanPKResultSkin:["banghui_json","jingjichang_json","ui_bm_shengli","jiesuan_json"],GodPetActiveAwardItemSkin:["huodongdating_json","shangcheng_json"],TeacherItemInfoSkin:["shitu_json","boss_json"],CrossBattleCityInfomaTionSkin:["boss_json"],PetUpLevelSkin:["shenjiang_json","name_bg_json","zuoqi_json","tujian_json","chongwu_json","ui_skill_31"],FieldBossItemSkin:["zd_json","boss_json","name_bg_json"],DetailsChatSkin:["wanjiaxiangqing_json"],bar3Skin:["zd_json"],XianlvupSkin:["xianlv_json","name_bg_json","chongwu_json","ui_skill_31"],GBattleScoreItemSkin:["huodongdating_json","shangcheng_json","vip_json"],KaiFuQiTianFuLiPanelSkin:["fuben_json"],XiandaoKnockoutSkin:["xiandaohui_json","ui_xdh_bm_xian","boss_json"],DailyExpRetrieveSkin:["chongwu_json"],HavingSkillTipSkin:[],GangRecordListSkin:["chongwu_json"],FateMainSkin:["name_bg_json"],TeamMemberItemSkin:["shenjiang_json","boss_json"],GBattleRankSkin:["chongwu_json"],zhuangPanShopSkin:["ui_jjkh_bm_wenbenBG","jinjiekuanghuan_json","shangcheng_json"],GangDefendPanelSkin:["banghui_json","name_bg_json","duanzao_json","guankia_json","chongwu_json"],PetXilianTipSkin:[],LadderWinnerSkin:["ui_kfwz_bm_bj","banghui_json"],PlotRightMsgSkin:["plot_json"],TeamBaseMemberSkin:["shenjiang_json","boss_json"],LadderResultWinSkin:["ui_bm_shengli","kuafuwangzhe_json"],KaiFuJiJieSkin:["ui_jjkh_bm_wenbenBG","jinjiekuanghuan_json","fuben_json"],LingtongRankSkin:["name_bg_json","zuoqi_json","duanzao_json","chongwu_json","ui_skill_31"],RechargeWinSkin:["chongzhi_json","vip_json","ui_yyhd_bm_shuangbeishouchongBG"],TotemsGoodLuckSkin:["xunbao_json","ui_xb_bm_wupinBG"],ItemTipsSkin:["tips_json"],XiandaoKnockoutHeadSkin:["boss_json"],FuliGiveGoldItem:["fuben_json","qujingdonggui_json"],DailyPeaceSkin:["ui_xyll_bm_pingdinganbang","fuben_json"],HelpTipsSkin:["zd_json","tips_json"],TianShenBreachSkin:["xianlv_json","name_bg_json","ui_skill_31"],KaiFuTargetReChargePanelSkin:["ui_kfhd_bm_lianxuchongzhiBanner","fuben_json"],LadderRankRewardItemSkin:["kuafuwangzhe_json"],PetMainSkin:["js_json","chongwu_json"],CrossGuildSkin:[],XianlvMainSkin:["js_json","chongwu_json"],BossHurtRankSkin:["chongwu_json"],HavingSkillItemSkin:["jineng_json"],FirstChargePanelSkin:["fuben_json","name_bg_json","yunyinghuodong_json"],YuanfenInfoSkin:["shenjiang_json","js_json"],TianShenBaseSkin:["shenjiang_json","name_bg_json","zuoqi_json","chongwu_json","jineng_json"],TreasureHuntMainSkin:["xunbao_json","ui_xb_bm_wupinBG"],DailyRetrieveCountSkin:["xiyoulilian_json","zuoqi_json"],GangListItemSkin:["guankia_json"],GangRecordListItemSkin:["chongwu_json"],DailyAwardSkin:[],RewardsWin:[],PetSkillTipSkin:["chongwu_json","ui_skill_31"],KaiFuJiJieShopPanelSkin:["ui_jjkh_bm_wenbenBG","jinjiekuanghuan_json","shangcheng_json"],AnswerResultSkin:["dati_json"],FuliLvGiftBagSkin:["ui_fldt_bm_shengjiBanner","fuben_json"],QujingAwardSkin:["qujingdonggui_json"],ArenaRoleItemSkin:["jingjichang_json"],GameBattleManualSkin:["zd_json"],CaiLiaoFB:["fuben_json"],RoleJingMaiSkin:["name_bg_json","jingmai_json","ui_jm_bm_jingmai"],TeamDataItemSkin:["shenjiang_json"],LadderPreWeekPanelSkin:["kuafuwangzhe_json"],OfflineRewardSkin:["lixianshouyi_json"],RoleSkillSetPanelSkin:["jineng_json"],ShopRectItemSkin:["shangcheng_json"],ShopMysteryItemSkin:["shangcheng_json"],GangMineTeamGuardPanelSkin:["shenjiang_json","boss_json"],LadderLevelIconSkin:["kuafuwangzhe_json"],TotemsMainModelSkin:["zuoqi_json","tuteng_json"],MailItemSkin:["youjian_json"],FormationMainSkin:["js_json"],GrowUpPanelSkin:["ui_yyhd_bm_chengzhangjijinBG","yunyinghuodong_json","fuben_json"],GBattleScoreListSkin:["huodongdating_json","shangcheng_json","vip_json"],ArenaInfoSkin:["ui_jjc_bm_ditu","jingjichang_json"],XianlvBattleSkin:["chongwu_json"],KaiFuQiTianShopItemSkin:["jinjiekuanghuan_json","shangcheng_json"],XianlvQySkin:[],KaiFuTargetTeamBuyPanelSkin:["ui_kfhd_bm_kaifutuangouBanner","fuben_json"],RoleSuitHeadSkin:["jineng_json","taozhuang_json"],GangApplyListItemSkin:["guankia_json"],PersonBossItemSkin:["boss_json","name_bg_json"],BtnN4Skin:["paihangbang_json"],GameBattleSkin:["zd_json","fuben_json"],QujingChooseItemSkin:["qujingdonggui_json"],CloudNineSceneSkin:["huodongdating_json"],CrossGuildWarSkin:[],PetXilianSkillSkin:["js_json","chongwu_json","jineng_json","ui_skill_31"],GangProtectorJinJieAwardSkin:[],PlotSimpleSkin:["zd_json"],XianlvBaseSkin:["xianlv_json","name_bg_json","chongwu_json","ui_skill_31"],ActivityRewardShowItemSkin:[],WorldMapIconSkin:["shijieditu_json","fuben_json"],ShootUpPanelSkin:["yunyinghuodong_json","2006709_s","ui_yyhd_bm_zhishengyijieBG"],GangMapExchangeSkin:["chongwu_json"],GodListItemSkin:[],RoleRideDrugSkin:["name_bg_json"],CaiLiaoFBSkin:["fuben_json"],CmLabel2Skin:["name_bg_json"],CommonMidSkin:[],XiandaoResultSkin:["xiandaohui_json","boss_json"],TreasureRectIconSkin:["fabao_json"],TeacherSkin:["ui_st_bm_bg","shitu_json"],CommonDialog3Skin:["ui_yy_bm_xijielianliBG"],GangInfoSkin:["boss_json","chongwu_json","banghui_json"],BtnTab4Skin:["shitu_json"],PetSkillSkin:["chongwu_json","ui_skill_31"],LittleBg3:["tips_json"],PetAttrSkin:["name_bg_json","chongwu_json"],ActivityItemSkin:["huodongdating_json","ui_hddt_bm_kszdBG"],TreasureMakePanelSkin:["jineng_json","chongwu_json"],ForgeMasterTipSkin:["tips_json","duanzao_json"],KaiFuActivityPanelSkin:["jineng_json"],ShopCommonSkin:["shangcheng_json"],TeacherItemDepart:[],AcrossBossFightSkin:["zd_json","kuafuboss_json","jineng_json","boss_json"],RoleRideSkillSkin:["name_bg_json","zuoqi_json"],ForgeEquipListSkin:["ui_bm_duanzaowenli","duanzao_json"],BG:["ui_bm_back4"],ResultWinSkin:["ui_bm_shengli","jiesuan_json"],TotemsItemComSkin:["jineng_json","tuteng_json"],XianLvInfoSkin:["chongwu_json","ui_skill_31"],PowerLabel2Skin:["js_json"],ActivityWinSkin:["huodongdating_json","ui_hddt_bm_kszdBG"],DailyTaskItemSkin:["chongwu_json"],FieldBossDetailSkin:["name_bg_json","zd_json","boss_json"],GBattleTempleSceneSkin:["ui_bm_tiaozhan","huodongdating_json","zd_json","kuafubangzhan_json"],CatchPetResultWinSkin:["ui_bm_shengli","jiesuan_json","ui_zd_bm_taizi"],AcivityEndAwardSkin:["name_bg_json","banghui_json","jiesuan_json"],TianshilianSkin:["ui_fb_bm_yongchuangtiantingbg","name_bg_json","zd_json","fuben_json"],GameGattlePubBossSkin:["zd_json"],XianlvupStarBaseSkin:["xianlv_json","name_bg_json","chongwu_json","ui_skill_31"],SmeltSelectSkin:[],RoleTemplateRewardItemSkin:["fuben_json"],GangCreateItemSkin:["name_bg_json","banghui_json"],HeadSkin2:["boss_json"],HeadSkin3:["xiandaohui_json","boss_json"],CangbaotuItemSkin:["fuben_json"],RechargeRebateItemSkin:["chongzhifanli_json","chongzhi_json"],DeityEquipInjectSkin:["shenzhuang_json","duanzao_json"],UpLvWayViewSkin:["xiyoulilian_json","zuoqi_json","fuben_json","shengjitujing_json"],bar2Skin:["zd_json"],HouseBuildSkin:["fangwu_json"],GangPangTaoHuiSkin:["ui_bh_bm_pantaohuiyuanhua","fuben_json"],MyFriendSkin:["haoyou_json"],CrossBattleCityInfoSkin:["boss_json"],TeamItemComSkin:["shenjiang_json","bashiyinan_json"],HavingShowSkin:["ui_xn_bm_db","xuannvxiafan_json","jineng_json","chongwu_json"],TianshenDetailSkin:["chongwu_json"],BtnTab2Skin:["paihangbang_json"],GuaQiaRankSkin:["chongwu_json"],BossTipsSkin:["chongwu_json"],KaiFuJiJieRankWinSkin:["chongwu_json"],GangListSkin:["guankia_json"],RoleSuitTipSkin:["js_json","tips_json"],RechargeFeedbackSkin:["ui_lchk_bm_bj"],DeityEquipAwakeSkin:["shenzhuang_json","duanzao_json"],HavingCard:["ui_bm_zjm_songxuannv"],GameMapSkin:["huodongdating_json"],CatchPetResultFailSkin:["ui_zd_bm_ku","zd_json","ui_zd_bm_taizi"],ChatUeseItem:["dati_json","wanjiaxiangqing_json"],KaiFuQiTianActivityPanelSkin:["qitianzunxiang_json"],FormationAllAttrSkin:["name_bg_json"],Btn1Skin:["zd_json"],BagEquipTypeSkin:[],AcitivityAdvanceTips:["ui_yg_bm_jct"],RoleSuitEquipItemSkin:["chibang_json","taozhuang_json"],ShouDaoXianHuaSkin:["ui_yy_bm_qiuhuenBG"],RechargeAwardSkin:["ui_czth_bm_biaotou","chongzhitehui_json","ui_czth_bm_tupian02","ui_czth_bm_tupian01"],RoleElixirSkin:["jineng_json","ui_bm_jinengwenli"],CityTypeSkin:["huodongdating_json"],FubenSkin:["youjian_json"],GBattleDragonGuardSkin:["zuoqi_json"],DestinyShowRectSkin:["mingge_json","zd_json"],AuctionItemSkin:["paimaihang_json"],ConsumptionPanelSkin:["ui_yyhd_bm_xiaofeiyouliBG","fuben_json"],LingLongTaItem:["fuben_json","name_bg_json"],AuctionRecordPanelSkin:[],CommonRewardsWin:[],LingLongTaItemSkin:["fuben_json","name_bg_json"],CrossBattleTeam:["huodongdating_json","shangcheng_json"],VipMainSkin:["ui_vip_bm_banner","vip_json","zuoqi_json","chongzhi_json"],GangMineTeamItemSkin:["shenjiang_json","huodongdating_json"],CangbaotuSkin:["name_bg_json","ui_fb_bm_cangbaotubg","fuben_json"],KaiFuQiTianShopPanelSkin:["jinjiekuanghuan_json","shangcheng_json"],BtnTab29Skin:["kuafuwangzhe_json"],warnFrameSkin:[],RankingValueItemSkin:["js_json","paihangbang_json"],ConsumptionItemSkin:["fuben_json"],DailyFomalhautTaskSkin:["name_bg_json","ui_smrw_bm_bg","shimenrenwu_json"],KaiFuQiTianOtherPanelSkin:["fuben_json"],PetZizhiSkin:["name_bg_json","zuoqi_json","chongwu_json","jiesuan_json"],ShouDaoSkin:["yinyuan_json","ui_yy_bm_qiuhuenBG","boss_json"],GangSkillListSkin:["guankia_json","ui_bm_jinengwenli","duanzao_json","jineng_json"],FuliMainSkin:["jineng_json","fulidating_json"],DestinyShowSkin:["mingge_json","zd_json"],MiniChatPanelSkin:[],KaiFuLeiJiReChargePanelSkin:["ui_jjkh_bm_wenbenBG","jinjiekuanghuan_json","fuben_json"],RechargeProgressBarSkin:["zuoqi_json"],ShopEquipSkin:["shangcheng_json"],KaiFuTargetPowerPanelSkin:["ui_kfhd_bm_zhanliBanner","fuben_json"],RechargeAwardBtnSkin:["chongzhitehui_json"],AcrossBossBoxSkin:["chongzhi_json"],MainPlayFunViewSkin:["ui_yy_btn_xitie","ui_yy_btn_xianhua","ui_dt_bt_keju","ui_yy_btn_qiuhuen","ui_bm_xuannvxiafan","ui_bm_zjm_songxuannv"],ForgeMasterBtnSkin:["duanzao_json"],GameBattleBtnSkin:["11001","zd_json"],FbRankSkin:["fuben_json"],GangDefendListItemSkin:["guankia_json","chongwu_json"],PetXilianItemSkin:["jineng_json","ui_skill_31","chongwu_json"],DestinyNiSkin:["mingge_json"],TianShenInactiveSkin:["shenjiang_json","name_bg_json","zuoqi_json","chongwu_json","jineng_json"],BtnN5Skin:["shitu_json"],FormationSoulSkin:["zuoqi_json","name_bg_json","duanzao_json"],MainBottomPanelSkin:["ui_bm_icombg1-46"],DailyInfoSkin:["xiyoulilian_json","zuoqi_json","boss_json","chongwu_json"],LingtongSkillDecsSkin:["ui_skill_31"],MailListSkin:["youjian_json"],RmbGiftPanelSkin:["ui_yyhd_bm_shiyuanlibaoBG","yunyinghuodong_json"],FuliSignBoardItemSkin:["fuben_json"],GBattleGangRankSkin:["chongwu_json"],ShopCommonItemSkin:["shangcheng_json"],ShowPanelSkin:["boss_json"],XiandaoVideoItemSkin:["xiandaohui_json"],PetSkillIconSkin:["ui_skill_31","chongwu_json"],ItemUseTipsSkin:[],GBattleOutsiderSceneSkin:["huodongdating_json","kuafubangzhan_json","boss_json"],GangMineTeamRoleItemSkin:["shenjiang_json","boss_json"],PetRenameSkin:[],SmeltMainSkin:["ui_bm_shuoming"],PersonBossSkin:["boss_json","name_bg_json"],FriendItemSkin:["haoyou_json","boss_json"],DailyBoxSkin:["xiyoulilian_json","fuben_json"],CrossBattleResultWinSkin:["ui_bm_shengli","jiesuan_json"],PetTuJianItemIconSkin:["chongwu_json"],LingLongTa:["fuben_json","ui_fb_bm_linglongbaotabg"],KaiFuQiTianAwardItemSkin:["fuben_json"],CrossBattleTeamItemSkin:["huodongdating_json","shangcheng_json","boss_json"],PetXilianTip2Skin:[],FormationInfoSkin:["name_bg_json","zuoqi_json","zhenxing_json","chongwu_json","ui_skill_31"],DailyChargeGiftSkin:["ui_mrhl_bm_bj"],PetBattleSkin:["chongwu_json"],LastWeekRankItemSkin:["kuafuwangzhe_json"],PetAllAttrSkin:["name_bg_json"],ChestSkin:["youjian_json"],PetNameSkin:["chongwu_json"],RoleAttrSkin:["jineng_json"],GuanqiajiangliSkin:["ui_bm_diwen","guankia_json"],TianShenBaoQiSkin:["xianlv_json","shenjiang_json","name_bg_json","zuoqi_json","ui_sj_bm_wenli"],LadderInfoPanelSkin:["name_bg_json","kuafuwangzhe_json","boss_json"],GameBattleBtn2Skin:["11001","zd_json"],HavingUpLevelSkin:["zuoqi_json","name_bg_json","jineng_json","chongwu_json"],EquipTipsSkin:["tips_json"],TeacherShowReItemSkin:["chongwu_json"],LingtongUpLevelSkin:["zuoqi_json","name_bg_json","chongwu_json","ui_skill_31"],QujingMainSkin:["qujingdonggui_json","ui_qj_bm_ditu"]},ResDataPath=function(){function e(){}return e.GetMineNameByType=function(e){return"kuangyuan_"+e
},e.GetMapThumbnailPath=function(e){return"resource/assets/map/"+e+"/small.jpg"},e.GetMapPreviewPath=function(e,t,n){return"resource/assets/map/"+e+"/pk_preview_"+e+"."+n},e.GetMapData=function(e){return"map/"+e+"/mdata.txt"},e.GetMapPath=function(e,t,n,i,o){return"resource/assets/map/"+e+"/"+t+"/"+i+"_"+n+"."+o},e.GetBodyName01=function(e,t){return e+"_"+t},e.GetWeaponName01=function(e,t){return e+"_"+t},e.GetItemFullName=function(e){return this.GetItemFullPath(e)},e.GetItemFullPath=function(e){return this.ROOT_ICON+e+".png"},e.GetLvName=function(e,t){},e.GetItemQualityName=function(t){return e.ITEM_BG_QUALITY[t]},e.GetItemQualityEffeName=function(e){return"quality_0"+e},e.GetHeadMiniImgName=function(e,t){return void 0===t&&(t=null),null==t&&(t=e%10,e=Math.floor(e/10)),"ui_head_mini_icon_"+(e||1)+(t||0)},e.GetHeadFrameImgName=function(e){return"ui_kfwz_bm_touxiangkuang0"+e},e.GetLadderHead=function(e,t){return"ui_pp_tx_"+(e||1)+(t||0)},e.GetHeadMiniImgNameById=function(e){return this.GetHeadImgName(Math.floor(e%100*.1),e%10)},e.GetHeadImgName=function(e,t){return"ui_head_icon_"+e+t},e.GetHeadCircleImgNameById=function(e){return this.GetHeadImgName(Math.floor(e%100*.1),e%10)},e.GetEquipDefaultGreyIcon=function(e){return"ui_icon_grey_equip_"+(e+1)},e.GetEquipDefaultIcon=function(e){return"ui_icon_eqiup_"+(e+1)},e.GetHeroEquipDefaultIcon=function(t){return e._HeroEquipDefaultIcon[t]},e.GetAssets=function(t){return e.ROOT+t+".png"},e.GetMoviePath=function(t,n){return void 0===n&&(n=null),n?e.ROOT_MOVIE+n+"/"+t:e.ROOT_MOVIE+t},e.GetMovieStandPath=function(e){return this.GetMoviePath(e)},e.GetRingPath=function(t){return e.ROOT_MOVIE+"ring/"+t},e.GetMonsterBodyPath=function(t){return e.ROOT_MOVIE+"monster/"+t},e.GetRoleBodyPath=function(t){return e.ROOT_MOVIE+"body/"+t},e.GetShinvBodyPath=function(e){return""},e.GetShinvShowPath=function(e){return""},e.GetSkillPathByID=function(t){return e.ROOT_MOVIE+"skillEff/"+t},e.GetSkillPath=function(t){return e.ROOT_MOVIE+"skillEff/"+t},e.GetUIEffePath=function(t){return e.ROOT_MOVIE+"uiEffe/"+t},e.GetUIEffePath2=function(t){return e.ROOT_MOVIE+"uiEffe/"+t},e.GetRoleBodyPath2=function(t){return e.ROOT_MOVIE+"uiEffe/"+t},e.GetRoleShowPath=function(t){return t?e.ROOT_MOVIE+"role_show/"+t:""},e.GetVIPImgPath=function(t){return e.ROOT+"image/img/vip_show/"+t+".png"},e.GetHeroImgPath=function(t){return e.ROOT_MOVIE+"role_show/"+t},e.GetPetImgPath=function(t){return e.ROOT+"image/img/pet_show/"+t+".png"},e.GetMeriPointImgPath=function(t){return e.ROOT+"meridianWin/"+t},e.GetBookIcon=function(e){switch(e){case 1:return"ui_cjg_tyjs_bai";case 2:return"ui_cjg_tyjs_lan";case 3:return"xyy";case 4:return"ui_cjg_tyjs_huang";case 5:return"ui_cjg_tyjs_hong"}},e.GetGonfuName=function(e){switch(e){case 1:return"ui_cjg_tyjs_hhjf";case 2:return"ui_cjg_tyjs_tqjf";case 3:return"xxdf";case 4:return"ui_cjg_tyjs_jysg";case 5:return"ui_cjg_tyjs_khbd"}},e.GetGonfuName1=function(e){switch(e){case 1:return"ui_cjg_hhjf";case 2:return"ui_cjg_tqjf";case 3:return"ui_cjg_xxdf";case 4:return"ui_cjg_jysg";case 5:return"ui_cjg_kfbd"}},e.GetCjgRoleIcon=function(e){switch(e){case 1:return"ui_cjg_dzn1";case 2:return"ui_cjg_dzn1";case 3:return"ui_cjg_dzn1";case 4:return"ui_cjg_dzn2";case 5:return"ui_cjg_dzn3"}},e.GetRoleBookIcon=function(e){switch(e){case 1:return"ui_cjg_huise";case 2:return"ui_cjg_lan";case 3:return"ui_cjg_zi";case 4:return"ui_cjg_huang";case 5:return"ui_cjg_hong"}},e.GetCjgBookIcon=function(e){switch(e){case 1:return"ui_cjg_hhjf2";case 2:return"ui_cjg_tqjf2";case 3:return"ui_cjg_xxdf2";case 4:return"ui_cjg_jysg2";case 5:return"ui_cjg_khbd2"}},e.GetRankingImg=function(e){switch(e){case 1:return"ui_phb_p_ks1";case 2:return"ui_phb_p_by2";case 3:return"ui_phb_p_th3"}},e.GetRankingBg2=function(e){switch(e){case 1:return"ui_ctg_p_no1";case 2:return"ui_ctg_p_no2";case 3:return"ui_ctg_p_no3";default:return""}},e.GetRankingBigImg=function(e){switch(e){case 1:return"ui_ctg_zi_kuis";case 2:return"ui_ctg_zi_bangyan";case 3:return"ui_ctg_zi_tanhua"}},e.GetRankingBg=function(e){switch(e){case 1:return"ui_phb_p_1";case 2:return"ui_phb_p_2";case 3:return"ui_phb_p_3"}},e.GetGuildLevelImg=function(e){switch(e){case 1:return"ui_bh_cjbh_1";case 2:return"ui_bh_cjbh_2";case 3:return"ui_bh_cjbh_3";case 4:return"ui_bh_cjbh_4";case 5:return"ui_bh_cjbh_5"}},e.GetGuildLvImg=function(e){switch(e){case 1:return"ui_bhjc_p_1";case 2:return"ui_bhjc_p_2";case 3:return"ui_bhjc_p_3";case 4:return"ui_bhjc_p_4";case 5:return"ui_bhjc_p_5";case 6:return"ui_bhjc_p_6"}},e.GetGuildDayIcon=function(e){switch(e){case 1:return"ui_bh_fl_1";case 2:return"ui_bh_fl_2";case 3:return"ui_bh_fl_3";case 4:return"ui_bh_fl_4";case 5:return"ui_bh_fl_5";case 6:return"ui_bh_fl_6";case 7:return"ui_bh_fl_7"}},e.ROOT="resource/assets/",e.ROOT_WAR=e.ROOT+"war/",e.ROOT_MOVIE=e.ROOT+"movie/",e.ROOT_RIDE=e.ROOT+"ride/",e.ROOT_ICON=e.ROOT+"image/item_single/",e.RES_MOVIE_MONSTER="monster",e.RES_MOVIE_BODY="body",e.EMPTY_STR="",e.DEFAULT_BODY_NAME="body000",e.MINER=e.ROOT_MOVIE+"eff/kuanggong",e.MINE_ROB_EFFE=e.ROOT_MOVIE+"uiEffe/kelveduo",e.ITEM_BG_QUALITY=["ui_bm_icon001","ui_bm_icon002","ui_bm_icon003","ui_bm_icon004","ui_bm_icon005","ui_bm_icon006"],e.ITEM_TIp_QUALITY=["ui_bm_putong","ui_bm_putong","ui_bm_lv","ui_bm_blue","ui_bm_zi","ui_bm_orange","ui_bm_red"],e.DEFAULT_QUALITY=e.ITEM_BG_QUALITY[0],e._HeroEquipDefaultIcon={},e}();__reflect(ResDataPath.prototype,"ResDataPath");var ResMgr=function(){function e(){}return e.GetNoneList=function(){return this.NONE_LIST||(this.NONE_LIST=(e={},e[ResDataPath.GetUIEffePath("eff_ui_zb_001")+".png"]=1,e[ResDataPath.GetUIEffePath("eff_ui_zb_002")+".png"]=1,e[ResDataPath.GetUIEffePath("eff_ui_zb_003")+".png"]=1,e)),this.NONE_LIST;var e},e.GetName=function(e){var t=this.m_ResConfig[e];return t?t.url:e},e.ins=function(){return this.m_Instance||(this.m_Instance=new e),this.m_Instance},e.Init=function(){this.m_ResConfig=RES.config.config.fileSystem.fsData},e.GmInit=function(){},e._DoUpdate=function(){var e=0,t=0,n=egret.getTimer();for(var i in this.m_Wait){if(++e,t>=this.MAX_OP_COUNT)break;n>=this.m_Wait[i]&&(this.DestroyRes(i)&&(this.LOG&&console.log("destroy name => "+i),++t),delete this.m_Wait[i],--e)}1>e&&(TimerManager.ins().remove(this._DoUpdate,this),this.m_IsUpdate=!1)},e.Ref=function(t){t&&(e.GetNoneList()[t]||(this.m_Wait[t]&&delete this.m_Wait[t],this.m_Ref[t]?++this.m_Ref[t]:this.m_Ref[t]=1))},e.Unref=function(t,n){return void 0===n&&(n=null),t?e.GetNoneList()[t]?!1:this.m_Ref[t]&&--this.m_Ref[t]<=0?(delete this.m_Ref[t],this.m_Wait[t]=egret.getTimer()+(n||this.LIFE_TIME),this.m_IsUpdate||(this.m_IsUpdate=!0,TimerManager.ins().doTimer(this.LOOP_TIME,0,this._DoUpdate,this)),!0):!1:!1},e.ForceUnref=function(e){this.m_Ref[e]&&delete this.m_Ref[e],this.m_Wait[e]=egret.getTimer()+5},e.RefSkin=function(t){if(t){var n=RES_REF?RES_REF[t]:null;if(n)for(var i=0,o=n;i<o.length;i++){var s=o[i];e.Ref(s)}}},e.UnrefSkin=function(t){if(t){var n=RES_REF?RES_REF[t]:null;if(n)for(var i=0,o=n;i<o.length;i++){var s=o[i];e.Unref(s,e.IMG_LIFT_TIME)}}},e.DestroyRes=function(e){return RES.destroyRes(e)},e.DebugPrint=function(){var e=[];for(var t in this.m_Ref)e.push("key => "+t+" => "+this.m_Ref[t]);console.log("ref ======================"),console.log(e.join("\n")),e.length=0;var n=egret.getTimer();console.log("wait ======================",n);for(var t in this.m_Wait){var i=this.m_Wait[t];e.push("key => "+t+"; time => "+i+"; left => "+(i-n))}console.log(e.join("\n"))},e.getRefCount=function(e){return this.m_Ref[e]?this.m_Ref[e]:0},e.NONE_LIST=null,e.IMG_LIFT_TIME=3e4,e.LIFE_TIME=3e3,e.LOOP_TIME=3e3,e.MAX_OP_COUNT=40,e.LOG=!1,e.m_Ref={},e.m_Wait={},e.m_IsUpdate=!1,e}();__reflect(ResMgr.prototype,"ResMgr");var ResourceUtils=function(e){function t(){var t=e.call(this)||this;return t._groupIndex=0,t._configs=new Array,t._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onResourceLoadProgress,t),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onResourceLoadError,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addConfig=function(e,t){this._configs.push([e,t])},t.prototype.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},t.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},t.prototype.loadGroup=function(e,t,n,i){this._groups[e]=[t,n,i],RES.loadGroup(e)},t.prototype.loadGroups=function(e,t,n,i,o){RES.createGroup(e,t,!0),this.loadGroup(e,n,i,o)},t.prototype.pilfererLoadGroup=function(e,t){void 0===t&&(t=null);var n="pilferer_"+e;t||(t=[e]),RES.createGroup(n,t,!0),RES.loadGroup(n,-1)},t.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var n=this._groups[t][0],i=this._groups[t][2];null!=n&&n.call(i),this._groups[t]=null,delete this._groups[t]}},t.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this._groups[t]){var n=this._groups[t][1],i=this._groups[t][2];null!=n&&n.call(i,e.itemsLoaded,e.itemsTotal)}},t.prototype.onResourceLoadError=function(e){console.log(e.groupName+"资源组有资源加载失败"),this.onResourceLoadComplete(e)},t.prototype.loadResource=function(e,t,n,i,o){void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null);var s=e.concat(t),a="loadGroup"+this._groupIndex++;RES.createGroup(a,s,!0),this._groups[a]=[n,i,o],RES.loadGroup(a)},t}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var StageUtils=function(){function e(){null==e._uiStage&&(e._uiStage=new eui.UILayer,e._uiStage.touchEnabled=!1,e._uiStage.percentHeight=100,e._uiStage.percentWidth=100,this.GetStage().addChild(e._uiStage));var t=this.GetHeight(),n=this.GetWidth();console.log("舞台宽度! :"+n+" 舞台高度! :"+t)}return e.prototype.GetHeight=function(){return this.GetStage().stageHeight},e.prototype.GetWidth=function(){return this.GetStage().stageWidth},e.prototype.setTouchChildren=function(e){this.GetStage().touchChildren=e},e.prototype.SetMaxTouches=function(e){this.GetStage().maxTouches=e},e.prototype.SetFrameRate=function(e){this.GetStage().frameRate=e},e.prototype.GetStage=function(){return egret.MainContext.instance.stage},e.prototype.GetUIStage=function(){return e._uiStage},e.WIDTH=720,e.HEIGHT=1280,e}();__reflect(StageUtils.prototype,"StageUtils");var StringUtil=function(){function e(){}return e.SimlarityString=function(e,t){for(var n=[],i=[],o=0;o<e.length;o++)n.push(e.substring(o,o+1));for(var o=0;o<t.length;o++)i.push(t.substring(o,o+1));var s=0,a=0;if(0!=n.length&&0!=i.length){a=n.length>=i.length?i.length:n.length;for(var o=0;o<n.length;o++)for(var r=n[o],h=0;h<i.length;h++){var _=i[h];r==_&&s++}var l=0;return l=s/a}return 0},e}();__reflect(StringUtil.prototype,"StringUtil");var TextFlowMaker=function(){function e(){}return e.generateTextFlow=function(e){if(!e)return this.EMPTY_TABLE;for(var t=e.split("|"),n="",i=0,o=t.length;o>i;i++){var s=t[i];s&&0!=s.length&&(n+=this.getSingleTextFlow1(s))}return(new egret.HtmlTextParser).parser(n)},e.generateTextFlow1=function(e){for(var t=e.split("|"),n=[],i=0,o=t.length;o>i;i++)n.push(this.getSingleTextFlow(t[i]));return n},e.getSingleTextFlow1=function(e){for(var t,n="<font",i=this.Match(e),o=0,s=i.length;s>o;o++){var a=i[o].type,r=i[o].value;a==this.PROP_TEXT?t=r:a==this.STYLE_SIZE?n+=' size="'+parseInt(r)+'"':a==this.STYLE_COLOR?n+=' color="'+parseInt(r)+'"':t=r}return n+=">"+t+"</font>"},e.getSingleTextFlow=function(e){for(var t=this.Match(e),n={style:{}},i=0,o=t.length;o>i;i++){var s=t[i].type,a=t[i].value;s==this.PROP_TEXT?n.text=a:s==this.STYLE_SIZE?n.style.size=parseInt(a):s==this.STYLE_COLOR?n.style.textColor=parseInt(a):n.text=a}return n},e.consumeLabel=function(e,t,n){void 0===n&&(n=!0);var i="";return null==e||isNaN(e)||(i+=n?(t>e?"|C:0xff0000&T:":"|C:0x019704&T:")+e+"|/"+t:e),this.generateTextFlow(i)},e.Match=function(e){if(null!=e){var t=null;this.LIST.length=0;for(var n=0;99>n;++n){var i=e.match(this._REG);if(null==i||-1==i.index){this.LIST.push({type:t,value:e});break}null!=t&&this.LIST.push({type:t,value:e.substr(0,i.index)}),t=i[0].replace("&","").replace(":",""),e=e.substr(i.index+i[0].length)}return this.LIST}},e.getCStr=function(e){return this.numberList[e]?this.numberList[e]:""},e.EMPTY_TABLE=[],e._REG=new RegExp("&?[SCTU]:"),e.LIST=[],e.STYLE_COLOR="C",e.STYLE_SIZE="S",e.PROP_TEXT="T",e.UNDERLINE_TEXT="U",e.numberList=["零","一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四"],e}();__reflect(TextFlowMaker.prototype,"TextFlowMaker");var TimerManager=function(e){function t(){var t=e.call(this)||this;return t._haveremove=!1,t._handlers=new Array,t._currTime=egret.getTimer(),t._currFrame=0,t._timeScale=1,egret.Ticker.getInstance().register(t.onEnterFrame,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getFrameId=function(){return this._currFrame},t.prototype.setTimeScale=function(e){this._timeScale=e},t.prototype.onEnterFrame=function(){this._currFrame++,this._currTime=egret.getTimer();for(var e=0,t=this._handlers;e<t.length;e++){var n=t[e];if(n.remove)this._haveremove=!0;else{var i=n.userFrame?this._currFrame:this._currTime;i>=n.exeTime&&(n.method.call(n.methodObj,(this._currTime-n.dealTime)*this._timeScale),n.dealTime=this._currTime,n.exeTime+=n.delay,n.repeat||(n.repeatCount>1?n.repeatCount--:(n.complateMethod&&n.complateMethod.apply(n.complateMethodObj),n.remove=!0,this._haveremove=!0)))}}if(this._haveremove)for(var o=this._handlers.length-1;o>=0;--o){var n=this._handlers[o];n.remove&&(n.clear(),this._handlers.splice(o,1),ObjectPool.push(n))}this._haveremove=!1},t.prototype.create=function(e,t,n,i,o,s,a){if(!(0>t||0>n||null==i)){this.remove(i,o);var r=ObjectPool.pop("TimerHandler");r.userFrame=e,r.repeat=0==n,r.repeatCount=n,r.delay=t,r.method=i,r.methodObj=o,r.complateMethod=s,r.complateMethodObj=a,r.exeTime=t+(e?this._currFrame:this._currTime),r.dealTime=this._currTime,r.remove=!1,this._handlers.push(r)}},t.prototype.doTimer=function(e,t,n,i,o,s){void 0===o&&(o=null),void 0===s&&(s=null),this.create(!1,e,t,n,i,o,s)},t.prototype.doFrame=function(e,t,n,i,o,s){void 0===o&&(o=null),void 0===s&&(s=null),this.create(!0,e,t,n,i,o,s)},t.prototype.doNext=function(e,t){this.create(!0,1,1,e,t,null,null)},t.prototype.remove=function(e,t){for(var n=0,i=this._handlers;n<i.length;n++){var o=i[n];o.remove||o.method!=e||o.methodObj!=t||(o.remove=!0,this._haveremove=!0)}},t.prototype.removeAll=function(e){for(var t=0,n=this._handlers;t<n.length;t++){var i=n[t];i.methodObj==e&&(i.remove=!0,this._haveremove=!0)}},t.prototype.isExists=function(e,t){for(var n=0,i=this._handlers;n<i.length;n++){var o=i[n];if(!o.remove&&o.method==e&&o.methodObj==t)return!0}return!1},t}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function e(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0,this.remove=!1}return e.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null,this.remove=!1},e}();__reflect(TimerHandler.prototype,"TimerHandler");var Util=function(){function e(){}return e.GetClass=function(e){if(!e)return null;var t=e.__class__;return t?egret.getDefinitionByName(t):null},e.CopyProtoData=function(e){if(null==e)return null;for(var t={},n=Object.keys(e),i=0,o=n.length;o>i;i++){var s=n[i];"se"!=s&&"de"!=s&&(t[s]=e[s])}},e.GetParentByType=function(e,t){if(null==e)return null;var n=egret.getQualifiedClassName(t),i=e;if(egret.is(i,n))return i;for(var o=0;10>o;++o){if(i=i.parent,null==i)return null;if(egret.is(i,n))return i}return null},e.Copy=function(e){try{var t=document.createElement("input");return t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy"),document.body.removeChild(t),!0}catch(n){console.error("Copy => "+n)}return!1},e.formatTime=function(e){var t,n,i=e.getFullYear(),o=e.getMonth()+1,s=e.getDate();t=10>o?"0"+o:o,n=10>s?"0"+s:s;var a,r,h,_=e.getHours(),l=e.getMinutes(),u=e.getSeconds();a=10>_?"0"+_:_,r=10>l?"0"+l:l,h=10>u?"0"+u:u;var c=i+"-"+t+"-"+n+" "+a+":"+r+":"+h;return c},e.isLeapYear=function(e){return e%100==0&&e%400==0?!0:e%100!=0&&e%4==0?!0:!1},e.getDaysOfMonth=function(e){var t=e.getFullYear(),n=this.isLeapYear(t),i=e.getMonth()+1,o=0;switch(i){case 1:o=31;break;case 3:o=31;break;case 5:o=31;break;case 7:o=31;break;case 8:o=31;break;case 10:o=31;break;case 12:o=31;break;case 4:o=30;break;case 6:o=30;break;case 9:o=30;break;case 11:o=30;break;case 2:o=n?29:28}return o},e.getDaysOfMonth_pre=function(e){var t=e.getFullYear(),n=this.isLeapYear(t),i=e.getMonth();0==i&&(i=12);var o=0;switch(i){case 1:o=31;break;case 3:o=31;break;case 5:o=31;break;case 7:o=31;break;case 8:o=31;break;case 10:o=31;break;case 12:o=31;break;case 4:o=30;break;case 6:o=30;break;case 9:o=30;break;case 11:o=30;break;case 2:o=n?29:28}return o},e}();__reflect(Util.prototype,"Util");var ViewManager=function(e){function t(){var t=e.call(this)||this;return t._views={},t._viewCode={},t._opens=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.clear=function(){this.closeAll()},t.prototype.destroy=function(e){var t;this._viewCode[e]&&(t=this._viewCode[e],delete this._viewCode[e]),this._views[t]&&delete this._views[t]},t.viewOpenCheck=function(e,t){if(!e)return!1;var n=e.openCheck;return n?n.apply(null,t):!0},t.prototype.openIndex=function(e,n){t.ins().isShow(e)?t.ins().getView(e).SetTableIndex(n):t.ins().open(e,n)},t.prototype.open=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this.openEasy(e,t);return i&&this.mViewImpl&&this.mViewImpl.OnOpenView(i),i},t.prototype.openEasy=function(e,t){var n=this;if(void 0===t&&(t=null),null==e)return void console.log("open nameorclass is null");var i=egret.getQualifiedClassName(e),o=this._views[i];if(o||(o=new e,this._views[i]=o,this._viewCode[o.hashCode]=i),null==o)return void console.error("panel "+i+"不存在");var s=e.LAYER_LEVEL;return null==s&&(s=o.GetLayerLevel(),s||console.error("没有设置层级",i)),this._IsShow(i)||o.isInit()?(this.AddTo(s,o),this._OpenView(o,t)):o.loadResource(function(){n.AddTo(s,o),o.setVisible(!1)},function(){o.DoInit(),o.initData(),n._OpenView(o,t),o.setVisible(!0)}),-1==this._opens.indexOf(i)&&this._opens.push(i),o},t.prototype.AddTo=function(e,t){for(var n=Util.GetClass(t).VIEW_LAYER_LEVEL||ViewLayerLevel.MIDDLE,i=0,o=e.numChildren-1;o>=0;--o)if(n>=(Util.GetClass(e.getChildAt(o)).VIEW_LAYER_LEVEL||ViewLayerLevel.MIDDLE)){i=o+1;break}e.addChildAt(t,i)},t.prototype._OpenView=function(e,t){e.DoOpen.call(e,t)},t.prototype._CloseVie=function(e){e.DoClose.apply(e)},t.prototype.close=function(e){var t=egret.getQualifiedClassName(e),n=this.closeEasy(t);n&&this.mViewImpl&&this.mViewImpl.OnCloseOneView(n)},t.prototype.closeEasy=function(e){if(!this._IsShow(e))return null;var t=this._views[e];if(t){var n=this._opens.indexOf(e);n>=0&&(this._opens.splice(n,1),this._CloseVie(t)),DisplayUtils.removeFromParent(t),t.destoryView()}return t},t.prototype.getView=function(e){return this._views[egret.getQualifiedClassName(e)]},t.prototype.closeAll=function(){for(var e=this._opens.length-1;e>=0;--e)this.closeEasy(this._opens[e]);this._opens.length>0&&console.error(this._opens.length+" => close all error !!!"),this.mViewImpl&&this.mViewImpl.OnCloseAll()},t.prototype.currOpenNum=function(){return this._opens.length},t.prototype.isShow=function(e){return this._IsShow(egret.getQualifiedClassName(e))},t.prototype._IsShow=function(e){return this._opens.indexOf(e)>=0},t.prototype.closePartPanel=function(){for(var e=[],t=0;t<this._opens.length;t++){var n=this._opens[t];"MainTop2Panel"!=n&&"MainBottomPanel"!=n&&"MainTopPanel"!=n&&"BriberyBasePanel"!=n&&e.push(this._opens[t])}for(var i=e.length-1;i>=0;i--){var n=e[i],o=this._views[n];if(o){var s=o.parent;(s==LayerManager.UI_Popup||s==LayerManager.UI_Main||s==LayerManager.UI_Main_2)&&this.closeEasy(n)}}this.mViewImpl&&this.mViewImpl.OnClosePartView()},t.prototype.Guide=function(e,t){void 0===t&&(t=null),this._GotoView(e,t)},t.AdjustIndex=function(e,t){return[e,t]},t.prototype._GotoView=function(e,t){switch(e){case ViewIndexDef.EquipWearCount:case ViewIndexDef.EquipWearAssign:case ViewIndexDef.TYPE_1027:break;case ViewIndexDef.TYPE_1028:break;default:return console.warn("not def goto index => "+e),!1}return!0},t.openCheckTip=!1,t.INVAILD_NAME=[],t}(BaseClass);__reflect(ViewManager.prototype,"ViewManager");var ViewIndexDef;!function(e){e[e.EquipWearCount=10010]="EquipWearCount",e[e.EquipWearAssign=10011]="EquipWearAssign",e[e.EquipSmelt=10020]="EquipSmelt",e[e.EquipEnhanceAll=10030]="EquipEnhanceAll",e[e.EquipEnhanceAcc=10031]="EquipEnhanceAcc",e[e.EquipRefineAll=10040]="EquipRefineAll",e[e.EquipRefineAcc=10041]="EquipRefineAcc",e[e.EquipAnneal=10050]="EquipAnneal",e[e.EquipAnnealAcc=10051]="EquipAnnealAcc",e[e.EquipGemAll=10060]="EquipGemAll",e[e.EquipGemAcc=10061]="EquipGemAcc",e[e.SkillUpgrade=20010]="SkillUpgrade",e[e.ChapterClear=30010]="ChapterClear",e[e.ChapterGoto=30020]="ChapterGoto",e[e.PetActive=40010]="PetActive",e[e.Xianlv=40120]="Xianlv",e[e.PetUpgrade=40020]="PetUpgrade",e[e.RideUpgrade=50010]="RideUpgrade",e[e.Tianx=50020]="Tianx",e[e.TeamFb=60010]="TeamFb",e[e.MyBoss=60020]="MyBoss",e[e.PublicBoss=60030]="PublicBoss",e[e.Arane=60040]="Arane",e[e.MaterialFb=60050]="MaterialFb",e[e.Treasuremap=60060]="Treasuremap",e[e.HeavenFb=60070]="HeavenFb",e[e.LingLongTa=60081]="LingLongTa",e[e.Fomalhaut=60090]="Fomalhaut",e[e.ChatWorld=70010]="ChatWorld",e[e.RoleLevelup=70020]="RoleLevelup",e[e.AutoOpen=70030]="AutoOpen",e[e.HookKill=70040]="HookKill",e[e.DayLogin=70050]="DayLogin",e[e.TYPE_1000=1e3]="TYPE_1000",e[e.TYPE_1001=1001]="TYPE_1001",e[e.TYPE_1002=1002]="TYPE_1002",e[e.TYPE_1003=1003]="TYPE_1003",e[e.TYPE_1004=1004]="TYPE_1004",e[e.TYPE_1005=1005]="TYPE_1005",e[e.TYPE_1006=1006]="TYPE_1006",e[e.TYPE_1007=1007]="TYPE_1007",e[e.TYPE_1008=1008]="TYPE_1008",e[e.TYPE_1009=1009]="TYPE_1009",e[e.TYPE_1010=1010]="TYPE_1010",e[e.TYPE_1011=1011]="TYPE_1011",e[e.TYPE_1012=1012]="TYPE_1012",e[e.TYPE_1013=1013]="TYPE_1013",e[e.TYPE_1014=1014]="TYPE_1014",e[e.TYPE_1015=1015]="TYPE_1015",e[e.TYPE_1016=1016]="TYPE_1016",e[e.TYPE_1017=1017]="TYPE_1017",e[e.TYPE_1018=1018]="TYPE_1018",e[e.TYPE_1019=1019]="TYPE_1019",e[e.TYPE_1020=1020]="TYPE_1020",e[e.TYPE_1021=1021]="TYPE_1021",e[e.TYPE_1022=1022]="TYPE_1022",e[e.TYPE_1023=1023]="TYPE_1023",e[e.TYPE_1024=1024]="TYPE_1024",e[e.TYPE_1025=1025]="TYPE_1025",e[e.TYPE_1026=1026]="TYPE_1026",e[e.TYPE_1027=1027]="TYPE_1027",e[e.TYPE_1028=1028]="TYPE_1028",e[e.TYPE_1029=1029]="TYPE_1029",e[e.TYPE_1030=1030]="TYPE_1030",e[e.TYPE_1031=1031]="TYPE_1031",e[e.TYPE_1032=1032]="TYPE_1032",e[e.TYPE_1033=1033]="TYPE_1033",e[e.TYPE_1034=1034]="TYPE_1034",e[e.TYPE_1035=1035]="TYPE_1035",e[e.TYPE_1036=1036]="TYPE_1036",e[e.TYPE_1037=1037]="TYPE_1037",e[e.TYPE_1038=1038]="TYPE_1038",e[e.TYPE_1039=1039]="TYPE_1039",e[e.TYPE_1040=1040]="TYPE_1040",e[e.TYPE_1043=1043]="TYPE_1043",e[e.TYPE_1045=1045]="TYPE_1045",e[e.TYPE_1041=1041]="TYPE_1041",e[e.TYPE_1047=1047]="TYPE_1047",e[e.TYPE_1048=1048]="TYPE_1048",e[e.TYPE_1049=1049]="TYPE_1049",e[e.TYPE_1050=1050]="TYPE_1050",e[e.TYPE_1051=1051]="TYPE_1051",e[e.TYPE_1052=1052]="TYPE_1052",e[e.TYPE_1053=1053]="TYPE_1053",e[e.TYPE_1054=1054]="TYPE_1054",e[e.TYPE_1055=1055]="TYPE_1055",e[e.TYPE_1056=1056]="TYPE_1056",e[e.TYPE_1057=1057]="TYPE_1057",e[e.TYPE_1058=1058]="TYPE_1058",e[e.TYPE_1059=1059]="TYPE_1059",e[e.TYPE_1060=1060]="TYPE_1060",e[e.TYPE_1061=1061]="TYPE_1061",e[e.TYPE_1062=1062]="TYPE_1062",e[e.TYPE_1063=1063]="TYPE_1063",e[e.TYPE_1064=1064]="TYPE_1064",e[e.TYPE_1065=1065]="TYPE_1065",e[e.TYPE_1066=1066]="TYPE_1066",e[e.TYPE_1067=1067]="TYPE_1067",e[e.TYPE_1068=1068]="TYPE_1068",e[e.TYPE_1069=1069]="TYPE_1069",e[e.TYPE_1070=1070]="TYPE_1070",e[e.TYPE_1071=1071]="TYPE_1071",e[e.TYPE_1072=1072]="TYPE_1072",e[e.TYPE_1073=1073]="TYPE_1073",e[e.TYPE_1074=1074]="TYPE_1074",e[e.TYPE_1075=1075]="TYPE_1075",e[e.TYPE_1076=1076]="TYPE_1076",e[e.TYPE_1077=1077]="TYPE_1077",e[e.TYPE_2000=2e3]="TYPE_2000",e[e.TYPE_2001=2001]="TYPE_2001",e[e.TYPE_1078=1078]="TYPE_1078",e[e.TYPE_1079=1079]="TYPE_1079",e[e.TYPE_1080=1080]="TYPE_1080",e[e.TYPE_1081=1081]="TYPE_1081",e[e.TYPE_1082=1082]="TYPE_1082",e[e.TYPE_1083=1083]="TYPE_1083",e[e.TYPE_1084=1084]="TYPE_1084",e[e.TYPE_1085=1085]="TYPE_1085",e[e.TYPE_1086=1086]="TYPE_1086",e[e.TYPE_1087=1087]="TYPE_1087",e[e.TYPE_1088=1088]="TYPE_1088",e[e.TYPE_1089=1089]="TYPE_1089",e[e.TYPE_1090=1090]="TYPE_1090",e[e.TYPE_1092=1092]="TYPE_1092",e[e.TYPE_1093=1093]="TYPE_1093"}(ViewIndexDef||(ViewIndexDef={}));var ViewManagerImpl=function(){function e(e){this.mMgr=e}return e.prototype.GetLoading=function(){return null==this.m_Loading&&(this.m_Loading=new CircleLoading),this.m_Loading},e.prototype.Init=function(){},e.prototype.addWinHd=function(e){e._type},e.prototype.closeWinHd=function(e){e._type},e.prototype.Open=function(e){if(e){var t=ViewManager.ins().open(e);t.mRemoveNotDestroyView=!0}},e.prototype.Close=function(e){e&&ViewManager.ins().close(e)},e.prototype.Destroy=function(e){if(e){var t=ViewManager.ins().getView(e);t&&(t.mRemoveNotDestroyView=null,t.isShow()?t.CloseSelf():t.destoryView())}},e.prototype.closeUIMainWindow=function(){var e=LayerManager.UI_Main;if(0!=e.$children.length)for(var t=0;t<e.$children.length;t++){var n=e.$children[t];ViewManager.ins().isShow(n)&&ViewManager.ins().close(n)}},e.prototype.OnOpenView=function(e){if(e){if(e.parent==LayerManager.UI_FullScreen_Popup&&this.closeUIMainWindow(),e.parent==LayerManager.UI_Main)for(var t=0,n=this.mMgr._opens;t<n.length;t++){var i=n[t],o=this.mMgr._views[i];if(null!=o){if(e==o)break;var s=egret.getDefinitionByName(egret.getQualifiedClassName(o));s.LAYER_LEVEL==LayerManager.UI_Main_2&&this.mMgr.closeEasy(egret.getQualifiedClassName(o))}}egret.is(e,"GuildWarInfoPanel")&&this.CloseMainTop2Panel()}},e.prototype.OnCloseOneView=function(e){egret.getDefinitionByName(egret.getQualifiedClassName(e));this._CloseOneView()},e.prototype.OnClosePartView=function(){this._CloseOneView()},e.prototype.OnCloseAll=function(){},e.prototype.CloseMainTop2Panel=function(){},e.prototype._CloseOneView=function(){LayerManager.HasMainPanel()},e.prototype.ShowLoading=function(){var e=this.GetLoading();e.m_IsShow||e._Show()},e.prototype.HideLoading=function(){this.m_Loading&&this.m_Loading.m_IsShow&&this.m_Loading._Hide()},e}();__reflect(ViewManagerImpl.prototype,"ViewManagerImpl",["IViewMangerImpl"]);var WaiterStateUtil=function(){function e(){}return e.getStateName=function(e){var t="";return e==this.SST_YY_WAIT&&(t="等待服务中..."),e==this.SST_YY_RECV&&(t="服务人员准备中..."),e>=this.SST_WF_MIN&&e<this.SST_WF_MAX&&(t="缺少服务人员"),e>=this.SST_HJ_MIN&&e<this.SST_HJ_MAX&&(t="呼叫服务人员..."),e>=this.SST_SD_MIN&&e<this.SST_SD_MAX&&(t="服务人员正在赶来..."),e>=this.SST_SZ_MIN&&e<this.SST_SZ_MAX&&(t="开始为您服务..."),e>=this.SST_FW_MIN&&e<this.SST_FW_MAX&&(t="服务进行中...."),e>=this.SST_ZT_MIN&&e<this.SST_ZT_MAX&&(t="暂停"),e==this.SST_YY_WAIT&&(t="预约"),e==this.SST_YY_RECV&&(t="定约"),e>=this.SST_FW_FINISH&&(t="服务已完成"),t},e.getStateSound=function(e){var t="";return e==this.SST_YY_WAIT&&(t="resource/sound/worker/yuyue.mp3"),e==this.SST_YY_RECV&&(t="resource/sound/worker/dingyue.mp3"),e>=this.SST_WF_MIN&&e<this.SST_WF_MAX&&(t="resource/sound/worker/queren.mp3"),e>=this.SST_HJ_MIN&&e<this.SST_HJ_MAX&&(t="resource/sound/worker/hujiao.mp3"),e>=this.SST_SD_MIN&&e<this.SST_SD_MAX&&(t="resource/sound/worker/zhunbei.mp3"),e>=this.SST_SZ_MIN&&e<this.SST_SZ_MAX&&(t="resource/sound/worker/shizhong.mp3"),e>=this.SST_FW_MIN&&e<this.SST_FW_MAX&&(t="resource/sound/worker/shangzhong.mp3"),e>=this.SST_ZT_MIN&&e<this.SST_ZT_MAX&&(t="resource/sound/worker/zanting.mp3"),e>=this.SST_FW_FINISH&&(t="resource/sound/worker/jieshu.mp3"),t},e.getStateNameColor=function(e){var t=8947848;return e<=this.SST_YY_WAIT&&(t=16737826),e==this.SST_YY_RECV&&(t=6895752),e>=this.SST_WF_MIN&&e<this.SST_WF_MAX&&(t=16711680),e>=this.SST_HJ_MIN&&e<this.SST_HJ_MAX&&(t=16146944),e>=this.SST_SD_MIN&&e<this.SST_SD_MAX&&(t=16121983),e>=this.SST_SZ_MIN&&e<this.SST_SZ_MAX&&(t=46070),e>=this.SST_FW_MIN&&e<this.SST_FW_MAX&&(t=383498),e>=this.SST_ZT_MIN&&e<this.SST_ZT_MAX&&(t=3553618),e>=this.SST_FW_FINISH&&(t=15517962),t},e.getStateBackColor=function(e){var t=8947848;return e>=this.SST_WF_MIN&&e<this.SST_WF_MAX&&(t=16711680),e>=this.SST_HJ_MIN&&e<this.SST_HJ_MAX&&(t=16146944),e>=this.SST_SD_MIN&&e<this.SST_SD_MAX&&(t=16121983),e>=this.SST_SZ_MIN&&e<this.SST_SZ_MAX&&(t=46070),e>=this.SST_FW_MIN&&e<this.SST_FW_MAX&&(t=383498),e>=this.SST_ZT_MIN&&e<this.SST_ZT_MAX&&(t=16136530),e>=this.SST_FW_FINISH&&(t=15517962),t},e.SST_YY_WAIT=10,e.SST_YY_RECV=11,e.SST_WF_MIN=100,e.SST_WF_MAX=199,e.SST_HJ_MIN=200,e.SST_HJ_MAX=299,e.SST_SD_MIN=300,e.SST_SD_YZM=310,e.SST_SD_MAX=399,e.SST_SZ_MIN=400,e.SST_SZ_MAX=499,e.SST_FW_MIN=500,e.SST_FW_MAX=599,e.SST_ZT_MIN=600,e.SST_ZT_MAX=699,e.SST_FW_FINISH=2e3,e}();__reflect(WaiterStateUtil.prototype,"WaiterStateUtil");var UrlButton=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initUrl=function(e){this.LockUrl=e,this.setEnableByUrl(this.LockUrl)},t.prototype.setEnableByUrl=function(e){if(null!=GameGlobal.myUser.username&&"admin"==GameGlobal.myUser.username)return void EnableViewCtrlManage.SetViewEnableTrue(this);for(var t=!1,n=0;n<GameGlobal.perUrlArr.length;n++){var i=GameGlobal.perUrlArr[n],o=i.path;if(o.indexOf(e)>=0||e.indexOf(o)>=0){t=!0;break}}t?EnableViewCtrlManage.SetViewEnableTrue(this):EnableViewCtrlManage.SetViewEnableFalse(this)},t}(eui.Button);__reflect(UrlButton.prototype,"UrlButton");var md5=function(){function e(){}return e.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.any_hmac_md5=function(e,t,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),n)},e.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.rstr_hmac_md5=function(e,t){var n=this.rstr2binl(e);n.length>16&&(n=this.binl_md5(n,8*e.length));for(var i=Array(16),o=Array(16),s=0;16>s;s++)i[s]=909522486^n[s],o[s]=1549556828^n[s];var a=this.binl_md5(i.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(o.concat(a),640))},e.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var n,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",s=0;s<e.length;s++)n=e.charCodeAt(s),o+=i.charAt(n>>>4&15)+i.charAt(15&n);return o},e.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",o=e.length,s=0;o>s;s+=3)for(var a=e.charCodeAt(s)<<16|(o>s+1?e.charCodeAt(s+1)<<8:0)|(o>s+2?e.charCodeAt(s+2):0),r=0;4>r;r++)i+=8*s+6*r>8*e.length?this.b64pad:n.charAt(a>>>6*(3-r)&63);return i},e.rstr2any=function(e,t){var n,i,o,s,a,r=t.length,h=Array(Math.ceil(e.length/2));for(n=0;n<h.length;n++)h[n]=e.charCodeAt(2*n)<<8|e.charCodeAt(2*n+1);var _=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),l=Array(_);
for(i=0;_>i;i++){for(a=Array(),s=0,n=0;n<h.length;n++)s=(s<<16)+h[n],o=Math.floor(s/r),s-=o*r,(a.length>0||o>0)&&(a[a.length]=o);l[i]=s,h=a}var u="";for(n=l.length-1;n>=0;n--)u+=t.charAt(l[n]);return u},e.str2rstr_utf8=function(e){for(var t,n,i="",o=-1;++o<e.length;)t=e.charCodeAt(o),n=o+1<e.length?e.charCodeAt(o+1):0,t>=55296&&56319>=t&&n>=56320&&57343>=n&&(t=65536+((1023&t)<<10)+(1023&n),o++),127>=t?i+=String.fromCharCode(t):2047>=t?i+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i},e.str2rstr_utf16le=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(255&e.charCodeAt(n),e.charCodeAt(n)>>>8&255);return t},e.str2rstr_utf16be=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)>>>8&255,255&e.charCodeAt(n));return t},e.rstr2binl=function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(var n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},e.binl2rstr=function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t},e.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,i=-271733879,o=-1732584194,s=271733878,a=0;a<e.length;a+=16){var r=n,h=i,_=o,l=s;n=this.md5_ff(n,i,o,s,e[a+0],7,-680876936),s=this.md5_ff(s,n,i,o,e[a+1],12,-389564586),o=this.md5_ff(o,s,n,i,e[a+2],17,606105819),i=this.md5_ff(i,o,s,n,e[a+3],22,-1044525330),n=this.md5_ff(n,i,o,s,e[a+4],7,-176418897),s=this.md5_ff(s,n,i,o,e[a+5],12,1200080426),o=this.md5_ff(o,s,n,i,e[a+6],17,-1473231341),i=this.md5_ff(i,o,s,n,e[a+7],22,-45705983),n=this.md5_ff(n,i,o,s,e[a+8],7,1770035416),s=this.md5_ff(s,n,i,o,e[a+9],12,-1958414417),o=this.md5_ff(o,s,n,i,e[a+10],17,-42063),i=this.md5_ff(i,o,s,n,e[a+11],22,-1990404162),n=this.md5_ff(n,i,o,s,e[a+12],7,1804603682),s=this.md5_ff(s,n,i,o,e[a+13],12,-40341101),o=this.md5_ff(o,s,n,i,e[a+14],17,-1502002290),i=this.md5_ff(i,o,s,n,e[a+15],22,1236535329),n=this.md5_gg(n,i,o,s,e[a+1],5,-165796510),s=this.md5_gg(s,n,i,o,e[a+6],9,-1069501632),o=this.md5_gg(o,s,n,i,e[a+11],14,643717713),i=this.md5_gg(i,o,s,n,e[a+0],20,-373897302),n=this.md5_gg(n,i,o,s,e[a+5],5,-701558691),s=this.md5_gg(s,n,i,o,e[a+10],9,38016083),o=this.md5_gg(o,s,n,i,e[a+15],14,-660478335),i=this.md5_gg(i,o,s,n,e[a+4],20,-405537848),n=this.md5_gg(n,i,o,s,e[a+9],5,568446438),s=this.md5_gg(s,n,i,o,e[a+14],9,-1019803690),o=this.md5_gg(o,s,n,i,e[a+3],14,-187363961),i=this.md5_gg(i,o,s,n,e[a+8],20,1163531501),n=this.md5_gg(n,i,o,s,e[a+13],5,-1444681467),s=this.md5_gg(s,n,i,o,e[a+2],9,-51403784),o=this.md5_gg(o,s,n,i,e[a+7],14,1735328473),i=this.md5_gg(i,o,s,n,e[a+12],20,-1926607734),n=this.md5_hh(n,i,o,s,e[a+5],4,-378558),s=this.md5_hh(s,n,i,o,e[a+8],11,-2022574463),o=this.md5_hh(o,s,n,i,e[a+11],16,1839030562),i=this.md5_hh(i,o,s,n,e[a+14],23,-35309556),n=this.md5_hh(n,i,o,s,e[a+1],4,-1530992060),s=this.md5_hh(s,n,i,o,e[a+4],11,1272893353),o=this.md5_hh(o,s,n,i,e[a+7],16,-155497632),i=this.md5_hh(i,o,s,n,e[a+10],23,-1094730640),n=this.md5_hh(n,i,o,s,e[a+13],4,681279174),s=this.md5_hh(s,n,i,o,e[a+0],11,-358537222),o=this.md5_hh(o,s,n,i,e[a+3],16,-722521979),i=this.md5_hh(i,o,s,n,e[a+6],23,76029189),n=this.md5_hh(n,i,o,s,e[a+9],4,-640364487),s=this.md5_hh(s,n,i,o,e[a+12],11,-421815835),o=this.md5_hh(o,s,n,i,e[a+15],16,530742520),i=this.md5_hh(i,o,s,n,e[a+2],23,-995338651),n=this.md5_ii(n,i,o,s,e[a+0],6,-198630844),s=this.md5_ii(s,n,i,o,e[a+7],10,1126891415),o=this.md5_ii(o,s,n,i,e[a+14],15,-1416354905),i=this.md5_ii(i,o,s,n,e[a+5],21,-57434055),n=this.md5_ii(n,i,o,s,e[a+12],6,1700485571),s=this.md5_ii(s,n,i,o,e[a+3],10,-1894986606),o=this.md5_ii(o,s,n,i,e[a+10],15,-1051523),i=this.md5_ii(i,o,s,n,e[a+1],21,-2054922799),n=this.md5_ii(n,i,o,s,e[a+8],6,1873313359),s=this.md5_ii(s,n,i,o,e[a+15],10,-30611744),o=this.md5_ii(o,s,n,i,e[a+6],15,-1560198380),i=this.md5_ii(i,o,s,n,e[a+13],21,1309151649),n=this.md5_ii(n,i,o,s,e[a+4],6,-145523070),s=this.md5_ii(s,n,i,o,e[a+11],10,-1120210379),o=this.md5_ii(o,s,n,i,e[a+2],15,718787259),i=this.md5_ii(i,o,s,n,e[a+9],21,-343485551),n=this.safe_add(n,r),i=this.safe_add(i,h),o=this.safe_add(o,_),s=this.safe_add(s,l)}return[n,i,o,s]},e.md5_cmn=function(e,t,n,i,o,s){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(i,s)),o),n)},e.md5_ff=function(e,t,n,i,o,s,a){return this.md5_cmn(t&n|~t&i,e,t,o,s,a)},e.md5_gg=function(e,t,n,i,o,s,a){return this.md5_cmn(t&i|n&~i,e,t,o,s,a)},e.md5_hh=function(e,t,n,i,o,s,a){return this.md5_cmn(t^n^i,e,t,o,s,a)},e.md5_ii=function(e,t,n,i,o,s,a){return this.md5_cmn(n^(t|~i),e,t,o,s,a)},e.safe_add=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n},e.bit_rol=function(e,t){return e<<t|e>>>32-t},e.hexcase=0,e.b64pad="",e}();__reflect(md5.prototype,"md5");var normalselpanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="normalselskin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._title=e[0],this._listdata=e[1],this._callfunc=e[2],this._callthisobj=e[3],this.lab_title.text=this._title,this.onListUpdate(),this.AddClick(this.lab_title,this._OnClick),this.AddClick(this._btn_back,this._OnClick)},t.prototype._OnClick=function(e){switch(e.target){case this.lab_title:this.CloseSelf();break;case this._btn_back:this.CloseSelf()}},t.prototype.OnClose=function(){},t.prototype.onEventData=function(e){},t.prototype.onServerEventData=function(e){},t.prototype.onListUpdate=function(){for(var e=[],t=this._listdata,n=0;n<t.length;n++){var i=t[n];e.push({idx:n,d:i,selfunc:this._callfunc,callobj:this._callthisobj,closefunc:this.CloseSelf,closeobj:this})}var o=new eui.ArrayCollection(e);this.listItem.dataProvider=o,this.listItem.itemRenderer=listnormalselItem,this.listItem.validateNow()},t.prototype.on_btn_sure=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(normalselpanel.prototype,"normalselpanel");var listnormalselItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_touch_begin,this)},t.prototype._on_touch_begin=function(){this.data.selfunc.call(this.data.callobj,this.data.idx),this.data.closefunc.call(this.data.closeobj)},t.prototype.dataChanged=function(){var e=this.data;null!=e.d.name1&&(this.lab_name1.text=e.d.name1),null!=e.d.name2&&(this.lab_name2.text=e.d.name2)},t.prototype.doSomeChange=function(){},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_touch_begin,this)},t}(eui.ItemRenderer);__reflect(listnormalselItem.prototype,"listnormalselItem");var normalTimeSetPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="normalTimeSetskin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._title=e[0],this._listdata=e[1],this._callfunc=e[2],this._callthisobj=e[3],this.lab_title.text=this._title,this.onListUpdate(),this.AddClick(this.lab_title,this._OnClick),this.AddClick(this._btn_back,this._OnClick)},t.prototype._OnClick=function(e){switch(e.target){case this.lab_title:this.CloseSelf();break;case this._btn_back:this.CloseSelf()}},t.prototype.OnClose=function(){},t.prototype.onEventData=function(e){},t.prototype.onServerEventData=function(e){},t.prototype.onListUpdate=function(){for(var e=[],t=this._listdata,n=0;n<t.length;n++){var i=t[n];e.push({idx:n,d:i,selfunc:this._callfunc,callobj:this._callthisobj,closefunc:this.CloseSelf,closeobj:this})}var o=new eui.ArrayCollection(e);this.listItem.dataProvider=o,this.listItem.itemRenderer=listnormalTimeSetItem,this.listItem.validateNow()},t.prototype.on_btn_sure=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(normalTimeSetPanel.prototype,"normalTimeSetPanel");var listnormalTimeSetItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_touch_begin,this)},t.prototype._on_touch_begin=function(){this.data.closefunc.call(this.data.closeobj)},t.prototype.dataChanged=function(){var e=this.data;1==e.d.c?(this.lab_name1.textColor=13380138,this.lab_name2.textColor=13380138,this.lab_name3.textColor=13380138):0==e.d.c&&(this.lab_name1.textColor=7190294,this.lab_name2.textColor=7190294,this.lab_name3.textColor=7190294),null!=e.d.name1&&(this.lab_name1.text=e.d.name1),null!=e.d.name2&&(this.lab_name2.text=e.d.name2),null!=e.d.name3&&(this.lab_name3.text=e.d.name3)},t.prototype.doSomeChange=function(){},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_touch_begin,this)},t}(eui.ItemRenderer);__reflect(listnormalTimeSetItem.prototype,"listnormalTimeSetItem");var DataTransEvent=function(e){function t(t,n,i,o){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=!1);var s=e.call(this,t,i,o)||this;return s.data=n,s}return __extends(t,e),t.prototype.clone=function(){return new t(this.type,this.data,this.bubbles,this.cancelable)},t.Event_PerUrlUpdata="Event_PerUrlUpdata",t.Event_loginManager="Event_loginManager",t.Event_FuncManager="Event_FuncManager",t.Event_PerUrlRoleManager="Event_PerUrlRoleManager",t.Event_System_FuncurlManager="Event_System_FuncurlManager",t.Event_System_Funcurl_SelParentId="Event_System_Funcurl_SelParentId",t.Event_System_Funcurl_Del_Sucess="Event_System_Funcurl_Del_Sucess",t.Event_Member_MemManager="Event_Member_MemManager",t.Event_Member_TypeSel="Event_Member_TypeSel",t.Event_Member_AddNew_GetRoles="Event_Member_AddNew_GetRoles",t.Event_Member_AddNew_Add="Event_Member_AddNew_Add",t.Event_Member_Query_GetUser="Event_Member_Query_GetUser",t.Event_Member_SetVisiable_GetUser="Event_Member_SetVisiable_GetUser",t.Event_Member_SetVisiable_Set="Event_Member_SetVisiable_Set",t.Event_Member_Update_GetUser="Event_Member_Update_GetUser",t.Event_Member_Update_Update="Event_Member_Update_Update",t.Event_Member_Update_GetRoles="Event_Member_Update_GetRoles",t.Event_Member_Update_SetRoles="Event_Member_Update_SetRoles",t.Event_Member_Update_SetRolesToPanel="Event_Member_Update_SetRolesToPanel",t.Event_ServiceItem_AddNew_Add="Event_ServiceItem_AddNew_Add",t.Event_ServiceItem_Querry_GetItemList="Event_ServiceItem_Querry_GetItemList",t.Event_ServiceItem_Update_GetItemList="Event_ServiceItem_Update_GetItemList",t.Event_ServiceItem_Update_Update="Event_ServiceItem_Update_Update",t.Event_ServiceItem_Srot_GetItemList="Event_ServiceItem_Srot_GetItemList",t.Event_ServiceItem_Srot_Save="Event_ServiceItem_Srot_Save",t.Event_ServiceItem_SetVisiable_GetItemList="Event_ServiceItem_SetVisiable_GetItemList",t.Event_ServiceItem_SetVisiable_Set="Event_ServiceItem_SetVisiable_Set",t.Event_PlanWorker_PlanList_GetAllUser="Event_PlanWorker_PlanList_GetAllUser",t.Event_PlanWorker_PlanList_GetPlanUser="Event_PlanWorker_PlanList_GetPlanUser",t.Event_PlanWorker_PlanList_SavePlanList="Event_PlanWorker_PlanList_SavePlanList",t.Event_PlanWorker_PlanList_SetCheckFind="Event_PlanWorker_PlanList_SetCheckFind",t.Event_PlanWorker_PlanList_SetCheckImg="Event_PlanWorker_PlanList_SetCheckImg",t.Event_PlanWorker_PlanList_CurrentSel="Event_PlanWorker_PlanList_CurrentSel",t.Event_PlanWorker_PlanExcItem_GetAllUser="Event_PlanWorker_PlanExcItem_GetAllUser",t.Event_PlanWorker_PlanExcItem_GetItemList="Event_PlanWorker_PlanExcItem_GetItemList",t.Event_PlanWorker_PlanExcItem_GetAllExcItem="Event_PlanWorker_PlanExcItem_GetAllExcItem",t.Event_PlanWorker_PlanExcItem_SaveExcItem="Event_PlanWorker_PlanExcItem_SaveExcItem",t.Event_PlanWorker_PlanExcItem_ExcItemChange="Event_PlanWorker_PlanExcItem_ExcItemChange",t.Event_PlanWorker_Config_GetConfig="Event_PlanWorker_Config_GetConfig",t.Event_PlanWorker_Config_SaveConfig="Event_PlanWorker_Config_SaveConfig",t.Event_ServiceSalary_Config_GetUsers="Event_ServiceSalary_Config_GetUsers",t.Event_ServiceSalary_Config_GetSalaryByUid="Event_ServiceSalary_Config_GetSalaryByUid",t.Event_ServiceSalary_Config_SaveSalaryByUid="Event_ServiceSalary_Config_SaveSalaryByUid",t.Event_ServiceSalary_Querry_GetUsers="Event_ServiceSalary_Querry_GetUsers",t.Event_ServiceSalary_Querry_GetSalaryByUid="Event_ServiceSalary_Querry_GetSalaryByUid",t.Event_RoomSet_Add_AddNew="Event_RoomSet_Add_AddNew",t.Event_RoomSet_Querry_GetAllRoom="Event_RoomSet_Querry_GetAllRoom",t.Event_RoomSet_Querry_GetEnabledRoom="Event_RoomSet_Querry_GetEnabledRoom",t.Event_RoomSet_Del_GetAllRoom="Event_RoomSet_Del_GetAllRoom",t.Event_RoomSet_Del_Delete="Event_RoomSet_Del_Delete",t.Event_RoomSet_Update_GetAllRoom="Event_RoomSet_Update_GetAllRoom",t.Event_RoomSet_Update_Update="Event_RoomSet_Update_Update",t.Event_RoomSet_Update_Update_ToList="Event_RoomSet_Update_Update_ToList",t.Event_RoomSet_SetEnabled_GetAllRoom="Event_RoomSet_SetEnabled_GetAllRoom",t.Event_RoomSet_SetEnabled_SetEnabled="Event_RoomSet_SetEnabled_SetEnabled",t.Event_WaiterSet_Add_AddNew="Event_WaiterSet_Add_AddNew",t.Event_WaiterSet_Add_GetRule="Event_WaiterSet_Add_GetRule",t.Event_WaiterSet_Add_GetTypeWorks="Event_WaiterSet_Add_GetTypeWorks",t.Event_ShopInfo_MakeShop_ShopOrderFloatingBallShow="Event_ShopInfo_MakeShop_ShopOrderFloatingBallShow",t.Event_ShopInfo_MakeShop_ShopOrderFloatingBallHide="Event_ShopInfo_MakeShop_ShopOrderFloatingBallHide",t.Event_ShopInfo_MakeShop_BotHit="Event_ShopInfo_MakeShop_BotHit",t.Event_ShopInfo_ShowState_SelGuke="Event_ShopInfo_ShowState_SelGuke",t.Event_ShopInfo_MakeShop_AddNew="Event_ShopInfo_MakeShop_AddNew",t.Event_ShopInfo_ShowState_O_SelGuke="Event_ShopInfo_ShowState_O_SelGuke",t.Event_ShopInfo_MakeShop__O_AddNew="Event_ShopInfo_MakeShop__O_AddNew",t.Event_ShopPay_Close_Sel_MoneyChanel_panel="Event_ShopPay_Close_Sel_MoneyChanel_panel",t}(egret.Event);__reflect(DataTransEvent.prototype,"DataTransEvent");var EventCenter=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.dispatchEvent=function(e){GameGlobal.MessageCenter.dispatch(e.type,e)},e.prototype.addEventListener=function(e,t,n){GameGlobal.MessageCenter.addListener(e,t,n)},e.prototype.removeEventListener=function(e,t,n){GameGlobal.MessageCenter.removeListener(e,t,n)},e}();__reflect(EventCenter.prototype,"EventCenter");var WindowEvent=function(e){function t(t,n,i,o){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=!1);var s=e.call(this,t,i,o)||this;return s._data=null,s._type="",s._type=t,s._data=n,s}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this._type,this._data)},t.Path="pure.view.event.",t.SHOW_OR_HIDE_NEV_MENS=t.Path+"SHOW_OR_HIDE_NEV_MENS",t}(egret.Event);__reflect(WindowEvent.prototype,"WindowEvent");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var BaseScene=function(){function e(){}return e.prototype.onEnter=function(){},e.prototype.onExit=function(){ViewManager.ins().closeAll()},e}();__reflect(BaseScene.prototype,"BaseScene");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,i){function o(e){t.call(i,e)}function s(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),n.call(i))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(i,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(i,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var r=e.split("/");r.pop();var h=r.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(i,generateJSON.paths[e])},this):RES.getResByUrl(h,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(i,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(i,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?i(o):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var sproto;!function(e){var t=function(){function e(){}return e.AddHandler=function(t,n,i){n&&(e.m_RpcReqHandlerDict[t]={HandlerFunc:n,thisObject:i})},e.Handler=function(t,n){var i=e.m_RpcReqHandlerDict[t];return null==i?!1:(i.HandlerFunc.call(i.thisObject,n),!0)},e.m_RpcReqHandlerDict={},e}();e.sprotoMsgReceiver=t,__reflect(t.prototype,"sproto.sprotoMsgReceiver")}(sproto||(sproto={}));var sproto;!function(e){var t=function(){function t(){}return t.Init=function(){},t.sendPostRequest=function(e,n){var i=new egret.HttpRequest;i.withCredentials=!0,i.responseType=egret.HttpResponseType.TEXT,i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var o=GameGlobal.token;null!=o&&i.setRequestHeader("token",o),i.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),i.addEventListener(egret.ProgressEvent.PROGRESS,t.onPostProgress,this),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var s=this._HttHostDress+n;i.open(s,egret.HttpMethod.POST),i.send(e),ViewManager.ins().open(MvLoadingPanel)},t.sendPostRequestJson=function(e,n){var i=new egret.HttpRequest;i.withCredentials=!0,i.responseType=egret.HttpResponseType.TEXT,i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var o=GameGlobal.token;null!=o&&i.setRequestHeader("token",o),i.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),i.addEventListener(egret.ProgressEvent.PROGRESS,t.onPostProgress,this),i.setRequestHeader("Content-Type","application/json;charset=UTF-8");var s=this._HttHostDress+n;i.open(s,egret.HttpMethod.POST),i.send(e),ViewManager.ins().open(MvLoadingPanel)},t.onPostComplete=function(t){ViewManager.ins().close(MvLoadingPanel);var n=t.currentTarget,i=JSON.parse(n.response);return i.msg?void e.sprotoMsgReceiver.Handler(i.msg,i):void console.log("Response  error msg is null ")},t.onPostIOError=function(e){console.log("sproto   post error : "+e.type)},t.onPostProgress=function(e){console.log("sproto    post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},t.loadURLImgOnThisDress=function(t,n,i){var o=e.sprotoRequest._HttHostDress+"/img/load/"+t,s=new egret.URLLoader;s.dataFormat=egret.URLLoaderDataFormat.TEXTURE,s.addEventListener(egret.Event.COMPLETE,n,i);var a=new egret.URLRequest(o);s.load(a)},t._HttHostDress="https://www.aijinkang.com:8086",t}();e.sprotoRequest=t,__reflect(t.prototype,"sproto.sprotoRequest")}(sproto||(sproto={}));var sproto;!function(e){var t=function(){function e(){}return e.MSG_OK=200,e.MSG_ERROR=500,e}();e.sprotoRespType=t,__reflect(t.prototype,"sproto.sprotoRespType")}(sproto||(sproto={}));var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=n.sent(),[4,platform.login()];case 3:return n.sent(),t=new GameApp,[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return n.sent(),this.stage.removeChild(e),[3,5];case 4:return t=n.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.sendPostRequest=function(){var e=new egret.TextField;this.addChild(e),e.width=400,e.size=18,e.x=150,e.y=100,e.text="Sending POST request to localhost:8082/dologin";var t="name=postP1&pwd=postP2",n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open("http://localhost:8082/dologin?username=admin&password=123",egret.HttpMethod.POST),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t),n.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)},t.prototype.onPostComplete=function(e){var t=e.currentTarget;console.log("post data : ",t.response);var n=new egret.TextField;n.size=18,n.text="POST response:\n"+t.response.substring(0,50)+"...",this.addChild(n),n.x=300,n.y=70},t.prototype.onPostIOError=function(e){console.log("post error : "+e.type)},t.prototype.onPostProgress=function(e){console.log("post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var i=new eui.Theme("resource/default.thm.json",e.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t.prototype.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var CircleLoading=function(){function e(){this.m_IsShow=!1,this.speed=.6,this.init()}return e.prototype.init=function(){var e=new eui.Group;this.content=e,e.percentWidth=100,e.percentHeight=100,e.touchEnabled=!0;var t=new eui.Image;t.percentWidth=100,t.percentHeight=100,e.addChild(t),this.uiImageContainer=new eui.Group,this.uiImageContainer.horizontalCenter=0,this.uiImageContainer.verticalCenter=0,e.addChild(this.uiImageContainer);var n=new eui.Image;n.source="load_Reel",n.x=.5*-n.width,n.y=.5*-n.height,this.uiImageContainer.addChild(n)},e.prototype.enterFrame=function(e){this.uiImageContainer.rotation+=this.speed*e},e.prototype._Show=function(){this.m_IsShow=!0,GameGlobal.StageUtils.GetUIStage().addChild(this.content),TimerManager.ins().doFrame(1,0,this.enterFrame,this)},e.prototype._Hide=function(){this.m_IsShow=!1,this.content&&this.content.parent&&(GameGlobal.StageUtils.GetUIStage().removeChild(this.content),this.uiImageContainer.rotation=0),TimerManager.ins().remove(this.enterFrame,this)},e}();__reflect(CircleLoading.prototype,"CircleLoading");var ViewLayerLevel;!function(e){e[e.BOTTOM=1]="BOTTOM",e[e.MIDDLE=2]="MIDDLE",e[e.TOP=3]="TOP"}(ViewLayerLevel||(ViewLayerLevel={}));var GameApp=function(){function e(){this.init()}return e.prototype.init=function(){sproto.sprotoRequest.Init(),GameGlobal.initModule(),ResMgr.Init(),ResMgr.GmInit(),LayerManager.Init();var e=egret.getTimer();GameGlobal.InitConfig(),console.log("模块初始化完成 耗时:"+(egret.getTimer()-e));new loginview;LayerManager.Game_Main.addChild(new backGroundView);var t=egret.getOption("relogin");"no"==t&&loginManager.ins().loadStorageLoginInfo()?(GameGlobal.token=loginManager.ins()._storagetoken,ViewManager.ins().open(MainTableViewPanel)):ViewManager.ins().open(loginview)},e.prototype.wxinit=function(){_WX_SetConfig()},e}();__reflect(GameApp.prototype,"GameApp");var GameGlobal=function(){function e(){}return e.initModule=function(){this.ViewManager=ViewManager.ins(),this.ViewManagerImpl=new ViewManagerImpl(this.ViewManager),this.ViewManager.mViewImpl=this.ViewManagerImpl,this.StageUtils=new StageUtils,this.MessageCenter=MessageCenter.ins(),this.ServerErrorTip=new ServerErrorTip,this.InstanceAllManager()},e.InstanceAllManager=function(){loginManager.ins(),ShopPageManage.ins()},e.OnDayTimer=function(){for(var e=0,t=this.AllModule;e<t.length;e++){var n=t[e];n.OnDayTimer()}},e.InitConfig=function(){for(var e=0,t=this.AllModule;e<t.length;e++){var n=t[e];n.InitConfig&&n.InitConfig()}},e.seekArr=[],e.perUrlArr=[],e.version=0,e.webTime=0,e.CurrentCompany="",e.AllModule=[],e}();__reflect(GameGlobal.prototype,"GameGlobal");var backGroundView=function(e){function t(){var t=e.call(this)||this;return t.skinName="background",t}return __extends(t,e),t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(backGroundView.prototype,"backGroundView");var EnableViewCtrlManage=function(){function e(){}return e.SetViewEnableTrue=function(t){t.filters=[e.cflilterE],t.enabled=!0},e.SetViewEnableFalse=function(t){t.filters=[e.cflilterD],t.enabled=!1},e.colorMatrix=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],e.cflilterD=new egret.ColorMatrixFilter(e.colorMatrix),e.colorMatrix1=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],e.cflilterE=new egret.ColorMatrixFilter(e.colorMatrix1),e}();__reflect(EnableViewCtrlManage.prototype,"EnableViewCtrlManage");var ServerErrorTip=function(){function e(){sproto.sprotoMsgReceiver.AddHandler("/NoAuthority",this.onNoAuthority,this),sproto.sprotoMsgReceiver.AddHandler("/logout",this.onLogoutSucess,this),sproto.sprotoMsgReceiver.AddHandler("/NoAuthority_ANONYMOUS",this.NoAuthority_ANONYMOUS,this),sproto.sprotoMsgReceiver.AddHandler("/Error_Get",this.onErrorGet,this)}return e.prototype.onErrorGet=function(e){var t=e.obj;WarnWin.show(t,null,this)},e.prototype.onNoAuthority=function(e){var t=e.obj;WarnWin.show(t,null,this)},e.prototype.onLogoutSucess=function(e){e.obj;loginManager.ins()._loginState=0,ViewManager.ins().closeAll(),ViewManager.ins().open(loginview)},e.prototype.NoAuthority_ANONYMOUS=function(e){function t(){loginManager.ins()._loginState=0,ViewManager.ins().closeAll(),ViewManager.ins().open(loginview)}var n=e.obj;WarnWin.show(n,t,this,t)},e}();__reflect(ServerErrorTip.prototype,"ServerErrorTip");var loginManager=function(e){function t(){var t=e.call(this)||this;return t.storcompanykey="storcompanykey",t.storusernamekey="storusernamekey",t.storpasswordkey="storpasswordkey",t.stortokenkey="stortokenkey",t._loginState=0,t._talkcompany="",t._talkusername="",t._talkpassword="",t.talk_message_infomessage="talk_message_infomessage",t.talk_message_login_now="talk_message_login_now",sproto.sprotoMsgReceiver.AddHandler("/dologin",t.onResponsDologin,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.onResponsDologin=function(e){EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_loginManager,e))},t.prototype.loadStorageLoginInfo=function(){return this._storagetoken=egret.localStorage.getItem(this.stortokenkey),this._storagetoken?!0:!1},t.prototype.saveStorageLoginInfo=function(e){egret.localStorage.setItem(this.storpasswordkey,e)},t.prototype.clearStorageLoginInfo=function(){egret.localStorage.removeItem(this.storcompanykey),egret.localStorage.removeItem(this.storusernamekey),egret.localStorage.removeItem(this.storpasswordkey),egret.localStorage.removeItem(this._storagetoken)},t.prototype.logout=function(){var e="",t="/logout";sproto.sprotoRequest.sendPostRequest(e,t),this.clearStorageLoginInfo()},t}(BaseSystem);__reflect(loginManager.prototype,"loginManager");var loginview=function(e){function t(){var t=e.call(this)||this;return t.skinName="login",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this._loginBtn,this._OnClick),this.group_login.visible=!1,this._input_company.restrict="A-Za-z0-9_-",this._input_username.restrict="A-Za-z0-9_-",this.revmsg.text="url:  company:"+egret.getOption("company")+" type:"+egret.getOption("type")+" wndtype:"+egret.getOption("wndtype")+" sessioncode:"+egret.getOption("sessioncode")+" relogin:"+egret.getOption("relogin")+" 顾客终端！！！ "},t.prototype._OnClick=function(e){switch(e.target){case this._loginBtn:this.onLogin()}},t.prototype.onLogin=function(){var e="company="+egret.getOption("company")+"&username="+this._input_username.text+"&password="+md5.hex_md5(this._input_password.text)+"&type="+egret.getOption("type")+"&wndtype=wxweb&relogin="+egret.getOption("relogin")+"&sessioncode="+egret.getOption("sessioncode"),t="/dologin";sproto.sprotoRequest.sendPostRequest(e,t),this.revmsg.text="开始登录...",GameGlobal.token=null,loginManager.ins()._loginState=1},t.prototype.onTalkLogin=function(){this._input_company.text=loginManager.ins()._talkcompany,this._input_username.text=loginManager.ins()._talkusername,this._input_password.text=loginManager.ins()._talkpassword},t.prototype.onTalkInfoShow=function(e){var t=e.data;0==t.t&&(this._input_company.text=t.m),1==t.t&&(this._input_username.text=t.m),2==t.t&&(this._input_password.text=t.m)},t.prototype.OnOpen=function(){EventCenter.Instance.addEventListener(DataTransEvent.Event_loginManager,this.onResponseDologin,this),EventCenter.Instance.addEventListener(loginManager.ins().talk_message_login_now,this.onTalkLogin,this),EventCenter.Instance.addEventListener(loginManager.ins().talk_message_infomessage,this.onTalkInfoShow,this),this.onLogin()},t.prototype.OnClose=function(){EventCenter.Instance.removeEventListener(DataTransEvent.Event_loginManager,this.onResponseDologin,this),EventCenter.Instance.removeEventListener(loginManager.ins().talk_message_login_now,this.onTalkLogin,this),EventCenter.Instance.removeEventListener(loginManager.ins().talk_message_infomessage,this.onTalkInfoShow,this)},t.prototype.onResponseDologin=function(e){var t=e.data,n=t.obj.token,i=t.obj.scl;if(this.revmsg.text="登录返回！",t.status==sproto.sprotoRespType.MSG_ERROR)return this.group_login.visible=!0,loginManager.ins()._loginState=0,console.log("error resp :"+t.msg),void("userLocked"==i?(console.log("账户被锁定! :"),this.revmsg.text="账户被锁定! :"):"passOutTime"==i?(console.log("密码过期! :"),this.revmsg.text="密码过期! "):"userOutTime"==i?(console.log("账户过期! :"),this.revmsg.text="账户过期! "):"userForbid"==i?(console.log("账户被禁用! :"),this.revmsg.text="账户被禁用:"):"companyerror"==i?(console.log("公司名称不存在!"),this.revmsg.text="公司名称不存在!"):"userOrPassWrong"==i?(console.log("密码不正确!"),this.revmsg.text="密码不正确!"):"openidisnull"==i?(console.log("微信openid 获取错误!!"),this.revmsg.text="微信用户信息获取错误 请用退出重新扫码!"):"addusererro"==i?(console.log("添加用户错误!!"),this.revmsg.text="添加用户错误!!"):"UsernameNotFound"==i?(console.log("用户名不正确!"),this.revmsg.text="用户名不正确!"):"UnknowError"==i&&(console.log("未知的登陆错误!"),this.revmsg.text="未知的登陆错误!"));
loginManager.ins()._loginState=2,GameGlobal.token=n,loginManager.ins().saveStorageLoginInfo(n),GameGlobal.myUser=i.user;i.user.roles[0].name;GameGlobal.CurrentCompany=egret.getOption("company"),GameGlobal.CurrentCompany="aikang",ViewManager.ins().open(ShopAskNumPanel),this.CloseSelf()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(loginview.prototype,"loginview");var loginviewX=function(e){function t(){var t=e.call(this)||this;return t.skinName="login",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this._loginBtn,this._OnClick),this._AddClick(this._gouqiu,this._OnClick),this.__request=new XMLHttpRequest,this.__request.withCredentials=!0,this.__request.onload=this.onPostComplete,this.statusPostLabel=new egret.TextField,this.addChild(this.statusPostLabel),this.statusPostLabel.width=400,this.statusPostLabel.size=18,this.statusPostLabel.x=150,this.statusPostLabel.y=100},t.prototype._OnClick=function(e){switch(e.target){case this._loginBtn:this.onLogin();break;case this._gouqiu:this.onGouqiu()}},t.prototype.onLogin=function(){var e="username="+this._input_username.text+"&password="+this._input_password.text,t="http://localhost:8082/dologin";this.sendPostRequest(e,t)},t.prototype.onGouqiu=function(){var e="username="+this._input_username.text+"&password="+this._input_password.text,t="http://localhost:8082/employee";this.sendPostRequest(e,t)},t.prototype.CloseSelf=function(){this.parent.removeChild(this)},t.prototype.sendPostRequest=function(e,t){var n=_getCookie_();console.log("cookie is : ",n);var i=this.__request;i.open("POST",t,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),console.log("heads is : ",i.getAllResponseHeaders()),i.send(e)},t.prototype.onPostComplete=function(e){var t=e.currentTarget;console.log("post data : ",t.response);var n=_getCookie_();console.log("cookie is : ",n);var i=JSON.parse(t.response);200==i.status?console.log(i.msg):201==i.status&&console.log(i.msg)},t.prototype.onPostIOError=function(e){console.log("post error : "+e.type)},t.prototype.onPostProgress=function(e){console.log("post progress :  ")},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(loginviewX.prototype,"loginviewX");var MainTableViewPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainTableViewSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=new eui.RadioButtonGroup;e.addEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler,this),this._radio_business.group=e,this._radio_worker.group=e,this._radio_room.group=e,this._radio_config.group=e,this.viewStack.selectedIndex=0,this._ShopPagePanel=new ShopPagePanel,this._ShopPagePanel.DoOpen(),this._group_business.addChild(this._ShopPagePanel),this._ShopMyHuiYuanPanel=new ShopMyHuiYuanPanel,this._ShopMyHuiYuanPanel.DoOpen(),this._group_worker.addChild(this._ShopMyHuiYuanPanel),this._ShopServingBillListPanel=new ShopServingBillListPanel,this._ShopServingBillListPanel.DoOpen(),this._group_room.addChild(this._ShopServingBillListPanel),this._MyInfoMainPanel=new MyInfoMainPanel,this._MyInfoMainPanel.DoOpen(),this._group_config.addChild(this._MyInfoMainPanel)},t.prototype.radioChangeHandler=function(e){var t=e.target;this.viewStack.selectedIndex=t.selectedValue;var n=this.viewStack.selectedIndex;this.setSelViewActive(n)},t.prototype.setSelViewActive=function(e){0==e?EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_ShopOrderFloatingBallShow,null)):1==e?(this._ShopMyHuiYuanPanel.QueryHuiYuanInfo(),EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_ShopOrderFloatingBallHide,null))):2==e?(EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_ShopOrderFloatingBallHide,null)),this._ShopServingBillListPanel.gethistoryinfo()):3==e&&EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_ShopOrderFloatingBallHide,null))},t.prototype.OnOpen=function(){},t.prototype.OnClose=function(){this._ShopPagePanel.DoClose(),this._group_business.removeChild(this._ShopPagePanel),this._ShopPagePanel=null,this._ShopMyHuiYuanPanel.DoClose(),this._group_worker.removeChild(this._ShopMyHuiYuanPanel),this._ShopMyHuiYuanPanel=null,this._ShopServingBillListPanel.DoClose(),this._group_room.removeChild(this._ShopServingBillListPanel),this._ShopServingBillListPanel=null},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t}(BaseEuiView);__reflect(MainTableViewPanel.prototype,"MainTableViewPanel");var MyInfoMainPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="MyInfoMainSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype._OnClick=function(e){e.target},t.prototype.OnClose=function(){},t.prototype.onEventData=function(e){},t.prototype.onListUpdate=function(){},t.prototype.on_btn_sure=function(){},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(MyInfoMainPanel.prototype,"MyInfoMainPanel");var ShopAskNumPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopAskNumSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=new eui.RadioButtonGroup;e.addEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler,this);var t=new eui.RadioButtonGroup;t.addEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler_time,this),this._radio_num_0.group=e,this._radio_num_1.group=e,this._radio_num_2.group=e,this._radio_num_3.group=e,this._radio_num_4.group=e,this._radio_num_5.group=e,this._radio_num_6.group=e,this._radio_num_7.group=e,this._radio_num_8.group=e,this._radio_time_now.group=t,this._radio_time_yuyue.group=t;var n=new eui.RadioButtonGroup;this._radio_last_old.group=n,this._radio_last_new.group=n,this.group_asknum.visible=!1,this.group_last.visible=!1,this.group_more.visible=!1,this.group_time.visible=!1,this.lab_gukenum.restrict="0-9",this._AddClick(this._btn_more,this._OnClick),this._AddClick(this._btn_sure,this._OnClick),this._AddClick(this._btn_cancel,this._OnClick),this._AddClick(this._radio_last_old,this._OnClick),this._AddClick(this._radio_last_new,this._OnClick)},t.prototype.OnOpen=function(){EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_GetShopInfo,this.onServerEventData,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_GetMakeShopInfo,this.onServerEventData,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_newShopMake,this.onServerEventData,this),this.sendGetMakeShopInfo()},t.prototype.OnClose=function(){EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_GetShopInfo,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_GetMakeShopInfo,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_newShopMake,this.onServerEventData,this)},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_GetMakeShopInfo:ShopPageManage.ins().data_ShopMakeList=t.obj;var n=ShopPageManage.ins().data_ShopMakeList,i=0,o=0;if(null!=n&&(i=n.length),0>=i)this.group_asknum.visible=!0;else{var s=n[0];o=s.workstate,0==o?this.group_last.visible=!0:1==o?this.sendShopInfo():2==o&&this.sendShopInfo()}break;case FuncUrlUtil.ShopInfo_GetShopInfo:var a=t.obj;ShopPageManage.ins().data_CompanyInfo=a.cm,ShopPageManage.ins().data_ShopInfoItem=a.sl,this.CloseSelf(),ViewManager.ins().open(MainTableViewPanel);break;case FuncUrlUtil.ShopInfo_newShopMake:ShopPageManage.ins().data_ShopMakeList=t.obj,this.sendShopInfo()}},t.prototype._OnClick=function(e){switch(e.target){case this._btn_more:this.group_more.visible=!0;break;case this._btn_cancel:this.group_more.visible=!1;break;case this._btn_sure:this.group_more.visible=!1;var t=this.lab_gukenum.text;ShopPageManage.ins().ShopGuke_Num=Number(t),this.sendNewShop();break;case this._radio_last_old:var n=ShopPageManage.ins().data_ShopMakeList,i=n[0];ShopPageManage.ins().ShopGuke_Num=i.gukenum,this.sendShopInfo();break;case this._radio_last_new:var o=egret.Tween.get(this.group_last);o.to({alpha:0},100).call(function(){this.group_last.visible=!1,this.group_asknum.visible=!0,this.group_asknum.alpha=0;var e=egret.Tween.get(this.group_asknum);e.to({alpha:1},100)},this)}},t.prototype.sendGetMakeShopInfo=function(){var e={name:GameGlobal.CurrentCompany},t=FuncUrlUtil.ShopInfo_GetMakeShopInfo;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(e),t)},t.prototype.sendShopInfo=function(){var e={name:GameGlobal.CurrentCompany},t=FuncUrlUtil.ShopInfo_GetShopInfo;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(e),t)},t.prototype.sendNewShop=function(){var e={name:GameGlobal.CurrentCompany,num:ShopPageManage.ins().ShopGuke_Num},t=FuncUrlUtil.ShopInfo_newShopMake;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(e),t)},t.prototype.radioChangeHandler=function(e){var t=e.target,n=t.selectedValue;ShopPageManage.ins().ShopGuke_Num=Number(n)+1,this.sendNewShop()},t.prototype.radioChangeHandler_time=function(e){var t=e.target,n=t.selectedValue;ShopPageManage.ins().ShopGuke_TimeType=n},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t}(BaseEuiView);__reflect(ShopAskNumPanel.prototype,"ShopAskNumPanel");var ShopHuiYuanNedPhoneNumberPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopHuiYuanNedPhoneNumber",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.lab_phone.restrict="0-9",this.lab_code.restrict="0-9",this._AddClick(this._btn_sure,this._OnClick),this._AddClick(this._btn_getcode,this._OnClick)},t.prototype.OnOpen=function(){EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_BindTeleVerifySendCode,this.onServerEventData,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_BindTeleVerifyBindByCode,this.onServerEventData,this),this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.start()},t.prototype.OnClose=function(){EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_BindTeleVerifySendCode,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_BindTeleVerifyBindByCode,this.onServerEventData,this),this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer=null},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_BindTeleVerifySendCode:var n=t.obj;if("later"==n.msg){var i=n.tm;WarnWin.show("请 "+i+" 秒后再获取验证码！",null,null),this._tm=i}"ok"==n.msg&&(WarnWin.show(" 验证码已发送，请查看手机短信！",null,null),this._tm=n.tm);break;case FuncUrlUtil.ShopInfo_BindTeleVerifyBindByCode:var n=t.obj;this.setBindResault(n)}},t.prototype.setBindResault=function(e){if("overtime"==e.msg)return void WarnWin.show("验证码已过期！",null,null);if("ok"==e.msg){WarnWin.show("绑定成功！",null,null);var t={name:GameGlobal.CurrentCompany},n=FuncUrlUtil.ShopInfo_GetMyHuiYuanInfo;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(t),n),this.CloseSelf()}},t.prototype.timerFunc=function(){this._tm>0?(this._btn_getcode.label="("+this._tm+")秒后获取",this._btn_getcode.enabled=!1):(this._btn_getcode.label="获取",this._btn_getcode.enabled=!0),this._tm>0&&this._tm--},t.prototype._OnClick=function(e){switch(e.target){case this._btn_getcode:this.sendGetTelenumberCode();break;case this._btn_sure:this.sendTelenumberCodeToBind()}},t.prototype.sendGetTelenumberCode=function(){var e=this.lab_phone.text;if(11!=e.length)return void WarnWin.show("请输入正确的手机号码",null,null);var t={telenumber:e},n=FuncUrlUtil.ShopInfo_BindTeleVerifySendCode;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(t),n)},t.prototype.sendTelenumberCodeToBind=function(){var e=this.lab_phone.text,t=this.lab_code.text;if(11!=e.length)return void WarnWin.show("请输入正确的手机号码",null,null);if(t.length<=1)return void WarnWin.show("请输入正确的验证码",null,null);var n={telenumber:e,code:t},i=FuncUrlUtil.ShopInfo_BindTeleVerifyBindByCode;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(n),i)},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t}(BaseEuiView);__reflect(ShopHuiYuanNedPhoneNumberPanel.prototype,"ShopHuiYuanNedPhoneNumberPanel");var ShopMakeInfoListPaeul=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopMakeInfoListSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.visible=!1},t.prototype.OnOpen=function(){EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_DelShopItem,this.onServerEventData,this),EventCenter.Instance.addEventListener(DataTransEvent.Event_ShopInfo_ShowState_SelGuke,this.onShowSelGuke,this),EventCenter.Instance.addEventListener(DataTransEvent.Event_ShopInfo_MakeShop_AddNew,this.onAddNewShop,this),this.scrollMy.addEventListener(egret.Event.CHANGE,this.onScrollerChange,this)},t.prototype.OnClose=function(){this.scrollMy.removeEventListener(egret.Event.CHANGE,this.onScrollerChange,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_DelShopItem,this.onServerEventData,this),EventCenter.Instance.removeEventListener(DataTransEvent.Event_ShopInfo_ShowState_SelGuke,this.onShowSelGuke,this),EventCenter.Instance.removeEventListener(DataTransEvent.Event_ShopInfo_MakeShop_AddNew,this.onAddNewShop,this)},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_DelShopItem:ShopPageManage.ins().data_ShopMakeList=t.obj,this.setShopInfoList(),EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_BotHit,null));var n=t.obj;n.length<=0&&this._on_hide()}},t.prototype.setShopInfoList=function(){var e=0,t=ShopPageManage.ins().data_ShopMakeList;if(!t)return WarnWin.show("数据异常 data_systemrole 为空",null,this),void this.CloseSelf();for(var n=t,i=0;i<n.length;i++){var o=n[i];o.gukenum>e&&(e=o.gukenum)}for(var s=[],i=0;e>i;i++){for(var a=[],r=0;r<n.length;r++){var o=n[r];o.gukeidx==i&&a.push({idx:r,d:o})}var h="第 "+i+" 位同伴";0==i&&(h="我自己"),s.push({idx:i,title:h,d:a})}var _=this.scrollMy.viewport.scrollV,l=new eui.ArrayCollection(s);this.listGuke.dataProvider=l,this.listGuke.itemRenderer=listShopMakeInfoItem,this.listGuke.validateNow(),this.scrollMy.viewport.scrollV=_},t.prototype._on_Show=function(){this.visible=!0,this.scrollMy.height>850&&(this.scrollMy.height=850);var e=this.scrollMy.height+50+180;this.group_shoplist.height=0;var t=egret.Tween.get(this.group_shoplist);t.to({height:e},30),this.rect_bake_all.alpha=1,this.onScrollerChange()},t.prototype._on_hide=function(){var e=egret.Tween.get(this.group_shoplist);e.to({height:0},50).call(function(){this.visible=!1},this);var t=egret.Tween.get(this.rect_bake_all);t.to({alpha:0},50)},t.prototype._OnClick=function(e){e.target},t.prototype.onScrollerChange=function(){for(var e=0;e<this.listGuke.$indexToRenderer.length;e++)this.listGuke.$indexToRenderer[e]&&this.listGuke.$indexToRenderer[e].doSomeChange()},t.prototype.onShowSelGuke=function(){this.onScrollerChange()},t.prototype.onAddNewShop=function(){this._on_hide()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ShopMakeInfoListPaeul.prototype,"ShopMakeInfoListPaeul");var listShopMakeInfoItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_thisTap,this),this._btn_addnew.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_AddNewTap,this)},t.prototype._on_thisTap=function(e){ShopPageManage.ins()._selGukeIdx!=this.data.idx&&(ShopPageManage.ins()._selGukeIdx=this.data.idx,EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_ShowState_SelGuke,null)))},t.prototype._on_AddNewTap=function(e){EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_AddNew,null))},t.prototype.dataChanged=function(){this.setData()},t.prototype.setData=function(){var e=this.data;this._radio_sevidx.label=""+e.title;for(var t=[],n=e.d,i=0;i<n.length;i++){var o=n[i];o.d.sid>0&&t.push({idx:i,d:o.d,allnum:n.length})}var s=new eui.ArrayCollection(t);this.listShopGukeIdx.dataProvider=s,this.listShopGukeIdx.itemRenderer=listGukeIdxItem,this.setRectSize()},t.prototype.setRectSize=function(){var e=this.data.d;this.rect_back3.visible=!1,e.length<=0?(this.height=160,this.rect_back3.visible=!0,this.rect_back3.height=10):this.height=66+150*e.length+this.group_addNew.height+20,this.group_addNew.y=this.listShopGukeIdx.y+this.listShopGukeIdx.height+20,ShopPageManage.ins()._selGukeIdx==this.data.idx?(this._radio_sevidx.selected=!0,this.rect_back1.strokeColor=15250960,this.rect_back1.strokeWeight=5,this.rect_back2.strokeColor=15250960,this.rect_back2.strokeWeight=5):(this._radio_sevidx.selected=!1,this.rect_back1.strokeColor=15250960,this.rect_back1.strokeWeight=0,this.rect_back2.strokeColor=16777215,this.rect_back2.strokeWeight=0),this.rect_back2.height=this.rect_back1.height-60},t.prototype.doSomeChange=function(){this.setRectSize();for(var e=0;e<this.listShopGukeIdx.$indexToRenderer.length;e++)this.listShopGukeIdx.$indexToRenderer[e]&&this.listShopGukeIdx.$indexToRenderer[e].doSomeChange()},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_thisTap,this),this._btn_addnew.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_AddNewTap,this)},t}(eui.ItemRenderer);__reflect(listShopMakeInfoItem.prototype,"listShopMakeInfoItem");var listGukeIdxItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this._btn_del.addEventListener(egret.TouchEvent.TOUCH_TAP,this._delItem,this)},t.prototype._delItem=function(e){var t=GameGlobal.CurrentCompany,n={cname:t,shopid:this.data.d.id},i=FuncUrlUtil.ShopInfo_DelShopItem;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(n),i)},t.prototype.dataChanged=function(){this.setData()},t.prototype.setData=function(){var e=this.data;this.lab_itemname.text=e.d.sname;var t=ShopPageManage.ins().getServiceItemBySid(e.d.sid),n="";0==e.d.wtype?n="店家安排":1==e.d.wtype?n="要男技师":2==e.d.wtype?n="要女技师":3==e.d.wtype&&(n="点钟 "+e.d.hcode+" 号技师");var i="";0==e.d.wlev?i="等级无要求":1==e.d.wlev?i="初级技师":2==e.d.wlev?i="中级技师":3==e.d.wlev?i="高级技师":4==e.d.wlev?i="特级技师":5==e.d.wlev&&(i="专家坐诊"),3==e.d.wtype&&(i=""),this.lab_itemtime.text=t.timelong+"分钟 "+n+" "+i,this.lab_itemprice.text=""+t.price*e.d.clocknumyy;var o=new Date(e.d.waittime);this.lab_waitetime.text=this.formatTime_lab(o),this.lab_num.text=e.d.clocknumyy+"个",this._btn_del.visible=!1,e.idx>=e.allnum-1&&(this._btn_del.visible=!0);var s=this.data.d.headpic,a=s.split(".");a[0]+"_min."+a[1];sproto.sprotoRequest.loadURLImgOnThisDress(s,function(e){var t=e.target,n=t.data,i=new egret.Bitmap(n);i.width=this.group_img.width,i.height=this.group_img.height,this.group_img.addChild(i)},this)},t.prototype.doSomeChange=function(){},t.prototype.onRemove=function(){this._btn_del.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._delItem,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype.formatTime_lab=function(e){var t,n,i=(e.getFullYear(),e.getMonth()+1),o=e.getDate();t=10>i?"0"+i:i,n=10>o?"0"+o:o;var s,a,r,h=e.getHours(),_=e.getMinutes(),l=e.getSeconds();s=10>h?"0"+h:h,a=10>_?"0"+_:_,r=10>l?"0"+l:l;var u=i+"月"+o+"日"+h+"点"+_+"分";return u},t}(eui.ItemRenderer);__reflect(listGukeIdxItem.prototype,"listGukeIdxItem");var ShopMyHuiYuanPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopHuiYuanPanel",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._AddClick(this._btn_addnew,this._OnClick),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_GetMyHuiYuanInfo,this.onServerEventData,this),this.listItem_h.addEventListener(egret.Event.CHANGE,this._onWItemChange,this),this.listItem_h.addEventListener(egret.TouchEvent.TOUCH_END,this._List_w_touchend,this)},t.prototype._OnClick=function(e){switch(e.target){case this._btn_addnew:WarnWin.show("本店暂不支持自助办理会员！",null,null)}},t.prototype.QueryHuiYuanInfo=function(){var e={name:GameGlobal.CurrentCompany},t=FuncUrlUtil.ShopInfo_GetMyHuiYuanInfo;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(e),t)},t.prototype.OnClose=function(){EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_GetMyHuiYuanInfo,this.onServerEventData,this),this.listItem_h.addEventListener(egret.Event.CHANGE,this._onWItemChange,this),this.listItem_h.removeEventListener(egret.TouchEvent.TOUCH_END,this._List_w_touchend,this)},t.prototype.onEventData=function(e){},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_GetMyHuiYuanInfo:this.setHuiyuanInfo(t)}},t.prototype.setHuiyuanInfo=function(e){var t=e.obj;return"needbind"==t.msg?void ViewManager.ins().open(ShopHuiYuanNedPhoneNumberPanel):(ShopPageManage.ins().data_MyHuiYuanInfo=t.hl,void this.onListUpdate())},t.prototype.onListUpdate=function(){for(var e=ShopPageManage.ins().data_MyHuiYuanInfo,t=[],n=e,i=0;i<n.length;i++){var o=n[i];this.lab_companyname.text=decodeURI(o.companycname),t.push({idx:o.id,d:o})}var s=new eui.ArrayCollection(t);this.listItem_h.dataProvider=s,this.listItem_h.itemRenderer=listHuiYuanListItem,this.listItem_h.validateNow()},t.prototype.on_btn_sure=function(){},t.prototype._onWItemChange=function(e){for(var t=0;t<this.listItem_h.$indexToRenderer.length;t++)this.listItem_h.$indexToRenderer[t]&&this.listItem_h.$indexToRenderer[t].doSomeChange()},t.prototype._List_w_touchend=function(e){for(var t=0;t<this.listItem_h.$indexToRenderer.length;t++)this.listItem_h.$indexToRenderer[t]&&this.listItem_h.$indexToRenderer[t].doSomeChange()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ShopMyHuiYuanPanel.prototype,"ShopMyHuiYuanPanel");var listHuiYuanListItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype.dataChanged=function(){var e=this.data;this.lab_cardid.text=e.d.cardid,parseInt(e.d.rmoney)?this.lab_remoney.text=Number(e.d.rmoney).toFixed(1)+"":this.lab_remoney.text=Number(e.d.rmoney).toFixed(1)+"",e.d.disrate>=1?this.lab_disgrate.text="无":this.lab_disgrate.text=Number(10*e.d.disrate)+" 折",this.lab_summoney.text=e.d.summoney,this.lab_savepoint.text=e.d.savepoint,this.lab_typename.text=e.d.typecname},t.prototype.doSomeChange=function(){},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t}(eui.ItemRenderer);__reflect(listHuiYuanListItem.prototype,"listHuiYuanListItem");var ShopOrderFloatingBallPanel=function(e){function t(){var t=e.call(this)||this;return t._godd=0,t._paystate=0,t.skinName="ShopOrderFloatingBall",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this._btn_bot_left,this._OnClick),this._AddClick(this._btn_bot_right,this._OnClick)},t.prototype.OnOpen=function(){EventCenter.Instance.addEventListener(DataTransEvent.Event_ShopInfo_MakeShop_BotHit,this.onRedBotHit,this),EventCenter.Instance.addEventListener(DataTransEvent.Event_ShopInfo_MakeShop_ShopOrderFloatingBallShow,this.onThisShow,this),EventCenter.Instance.addEventListener(DataTransEvent.Event_ShopInfo_MakeShop_ShopOrderFloatingBallHide,this.onThisHide,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_MakeOrder,this.onServerEventData,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_CheckOrderBills,this.onServerEventData,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_BackToShoping,this.onServerEventData,this),this.setBotStatus()},t.prototype.OnClose=function(){EventCenter.Instance.removeEventListener(DataTransEvent.Event_ShopInfo_MakeShop_BotHit,this.onRedBotHit,this),EventCenter.Instance.removeEventListener(DataTransEvent.Event_ShopInfo_MakeShop_ShopOrderFloatingBallShow,this.onThisShow,this),EventCenter.Instance.removeEventListener(DataTransEvent.Event_ShopInfo_MakeShop_ShopOrderFloatingBallHide,this.onThisHide,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_MakeOrder,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_CheckOrderBills,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_BackToShoping,this.onServerEventData,this)},t.prototype.setBotStatus=function(){var e=0,t=ShopPageManage.ins().data_ShopMakeList;if(null!=t&&(e=t.length),this._godd=0,ShopPageManage.ins()._addstate=0,e>0){var n=t[0];this._godd=n.workstate,this._paystate=n.paystate,ShopPageManage.ins()._addstate=this._godd,ShopPageManage.ins()._addbillnumber=n.billnumber}for(var i=0,o=t,s=0;s<o.length;s++){var n=o[s];n.sid>0&&i++}if(this._godd<=0){if(0>=i)this._btn_bot_left.enabled=!1,this._btn_bot_right.enabled=!1,this.lab_redbot_num.text="",this._btn_bot_left.label="¥0";else{this._btn_bot_left.enabled=!0,this._btn_bot_right.enabled=!0,this.lab_redbot_num.text=""+i;for(var a=0,s=0;s<o.length;s++){var n=o[s];if(!(n.sid<=0)){ShopPageManage.ins().getServiceItemBySid(n.sid);a+=n.itembillyf}}this._btn_bot_left.label="¥"+a,this._btn_bot_right.label="选好了"}null==this._shopMakeInfoListPaeul&&(this._shopMakeInfoListPaeul=new ShopMakeInfoListPaeul,this.group_shopmakelist.addChild(this._shopMakeInfoListPaeul),this._shopMakeInfoListPaeul.DoOpen()),null!=this._shopOrderInfoListPaeul&&(this._shopOrderInfoListPaeul.visible=!1),this._shopMakeInfoListPaeul.setShopInfoList()}else if(1==this._godd){this._btn_bot_left.enabled=!0,this.lab_redbot_num.text=""+i;for(var r=t,a=0,s=0;s<r.length;s++){var n=r[s];if(!(n.sid<=0)){ShopPageManage.ins().getServiceItemBySid(n.sid);a+=n.itembillyf}}this._btn_bot_left.label="¥"+a,this._btn_bot_right.label="下单",null==this._shopOrderInfoListPaeul&&(this._shopOrderInfoListPaeul=new ShopOrderInfoListPanel,this.group_shopmakelist.addChild(this._shopOrderInfoListPaeul),this._shopOrderInfoListPaeul.DoOpen()),null!=this._shopMakeInfoListPaeul&&(this._shopMakeInfoListPaeul.visible=!1),this._shopOrderInfoListPaeul.visible=!0,this._shopOrderInfoListPaeul.setShopInfoList()}else if(2==this._godd){this._btn_bot_left.enabled=!0,this.lab_redbot_num.text=""+i;for(var h=t,a=0,s=0;s<h.length;s++){var n=h[s];n.paystate>0||(a+=n.itembillyf)}this._btn_bot_left.label="¥"+a,this._btn_bot_right.label="下单",this._btn_bot_right.enabled=!0,0==a&&(this._btn_bot_right.label="已付款",this._btn_bot_right.enabled=!1),null==this._shopOrderInfoListPaeul&&(this._shopOrderInfoListPaeul=new ShopOrderInfoListPanel,this.group_shopmakelist.addChild(this._shopOrderInfoListPaeul),this._shopOrderInfoListPaeul.DoOpen()),null!=this._shopMakeInfoListPaeul&&(this._shopMakeInfoListPaeul.visible=!1),this._shopOrderInfoListPaeul.visible=!0,this._shopOrderInfoListPaeul.setShopInfoList()}},t.prototype.onThisHide=function(){this.visible=!1},t.prototype.onThisShow=function(){this.visible=!0},t.prototype.onRedBotHit=function(){this.setBotStatus()},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_MakeOrder:ShopPageManage.ins().data_ShopMakeList=t.obj,this.setBotStatus();break;case FuncUrlUtil.ShopInfo_BackToShoping:ShopPageManage.ins().data_ShopMakeList=t.obj,this.setBotStatus();break;case FuncUrlUtil.ShopInfo_CheckOrderBills:var n=t.obj,i="timeStamp="+n.timeStamp+"&nonceStr="+n.nonceStr+"&prepay_id="+n.prepay_id+"&paySign="+n.paySign+"&token="+GameGlobal.token+"&company="+GameGlobal.CurrentCompany;_WX_PayNavito(i)}},t.prototype._OnClick=function(e){switch(e.target){case this._btn_bot_left:ViewManager.ins().close(ShopOredrPanel),this._godd<=0?0==this._shopMakeInfoListPaeul.visible?this._shopMakeInfoListPaeul._on_Show():this._shopMakeInfoListPaeul._on_hide():0==this._shopOrderInfoListPaeul.visible?this._shopOrderInfoListPaeul._on_Show():this._shopOrderInfoListPaeul._on_hide();break;case this._btn_bot_right:if(this._godd<=0){var t={company:GameGlobal.CurrentCompany},n=FuncUrlUtil.ShopInfo_MakeOrder;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(t),n)}else ViewManager.ins().open(ShopSelMoneyChannelPanel)}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ShopOrderFloatingBallPanel.prototype,"ShopOrderFloatingBallPanel");var ShopOrderInfoListPanel=function(e){function t(){var t=e.call(this)||this;return t._showmore=!1,t.skinName="ShopMakeOrderListSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){0==this._showmore?(this._btn_showmore.visible=!0,this._btn_showless.visible=!1):(this._btn_showmore.visible=!1,this._btn_showless.visible=!0),this._AddClick(this._btn_showmore,this._OnClick),this._AddClick(this._btn_showless,this._OnClick),this._AddClick(this._btn_backtoshop,this._OnClick)},t.prototype.OnOpen=function(){var e=ShopPageManage.ins().data_CompanyInfo;this.lab_companyname.text="店名: "+decodeURI(e.cname),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_DelAddItem,this.onServerEventData,this),EventCenter.Instance.addEventListener(DataTransEvent.Event_ShopInfo_ShowState_O_SelGuke,this.onShowSelGuke,this),EventCenter.Instance.addEventListener(DataTransEvent.Event_ShopInfo_MakeShop__O_AddNew,this.onAddNewShop,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_FreshOrderList,this.onServerEventData,this),this.scrollMy.addEventListener(egret.Event.CHANGE,this.onScrollerChange,this),this.timer=new egret.Timer(6e4),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.start()},t.prototype.OnClose=function(){this.scrollMy.removeEventListener(egret.Event.CHANGE,this.onScrollerChange,this),EventCenter.Instance.removeEventListener(DataTransEvent.Event_ShopInfo_ShowState_O_SelGuke,this.onShowSelGuke,this),EventCenter.Instance.removeEventListener(DataTransEvent.Event_ShopInfo_MakeShop__O_AddNew,this.onAddNewShop,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_FreshOrderList,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_DelAddItem,this.onServerEventData,this),this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer=null},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_DelAddItem:ShopPageManage.ins().data_ShopMakeList=t.obj,EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_BotHit,null));break;case FuncUrlUtil.ShopInfo_FreshOrderList:ShopPageManage.ins().data_ShopMakeList=t.obj,EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_BotHit,null))}},t.prototype.timerFunc=function(){this.sendFreshOrderlist()},t.prototype.sendFreshOrderlist=function(){var e=GameGlobal.CurrentCompany,t={cname:e},n=FuncUrlUtil.ShopInfo_FreshOrderList;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(t),n)},t.prototype.setShopInfoList=function(){var e=0,t=ShopPageManage.ins().data_ShopMakeList;if(!t)return WarnWin.show("数据异常 data_systemrole 为空",null,this),void this.CloseSelf();for(var n=t,i=0;i<n.length;i++){var o=n[i];if(0==i){this.lab_billnumber.text="订单号: "+o.billnumber;var s=o.checkcode;this.lab_codestart.text=""+s.substr(0,4),this.lab_codesfinish.text=""+s.substr(4,4)}o.gukenum>e&&(e=o.gukenum),o.workstate>=2&&(this._btn_backtoshop.visible=!1)}for(var a=[],r=0,i=0;e>i;i++){for(var h=[],_=0;_<n.length;_++){var o=n[_];o.gukeidx==i&&(h.push({idx:_,d:o}),r++)}var l="第 "+i+" 位同伴";if(0==i&&(l="我自己"),a.push({idx:i,title:l,d:h}),r++,0==this._showmore&&r>3)break}var u=this.scrollMy.viewport.scrollV,c=new eui.ArrayCollection(a);this.listGuke.dataProvider=c,this.listGuke.itemRenderer=listShopOrderInfoItem,this.listGuke.validateNow(),u>this.scrollMy.viewport.height&&(u=this.scrollMy.viewport.height-500),this.scrollMy.viewport.scrollV=u,this.group_buttoninfo.y=this.group_shoplist.y+this.group_shoplist.height
},t.prototype._on_Show=function(){this.visible=!0},t.prototype._on_hide=function(){this.visible=!1},t.prototype._OnClick=function(e){switch(e.target){case this._btn_showmore:this._showmore=!0,this._btn_showmore.visible=!1,this._btn_showless.visible=!0,this.setShopInfoList();break;case this._btn_showless:this._showmore=!1,this._btn_showmore.visible=!0,this._btn_showless.visible=!1,this.setShopInfoList();break;case this._btn_backtoshop:var t=GameGlobal.CurrentCompany,n={company:t},i=FuncUrlUtil.ShopInfo_BackToShoping;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(n),i)}},t.prototype.onScrollerChange=function(){for(var e=0;e<this.listGuke.$indexToRenderer.length;e++)this.listGuke.$indexToRenderer[e]&&this.listGuke.$indexToRenderer[e].doSomeChange()},t.prototype.onShowSelGuke=function(){this.onScrollerChange()},t.prototype.onAddNewShop=function(){this._on_hide()},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(ShopOrderInfoListPanel.prototype,"ShopOrderInfoListPanel");var listShopOrderInfoItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_thisTap,this),this._btn_addnew.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_AddNewTap,this),this._btn_addnew.visible=!1},t.prototype._on_thisTap=function(e){ShopPageManage.ins()._selGukeIdx!=this.data.idx&&(ShopPageManage.ins()._selGukeIdx=this.data.idx,EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_ShowState_O_SelGuke,null)))},t.prototype._on_AddNewTap=function(e){EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop__O_AddNew,null))},t.prototype.dataChanged=function(){this.setData()},t.prototype.setData=function(){var e=this.data;this._radio_sevidx.label=""+e.title;for(var t=[],n=e.d,i=0,o=0,s=0;s<n.length;s++){var a=n[s];t.push({idx:s,d:a.d,allnum:n.length}),2==a.d.workstate&&(this._btn_addnew.visible=!0),a.d.waitestate>=WaiterStateUtil.SST_SZ_MIN&&a.d.waitestate<WaiterStateUtil.SST_FW_FINISH&&(i=1),a.d.waitestate>=WaiterStateUtil.SST_FW_FINISH&&o++}0>i&&0>=o?(this.lab_waitestate.text="等待服务中。。。",this.lab_waitestate.textColor=WaiterStateUtil.getStateNameColor(WaiterStateUtil.SST_YY_WAIT)):i>0?(this.lab_waitestate.text="服务进行中。。。",this.lab_waitestate.textColor=WaiterStateUtil.getStateNameColor(WaiterStateUtil.SST_SZ_MIN)):0>=i&&o==n.length&&(this.lab_waitestate.text="服务已完成",this.lab_waitestate.textColor=WaiterStateUtil.getStateNameColor(WaiterStateUtil.SST_FW_FINISH));var r=new eui.ArrayCollection(t);this.listShopGukeIdx.dataProvider=r,this.listShopGukeIdx.itemRenderer=listGukeOrderIdxItem,this.setRectSize()},t.prototype.setView=function(){var e=this.data;this._radio_sevidx.label=""+e.title;for(var t=e.d,n=0;n<t.length;n++){var i=t[n];i.d.hid>0?(this.lab_waitestate.text="技师正在赶来...",this.lab_waitestate.textColor=10147381):(this.lab_waitestate.textColor=14169175,1==i.d.waitestate&&(this.lab_waitestate.text="技师全忙！ 请稍等。"),2==i.d.waitestate&&(this.lab_waitestate.text="所选等级技师全忙！ ，请稍等。"),3==i.d.waitestate&&(this.lab_waitestate.text="所选等级男技师全忙！ ，请稍等。"),4==i.d.waitestate&&(this.lab_waitestate.text="所选等级女技师全忙！ ，请稍等。"),5==i.d.waitestate&&(this.lab_waitestate.text="未到服务开始时间！ ，请稍等。"))}this.rect_back3.visible=!1,t.length<=0?(this.height=160,this.rect_back3.visible=!0,this.rect_back3.height=10):this.height=66+150*t.length+this.group_addNew.height+20,this.group_addNew.y=this.listShopGukeIdx.y+this.listShopGukeIdx.height+20,ShopPageManage.ins()._selGukeIdx==e.idx?(this._radio_sevidx.selected=!0,this.rect_back1.strokeColor=15250960,this.rect_back1.strokeWeight=5,this.rect_back2.strokeColor=15250960,this.rect_back2.strokeWeight=5):(this._radio_sevidx.selected=!1,this.rect_back1.strokeColor=15250960,this.rect_back1.strokeWeight=0,this.rect_back2.strokeColor=16777215,this.rect_back2.strokeWeight=0),this.rect_back2.height=this.rect_back1.height-60},t.prototype.setRectSize=function(){this.rect_back3.visible=!1;var e=this.data.d;e.length<=0?(this.height=160,this.rect_back3.visible=!0,this.rect_back3.height=10):this.height=66+150*e.length+this.group_addNew.height+20,this.group_addNew.y=this.listShopGukeIdx.y+this.listShopGukeIdx.height+20,ShopPageManage.ins()._selGukeIdx==this.data.idx?(this._radio_sevidx.selected=!0,this.rect_back1.strokeColor=4949897,this.rect_back1.strokeWeight=5,this.rect_back2.strokeColor=4949897,this.rect_back2.strokeWeight=5):(this._radio_sevidx.selected=!1,this.rect_back1.strokeColor=4949897,this.rect_back1.strokeWeight=0,this.rect_back2.strokeColor=16777215,this.rect_back2.strokeWeight=0),this.rect_back2.height=this.rect_back1.height-60},t.prototype.doSomeChange=function(){this.setRectSize();for(var e=0;e<this.listShopGukeIdx.$indexToRenderer.length;e++)this.listShopGukeIdx.$indexToRenderer[e]&&this.listShopGukeIdx.$indexToRenderer[e].doSomeChange()},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_thisTap,this),this._btn_addnew.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_AddNewTap,this)},t}(eui.ItemRenderer);__reflect(listShopOrderInfoItem.prototype,"listShopOrderInfoItem");var listGukeOrderIdxItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this._btn_del.addEventListener(egret.TouchEvent.TOUCH_TAP,this._delItem,this)},t.prototype._delItem=function(e){var t=GameGlobal.CurrentCompany,n={cname:t,shopid:this.data.d.id},i=FuncUrlUtil.ShopInfo_DelAddItem;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(n),i)},t.prototype.dataChanged=function(){this.setData()},t.prototype.setData=function(){var e=this.data;this.lab_itemname.text=e.d.sname;var t=ShopPageManage.ins().getServiceItemBySid(e.d.sid),n="";0==e.d.wtype?n="店家安排":1==e.d.wtype?n="要男技师":2==e.d.wtype?n="要女技师":3==e.d.wtype&&(n="点钟 "+e.d.hcode+" 号技师");var i="";0==e.d.wlev?i="等级无要求":1==e.d.wlev?i="初级技师":2==e.d.wlev?i="中级技师":3==e.d.wlev?i="高级技师":4==e.d.wlev?i="特级技师":5==e.d.wlev&&(i="专家坐诊"),3==e.d.wtype&&(i=""),this.lab_itemtime.text=t.timelong+"分钟 "+n+" "+i,this.lab_itemprice.text=""+e.d.itembillyf;var o=new Date(e.d.waittime);this.lab_waitetime.text=this.formatTime_lab(o),this.lab_num.text=e.d.clocknumyy+"个",this._btn_del.visible=!1,2==this.data.d.workstate&&0==this.data.d.paystate&&(this._btn_del.visible=!0,this._btn_del.enabled=!1,e.idx>=e.allnum-1&&(this._btn_del.enabled=!0)),sproto.sprotoRequest.loadURLImgOnThisDress(this.data.d.headpic,function(e){var t=e.target,n=t.data,i=new egret.Bitmap(n);i.width=this.group_img.width,i.height=this.group_img.height,this.group_img.addChild(i)},this)},t.prototype.doSomeChange=function(){},t.prototype.onRemove=function(){this._btn_del.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._delItem,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype.formatTime_lab=function(e){var t,n,i=(e.getFullYear(),e.getMonth()+1),o=e.getDate();t=10>i?"0"+i:i,n=10>o?"0"+o:o;var s,a,r,h=e.getHours(),_=e.getMinutes(),l=e.getSeconds();s=10>h?"0"+h:h,a=10>_?"0"+_:_,r=10>l?"0"+l:l;var u=i+"月"+o+"日"+h+"点"+_+"分";return u},t}(eui.ItemRenderer);__reflect(listGukeOrderIdxItem.prototype,"listGukeOrderIdxItem");var ShopOredrPanel=function(e){function t(){var t=e.call(this)||this;return t._listWorks=[],t._listGukes=[],t._listWorkItems=[],t._listWlevs=[],t._selWtype=0,t._selWLev=0,t._SelHid=-1,t._settime=0,t._setnum=0,t.skinName="ShopOredrSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){var e=new eui.RadioButtonGroup;e.addEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler,this),this._radio_lun.group=e,this._radio_nan.group=e,this._radio_nv.group=e,this._radio_dian.group=e,this._radio_lun.selected=!0,this._selWtype=0;var t=new eui.RadioButtonGroup;t.addEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler1,this),this._radio_wo.group=t,this._radio_tb.group=t;var n=new eui.RadioButtonGroup;n.addEventListener(eui.UIEvent.CHANGE,this.radioChangeHandler2,this),this._radio_lev_no.group=n,this._radio_lev_sel.group=n,this._btn_worksel.visible=!1,this._btn_querytime.visible=!1,this._AddClick(this._btn_worksel,this._OnClick),this._AddClick(this._btn_querytime,this._OnClick),this._AddClick(this._btn_back,this._OnClick),this._AddClick(this._btn_order,this._OnClick),this._AddClick(this._btn_time_MA,this._OnClick),this._AddClick(this._btn_time_MD,this._OnClick),this._AddClick(this._btn_time_DA,this._OnClick),this._AddClick(this._btn_time_DD,this._OnClick),this._AddClick(this._btn_time_HA,this._OnClick),this._AddClick(this._btn_time_HD,this._OnClick),this._AddClick(this._btn_time_FA,this._OnClick),this._AddClick(this._btn_time_FD,this._OnClick),this._AddClick(this._btn_time_NA,this._OnClick),this._AddClick(this._btn_time_ND,this._OnClick),this._AddClick(this._radio_tb,this._OnClick),this._AddClick(this._radio_lev_no,this._OnClick),this._AddClick(this._radio_lev_sel,this._OnClick),this.lab_time_num.text="1",this._setnum=1,this.lab_wntm.visible=!1,this._radio_tb.visible=!1;var i=ShopPageManage.ins().ShopGuke_Num;i>1&&(this._radio_tb.visible=!0),this._listGukes=[];for(var o=1;i>o;o++){var s="";s="第 "+o+" 位同伴",this._listGukes.push({name1:s,hid:0})}this._listWlevs=[],this._listWlevs.push({name1:"高级技师",lev:0}),this.rect_bot.visible=!1,this.lab_haveset_selhid.visible=!1,this.lab_haveset_settime.visible=!1},t.prototype.formatTime_lab=function(e){var t,n,i=(e.getFullYear(),e.getMonth()+1),o=e.getDate();t=10>i?"0"+i:i,n=10>o?"0"+o:o;var s,a,r,h=e.getHours(),_=e.getMinutes(),l=e.getSeconds();s=10>h?"0"+h:h,a=10>_?"0"+_:_,r=10>l?"0"+l:l;this.lab_time_mou.text=t+"月",this.lab_time_day.text=n+"日",this.lab_time_hou.text=h+"时",this.lab_time_min.text=_+"分"},t.prototype._setSameGuketime=function(){for(var e,t=0,n=0,i=ShopPageManage.ins().data_ShopMakeList,o=i,s=(new Date).getTime(),a=0;a<o.length;a++){var r=o[a];if(r.gukeidx==ShopPageManage.ins()._selGukeIdx){var h=ShopPageManage.ins().getServiceItemBySid(r.sid);if(null!=h){var _=new Date(r.waittime).getTime();_+r.clocknumyy*h.timelong*60*1e3>s&&(s=_,n=r.clocknumyy*h.timelong),t=1}}}var e;e=s+2e4+60*n*1e3,this._settime=e,this.formatTime_lab(new Date(e)),this.setSelDateTimeEnable(!0),this.lab_haveset_settime.visible=!1,1==t&&(this.setSelDateTimeEnable(!1),this.lab_haveset_settime.visible=!0)},t.prototype.setLastGukeSel=function(){for(var e=0,t=0,n=-1,i=0,o=0,s=ShopPageManage.ins().data_ShopMakeList,a=0;a<s.length;a++){var r=s[a];r.gukeidx==ShopPageManage.ins()._selGukeIdx&&r.id>i&&(t=r.wtype,n=r.hid,i=r.id,o=r.wlev,e=1)}if(this.setSelWtypeEnable(!0),this._btn_worksel.enabled=!0,this.lab_haveset_selhid.visible=!1,1==e&&(this.setSelWtypeEnable(!1),this.lab_haveset_selhid.visible=!0),this._selWtype=t,this._btn_worksel.visible=!1,this._btn_worksel.label="选择技师",this._btn_querytime.visible=!1,0==t)this._radio_lun.enabled=!0,this._radio_lun.selected=!0;else if(1==t)this._radio_nan.enabled=!0,this._radio_nan.selected=!0;else if(2==t)this._radio_nv.enabled=!0,this._radio_nv.selected=!0;else if(3==t){this._radio_dian.enabled=!0,this._radio_dian.selected=!0,this._SelHid=n;for(var h=ShopPageManage.ins().data_ShopWorkerList,a=0;a<h.length;a++){var _=h[a];if(_.hid==this._SelHid){this._btn_worksel.label="  "+_.servicecode+"号  ",this._btn_worksel.visible=!0;break}}1==e&&(this._btn_worksel.enabled=!1),this.sendSelWorker()}0==o?this._radio_lev_no.selected=!0:(this._radio_lev_sel.selected=!0,this._radio_lev_sel.label=this._listWlevs[o-1].name1),this._radio_lev_no.enabled=!0,this._radio_lev_sel.enabled=!0,1==e&&(this._radio_lev_no.enabled=!1,this._radio_lev_sel.enabled=!1)},t.prototype.setSelWtypeEnable=function(e){1==e?(this._radio_lun.enabled=!0,this._radio_nan.enabled=!0,this._radio_nv.enabled=!0,this._radio_dian.enabled=!0):(this._radio_lun.enabled=!1,this._radio_nan.enabled=!1,this._radio_nv.enabled=!1,this._radio_dian.enabled=!1)},t.prototype.setSelDateTimeEnable=function(e){1==e?(this._btn_time_MA.enabled=!0,this._btn_time_MD.enabled=!0,this._btn_time_DA.enabled=!0,this._btn_time_DD.enabled=!0,this._btn_time_HA.enabled=!0,this._btn_time_HD.enabled=!0,this._btn_time_FA.enabled=!0,this._btn_time_FD.enabled=!0):(this._btn_time_MA.enabled=!1,this._btn_time_MD.enabled=!1,this._btn_time_DA.enabled=!1,this._btn_time_DD.enabled=!1,this._btn_time_HA.enabled=!1,this._btn_time_HD.enabled=!1,this._btn_time_FA.enabled=!1,this._btn_time_FD.enabled=!1)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._data=e[0],this.lab_itemname.text=this._data.name,this.lab_itemprice.text="¥"+this._data.price;var n=0;ShopPageManage.ins()._selGukeIdx<=0?this._radio_wo.selected=!0:(this._radio_tb.selected=!0,n=ShopPageManage.ins()._selGukeIdx-1,n>=0&&n<this._listGukes.length&&(this._radio_tb.label=this._listGukes[n].name1)),this._setSameGuketime();var i=GameGlobal.CurrentCompany,o={name:i},s=FuncUrlUtil.ShopInfo_GetCanWorkerList;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(o),s),this.botMov.addEventListener(egret.Event.COMPLETE,this.redBotHit,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_GetCanWorkerList,this.onServerEventData,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_GetThisWorkerOrderList,this.onServerEventData,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_MakeShop,this.onServerEventData,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_AddShopFor,this.onServerEventData,this)},t.prototype.OnClose=function(){this.botMov.removeEventListener(egret.Event.COMPLETE,this.redBotHit,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_GetCanWorkerList,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_GetThisWorkerOrderList,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_MakeShop,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_AddShopFor,this.onServerEventData,this)},t.prototype.redBotHit=function(){EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_BotHit,null)),this.CloseSelf()},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_GetCanWorkerList:ShopPageManage.ins().data_ShopWorkerList=t.obj,this.onList_work_Update(),this.setLastGukeSel();break;case FuncUrlUtil.ShopInfo_GetThisWorkerOrderList:ShopPageManage.ins().data_ThisWorkerItemList=t.obj,this.onList_workwait_Update(),this._btn_querytime.visible=!0,this.ifTimeOverEachOther();break;case FuncUrlUtil.ShopInfo_MakeShop:ShopPageManage.ins().data_ShopMakeList=t.obj,this.rect_bot.visible=!0,this.botMov.play(0),this._setSameGuketime(),this.setLastGukeSel();break;case FuncUrlUtil.ShopInfo_AddShopFor:ShopPageManage.ins().data_ShopMakeList=t.obj,this.rect_bot.visible=!0,this.botMov.play(0)}},t.prototype.ifTimeOverEachOther=function(){this.lab_time_mou.textColor=3485487,this.lab_time_day.textColor=3485487,this.lab_time_hou.textColor=3485487,this.lab_time_min.textColor=3485487,this.lab_time_num.textColor=3485487,this.lab_wntm.visible=!1;var e={time:this._settime,num:this._setnum};if(this._SelHid>0){var t=ShopPageManage.ins()._ifWorkerItemTimeisOverEachOther(e);if(1==t&&(this.lab_wntm.visible=!0,this.lab_time_mou.textColor=13706019,this.lab_time_day.textColor=13706019,this.lab_time_hou.textColor=13706019,this.lab_time_min.textColor=13706019),t>=2&&(this.lab_wntm.visible=!0,this.lab_time_num.textColor=13706019),0==t){var n=ShopPageManage.ins()._ifWorkerItemTimeisOverEachOtherOnThisShop(e,this._SelHid);1==n&&(this.lab_wntm.visible=!0,this.lab_time_mou.textColor=13706019,this.lab_time_day.textColor=13706019,this.lab_time_hou.textColor=13706019,this.lab_time_min.textColor=13706019),n>=2&&(this.lab_wntm.visible=!0,this.lab_time_num.textColor=13706019)}}var i=ShopPageManage.ins()._ifGukeItemTimeisOverEachOther(e);1==i&&(this.lab_wntm.visible=!0,this.lab_time_mou.textColor=13706019,this.lab_time_day.textColor=13706019,this.lab_time_hou.textColor=13706019,this.lab_time_min.textColor=13706019),i>=2&&(this.lab_wntm.visible=!0,this.lab_time_num.textColor=13706019)},t.prototype.onList_work_Update=function(){var e=ShopPageManage.ins().data_ShopWorkerList;this._listWorks=[];for(var t=e,n=0;n<t.length;n++){var i=t[n];this._listWorks.push({name1:"  "+i.servicecode+"号  ",hid:i.hid})}},t.prototype.onList_workwait_Update=function(){var e=ShopPageManage.ins().data_ThisWorkerItemList;this._listWorkItems=[];for(var t,n,i=e,o=(new Date).getTime(),s=-1,a=0;a<i.length;a++){var r=i[a];if(!(r.workstate>=WaiterStateUtil.SST_FW_FINISH)){var h=ShopPageManage.ins().getServiceItemBySid(r.sid),_=new Date(r.waittime),l=r.clocknumyy;null==l&&(l=1);var u=_.getTime()+l*h.timelong*60*1e3;if(r.workstate>=WaiterStateUtil.SST_SZ_MIN&&r.workstate<WaiterStateUtil.SST_FW_FINISH){var c=(o-_.getTime())/6e4,p=c%60;if(p>10){var d=Math.floor(c/60)+1;u=_.getTime()+60*d*60*1e3}else u=o}var g=new Date(u),m=this.formatTime_hour(_),v=this.formatTime_hour(g);g.getDay()>_.getDay()&&(v=this.formatTime(g));var S=0;null==t&&(t=o,S=1);var f=(_.getTime()-t)/6e4;if(f>30){var b=new Date(t),y=this.formatTime_hour(b),k=this.formatTime_hour(_),E=_.getDay(),T=b.getDay();E!=T&&(k=this.formatTime(_));var I=Math.floor(f/60),j="";I>0&&(j=j+I+"小时");var w=Math.floor(f%60);w>0&&(j=j+w+"分"),1==S&&(this._listWorkItems.push({name1:this.formatTime_day(b),name2:"",name3:"",c:2}),s=b.getDay()),this._listWorkItems.push({name1:y+" 至 "+k,name2:j,name3:"空闲",c:0})}null==n?s!=_.getDay()&&(this._listWorkItems.push({name1:this.formatTime_day(_),name2:"",name3:"",c:2}),s=_.getDay()):_.getDay()>n.getDay()&&s!=_.getDay()&&(this._listWorkItems.push({name1:this.formatTime_day(_),name2:"",name3:"",c:2}),s=_.getDay());var C=(u-_.getTime())/6e4,M=Math.floor(C/60),P="";M>0&&(P=P+M+"小时");var L=Math.floor(C%60);L>0&&(P=P+L+"分钟"),this._listWorkItems.push({name1:m+" 至 "+v,name2:P,name3:"预约",c:1}),t=u,n=new Date(u)}}null==t&&(t=(new Date).getTime());var R=new Date(t),O=this.formatTime_hour(R);s!=R.getDay()&&this._listWorkItems.push({name1:this.formatTime_day(R),name2:"",name3:"",c:2}),this._listWorkItems.push({name1:O+" 后",name2:"",name3:"空闲",c:0}),ShopPageManage.ins().data_listWorkItems=this._listWorkItems,ShopPageManage.ins().data_listWorkTile=this._btn_worksel.label+"的工作安排"},t.prototype.formatTime=function(e){var t,n,i=(e.getFullYear(),e.getMonth()+1),o=e.getDate();t=10>i?"0"+i:i,n=10>o?"0"+o:o;var s,a,r,h=e.getHours(),_=e.getMinutes(),l=e.getSeconds();s=10>h?"0"+h:h,a=10>_?"0"+_:_,r=10>l?"0"+l:l;var u=t+"月"+n+"日 "+s+":"+a;return u},t.prototype.formatTime_day=function(e){var t,n,i=(e.getFullYear(),e.getMonth()+1),o=e.getDate();t=10>i?"0"+i:i,n=10>o?"0"+o:o;var s,a,r,h=e.getHours(),_=e.getMinutes(),l=e.getSeconds();s=10>h?"0"+h:h,a=10>_?"0"+_:_,r=10>l?"0"+l:l;var u=t+"月"+n+"日";return u},t.prototype.formatTime_hour=function(e){var t,n,i=(e.getFullYear(),e.getMonth()+1),o=e.getDate();t=10>i?"0"+i:i,n=10>o?"0"+o:o;var s,a,r,h=e.getHours(),_=e.getMinutes(),l=e.getSeconds();s=10>h?"0"+h:h,a=10>_?"0"+_:_,r=10>l?"0"+l:l;var u=s+":"+a;return u},t.prototype._OnClick=function(e){switch(e.target){case this._radio_lev_no:this._selWLev=0;break;case this._radio_lev_sel:ViewManager.ins().open(normalselpanel,"选择技师",this._listWlevs,this._onselWlev,this);break;case this._btn_worksel:ViewManager.ins().open(normalselpanel,"选择技师",this._listWorks,this._selWorker,this);break;case this._btn_querytime:ViewManager.ins().open(normalTimeSetPanel,this._btn_worksel.label+"的工作安排",this._listWorkItems,null,this);break;case this._btn_back:this.CloseSelf();break;case this._btn_order:this.makeOrder();break;case this._radio_tb:ViewManager.ins().open(normalselpanel,"选择同伴",this._listGukes,this._selGuke,this);break;case this._btn_time_FD:this._settime=this._settime-6e4;var t=new Date(this._settime);this.formatTime_lab(t),this.ifTimeOverEachOther();break;case this._btn_time_FA:this._settime=this._settime+6e4;var t=new Date(this._settime);this.formatTime_lab(t),this.ifTimeOverEachOther();break;case this._btn_time_HD:this._settime=this._settime-36e5;var t=new Date(this._settime);this.formatTime_lab(t),this.ifTimeOverEachOther();break;case this._btn_time_HA:this._settime=this._settime+36e5;var t=new Date(this._settime);this.formatTime_lab(t),this.ifTimeOverEachOther();break;case this._btn_time_DD:this._settime=this._settime-864e5;var t=new Date(this._settime);this.formatTime_lab(t),this.ifTimeOverEachOther();break;case this._btn_time_DA:this._settime=this._settime+864e5;var t=new Date(this._settime);this.formatTime_lab(t),this.ifTimeOverEachOther();break;case this._btn_time_MD:var t=new Date(this._settime),n=Util.getDaysOfMonth_pre(t);this._settime=this._settime-24*n*60*60*1e3,t=new Date(this._settime),this.formatTime_lab(t),this.ifTimeOverEachOther();break;case this._btn_time_MA:var t=new Date(this._settime),n=Util.getDaysOfMonth(t);this._settime=this._settime+24*n*60*60*1e3,t=new Date(this._settime),this.formatTime_lab(t),this.ifTimeOverEachOther();break;case this._btn_time_ND:this._setnum=this._setnum-.5,this.lab_time_num.text=this._setnum+"",this.ifTimeOverEachOther(),this.lab_itemprice.text="¥"+this._setnum*this._data.price;break;case this._btn_time_NA:this._setnum=this._setnum+.5,this.lab_time_num.text=this._setnum+"",this.ifTimeOverEachOther(),this.lab_itemprice.text="¥"+this._setnum*this._data.price}},t.prototype._onselWlev=function(e){this._selWLev=this._listWlevs[e].lev,this._radio_lev_sel.label=this._listWlevs[e].name1},t.prototype._selWorker=function(e){this._SelHid=this._listWorks[e].hid,this._btn_worksel.label=this._listWorks[e].name1,this.sendSelWorker()},t.prototype.sendSelWorker=function(){var e=GameGlobal.CurrentCompany,t={name:e,hid:this._SelHid+""},n=FuncUrlUtil.ShopInfo_GetThisWorkerOrderList;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(t),n)},t.prototype._selGuke=function(e){ShopPageManage.ins()._selGukeIdx=e+1,this._radio_tb.label=this._listGukes[e].name1,this._setSameGuketime(),this.setLastGukeSel()},t.prototype.radioChangeHandler=function(e){var t=e.target,n=t.selectedValue;3==n?(this._btn_worksel.visible=!0,this._radio_lev_no.enabled=!1,this._radio_lev_sel.enabled=!1,this._radio_lev_no.selected=!0):(this._btn_worksel.visible=!1,this._btn_worksel.label="选择技师",this._btn_querytime.visible=!1,this._radio_lev_no.enabled=!0,this._radio_lev_sel.enabled=!0),this._selWtype=n},t.prototype.radioChangeHandler1=function(e){var t=e.target,n=t.selectedValue;0==n&&(ShopPageManage.ins()._selGukeIdx=0,this._setSameGuketime(),this.setLastGukeSel()),1==n&&ViewManager.ins().open(normalselpanel,"选择同伴",this._listGukes,this._selGuke,this)},t.prototype.radioChangeHandler2=function(e){var t=e.target,n=t.selectedValue;0==n&&(this._selWLev=0)},t.prototype.makeOrder=function(){if(1==this.lab_wntm.visible)return void WarnWin.show("时间冲突，请重新设置服务时间！",null,this);for(var e=new Date(this._settime),t=this.formatTime_servers(e),n="",i="",o=ShopPageManage.ins().data_ShopWorkerList,s=0;s<o.length;s++){var a=o[s];if(a.hid==this._SelHid){n=a.servicecode,i=a.name;break}}var r={company:GameGlobal.CurrentCompany,gukenum:ShopPageManage.ins().ShopGuke_Num,gukeidx:ShopPageManage.ins()._selGukeIdx,rmid:egret.getOption("rmid"),rmname:egret.getOption("rmname"),hid:this._SelHid,hcode:n,hname:i,sid:this._data.id,sname:this._data.name,clocknumyy:this._setnum,wtype:this._selWtype,wlev:this._selWLev,waittime:t,workstate:0,billnumber:""};if(0==ShopPageManage.ins()._addstate){var h=FuncUrlUtil.ShopInfo_MakeShop;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(r),h)}else if(2==ShopPageManage.ins()._addstate){r.workstate=ShopPageManage.ins()._addstate,r.billnumber=ShopPageManage.ins()._addbillnumber;var h=FuncUrlUtil.ShopInfo_AddShopFor;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(r),h)}},t.prototype.formatTime_servers=function(e){var t,n,i=e.getFullYear(),o=e.getMonth()+1,s=e.getDate();t=10>o?"0"+o:o,n=10>s?"0"+s:s;var a,r,h,_=e.getHours(),l=e.getMinutes(),u=e.getSeconds();a=10>_?"0"+_:_,r=10>l?"0"+l:l,h=10>u?"0"+u:u;var c=i+"-"+t+"-"+n+" "+a+":"+r+":"+h;return c},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t}(BaseEuiView);__reflect(ShopOredrPanel.prototype,"ShopOredrPanel");var ShopPageManage=function(e){function t(){var t=e.call(this)||this;return t.ShopGuke_Num=0,t.ShopGuke_TimeType=0,t._selGukeIdx=0,t._addstate=0,t._addbillnumber="",sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_GetShopInfo,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_GetCanWorkerList,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_GetThisWorkerOrderList,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_MakeShop,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_GetMakeShopInfo,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_DelShopItem,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_DelAddItem,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_MakeOrder,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_AddShopFor,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_newShopMake,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_BackToShoping,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_CheckOrderBills,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_GetHistoryShopInfo,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_RequestMoneyChannel,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_AskMoneyChannel,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_GetMyHuiYuanInfo,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_BindTeleVerifySendCode,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_BindTeleVerifyBindByCode,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_RequestHuiYuanPayInfo,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_SelMyHuiYuanAndToPay,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_SureToSelMyHuiYuanAndToPay,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_GetHistoryShopInfoDetail,t.SendMessageEvent,t),sproto.sprotoMsgReceiver.AddHandler(FuncUrlUtil.ShopInfo_FreshOrderList,t.SendMessageEvent,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getServiceItemBySid=function(e){for(var t=this.data_ShopInfoItem,n=0;n<t.length;n++)if(t[n].id==e)return t[n]},t.prototype.SendMessageEvent=function(e){EventCenter.Instance.dispatchEvent(new DataTransEvent(e.msg,e))},t.prototype._ifWorkerItemTimeisOverEachOther=function(e){for(var t=this.data_ThisWorkerItemList,n=0,i=0;i<t.length;i++){var o=t[i],s=this.getServiceItemBySid(o.sid),a=(60*s.timelong*1e3,new Date(o.waittime)),r=(new Date).getTime(),h=o.clocknumyy;null==h&&(h=1);var _=a.getTime()+h*s.timelong*60*1e3;if(o.workstate>=WaiterStateUtil.SST_SZ_MIN&&o.workstate<WaiterStateUtil.SST_FW_FINISH){var l=(r-a.getTime())/6e4,u=l%60;if(u>10){var c=Math.floor(l/60)+1;_=a.getTime()+60*c*60*1e3}else _=r}new Date(_);e.time>a.getTime()&&e.time<_&&(n=1);var p=e.time+e.num*s.timelong*60*1e3;p>a.getTime()&&_>p&&(n=2),a.getTime()>e.time&&a.getTime()<p&&(n=3)}return n},t.prototype._ifWorkerItemTimeisOverEachOtherOnThisShop=function(e,t){for(var n=0,i=this.data_ShopMakeList,o=0;o<i.length;o++){var s=i[o];if(!(s.hid<=0)&&s.hid==t){var a=this.getServiceItemBySid(s.sid),r=(60*a.timelong*1e3,new Date(s.waittime)),h=(new Date).getTime(),_=s.clocknumyy;null==_&&(_=1);var l=r.getTime()+_*a.timelong*60*1e3;if(s.workstate>=WaiterStateUtil.SST_SZ_MIN&&s.workstate<WaiterStateUtil.SST_FW_FINISH){var u=(h-r.getTime())/6e4,c=u%60;if(c>10){var p=Math.floor(u/60)+1;l=r.getTime()+60*p*60*1e3}else l=h}new Date(l);e.time>r.getTime()&&e.time<l&&(n=1);var d=e.time+e.num*a.timelong*60*1e3;d>r.getTime()&&l>d&&(n=2),r.getTime()>e.time&&r.getTime()<d&&(n=3)}}return n},t.prototype._ifGukeItemTimeisOverEachOther=function(e){for(var t=this.data_ShopMakeList,n=0;n<t.length;n++){var i=t[n];if(i.gukeidx==this._selGukeIdx){var o=this.getServiceItemBySid(i.sid),s=(60*o.timelong*1e3,new Date(i.waittime)),a=(new Date).getTime(),r=i.clocknumyy;null==r&&(r=1);var h=s.getTime()+r*o.timelong*60*1e3;if(i.workstate>=WaiterStateUtil.SST_SZ_MIN&&i.workstate<WaiterStateUtil.SST_FW_FINISH){var _=(a-s.getTime())/6e4,l=_%60;if(l>10){var u=Math.floor(_/60)+1;h=s.getTime()+60*u*60*1e3}else h=a}new Date(h);if(e.time>s.getTime()&&e.time<h)return 1;var c=e.time+e.num*o.timelong*60*1e3;if(c>s.getTime()&&h>c)return 2;if(s.getTime()>e.time&&s.getTime()<c)return 3}}return 0},t}(BaseSystem);__reflect(ShopPageManage.prototype,"ShopPageManage");var ShopPagePanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopPangeSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.OnOpen=function(){this.on_setCompanyInfo(),this.onList_wait_Update(),ViewManager.ins().open(ShopOrderFloatingBallPanel)},t.prototype.OnClose=function(){},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_GetShopInfo:}},t.prototype.on_setCompanyInfo=function(){var e=ShopPageManage.ins().data_CompanyInfo;this.lab_companyname.text=decodeURI(e.cname),this.lab_companydress.text="地址："+e.adress,this.lab_companyphone.text="电话："+e.sevtelephone,this.lab_companymobil.text="手机："+e.sevmobilephone,sproto.sprotoRequest.loadURLImgOnThisDress(e.headpic,function(e){var t=e.target,n=t.data,i=new egret.Bitmap(n);i.width=this.group_companypic.width,i.height=this.group_companypic.height,this.group_companypic.addChild(i)},this)},t.prototype.onList_wait_Update=function(){for(var e=ShopPageManage.ins().data_ShopInfoItem,t=e,n=[],i=0;i<t.length;i++){var o=t[i];n.push({idx:i,d:o})}var s=new eui.ArrayCollection(n);this.listItem_s.dataProvider=s,this.listItem_s.itemRenderer=listShopInfoItem,this.listItem_s.validateNow()},t.prototype._OnClick=function(e){e.target},t.LAYER_LEVEL=LayerManager.UI_USER_INFO,t}(BaseEuiView);__reflect(ShopPagePanel.prototype,"ShopPagePanel");var listShopInfoItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this._btn_order.addEventListener(egret.TouchEvent.TOUCH_END,this._on_order,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype._on_order=function(e){({x:e.stageX,y:e.stageY});ViewManager.ins().open(ShopOredrPanel,this.data.d)},t.prototype.dataChanged=function(){this.lab_itemname.text=this.data.d.name,this.lab_itemtime.text=this.data.d.timelong+"|养生",this.lab_itemprice.text="¥"+this.data.d.price,sproto.sprotoRequest.loadURLImgOnThisDress(this.data.d.headpic,function(e){var t=e.target,n=t.data,i=new egret.Bitmap(n);i.width=this.group_imgshow.width,i.height=this.group_imgshow.height,this.group_imgshow.addChild(i)},this)},t.prototype.doSomeChange=function(){},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t}(eui.ItemRenderer);__reflect(listShopInfoItem.prototype,"listShopInfoItem");var ShopPayHuiYuanSelList=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopPayHuiYuanSelListSkin",t}return __extends(t,e),t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._AddClick(this._btn_addnew,this._OnClick),this._AddClick(this._btn_back,this._OnClick),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_SelMyHuiYuanAndToPay,this.onServerEventData,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_SureToSelMyHuiYuanAndToPay,this.onServerEventData,this),this.listItem_h.addEventListener(egret.Event.CHANGE,this._onWItemChange,this),this.listItem_h.addEventListener(egret.TouchEvent.TOUCH_END,this._List_w_touchend,this),this.onListUpdate()
},t.prototype._OnClick=function(e){switch(e.target){case this._btn_back:this.CloseSelf();break;case this._btn_addnew:WarnWin.show("本店暂不支持自助办理会员！",null,null)}},t.prototype.OnClose=function(){EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_SelMyHuiYuanAndToPay,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_SureToSelMyHuiYuanAndToPay,this.onServerEventData,this),this.listItem_h.removeEventListener(egret.Event.CHANGE,this._onWItemChange,this),this.listItem_h.removeEventListener(egret.TouchEvent.TOUCH_END,this._List_w_touchend,this)},t.prototype.onEventData=function(e){},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_SelMyHuiYuanAndToPay:var n=t.obj;this._payinfo=n,WariSelHuiYuanPayWin.show(n,this.suretopay,this);break;case FuncUrlUtil.ShopInfo_SureToSelMyHuiYuanAndToPay:var i=t.obj;"ok"==i.suc&&(ShopPageManage.ins().data_ShopMakeList=i.rl,WarnWin.show("付款成功！",null,null),EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_BotHit,null)),EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopPay_Close_Sel_MoneyChanel_panel,null)),this.CloseSelf())}},t.prototype.onListUpdate=function(){for(var e=ShopPageManage.ins().data_MyHuiYuanInfo,t=[],n=e,i=0;i<n.length;i++){var o=n[i];t.push({idx:o.id,d:o,closefunc:this.CloseSelf,closeobj:this})}var s=new eui.ArrayCollection(t);this.listItem_h.dataProvider=s,this.listItem_h.itemRenderer=lisPaytHuiYuanListItem,this.listItem_h.validateNow()},t.prototype.suretopay=function(){var e=ShopPageManage.ins().data_ShopMakeList,t={company:GameGlobal.CurrentCompany,billnumber:e[0].billnumber,hid:this._payinfo.hy.id},n=FuncUrlUtil.ShopInfo_SureToSelMyHuiYuanAndToPay;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(t),n)},t.prototype._onWItemChange=function(e){for(var t=0;t<this.listItem_h.$indexToRenderer.length;t++)this.listItem_h.$indexToRenderer[t]&&this.listItem_h.$indexToRenderer[t].doSomeChange()},t.prototype._List_w_touchend=function(e){for(var t=0;t<this.listItem_h.$indexToRenderer.length;t++)this.listItem_h.$indexToRenderer[t]&&this.listItem_h.$indexToRenderer[t].doSomeChange()},t.LAYER_LEVEL=LayerManager.UI_Main_1,t}(BaseEuiView);__reflect(ShopPayHuiYuanSelList.prototype,"ShopPayHuiYuanSelList");var lisPaytHuiYuanListItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_tap_this,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype._on_tap_this=function(e){var t=ShopPageManage.ins().data_ShopMakeList,n={company:GameGlobal.CurrentCompany,billnumber:t[0].billnumber,hid:this.data.d.id},i=FuncUrlUtil.ShopInfo_SelMyHuiYuanAndToPay;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(n),i)},t.prototype.dataChanged=function(){var e=this.data;this.lab_cardid.text=e.d.cardid,parseInt(e.d.rmoney)?this.lab_remoney.text=Number(e.d.rmoney).toFixed(1)+"":this.lab_remoney.text=Number(e.d.rmoney).toFixed(1)+"",e.d.disrate>=1?this.lab_disgrate.text="无":this.lab_disgrate.text=Number(10*e.d.disrate)+" 折",this.lab_summoney.text=e.d.summoney,this.lab_savepoint.text=e.d.savepoint,this.lab_typename.text=e.d.typecname},t.prototype.doSomeChange=function(){},t.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_tap_this,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t}(eui.ItemRenderer);__reflect(lisPaytHuiYuanListItem.prototype,"lisPaytHuiYuanListItem");var ShopPayStateShowPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopPayStateShow",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this._btn_back_order,this._OnClick),this._AddClick(this._btn_back,this._OnClick),this._btn_back.visible=!1,this.lab_payfail.visible=!1},t.prototype.OnOpen=function(){EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_AskMoneyChannel,this.onServerEventData,this),this.timer=new egret.Timer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.start(),this._lasttimeAskServer=(new Date).getTime();var e=ShopPageManage.ins().data_MoneyChannelInfo,t=e.rl;null!=t&&("wxpay"==t.channelname?(this.group_paychannelweixin.visible=!0,this.group_paychannelzhifubao.visible=!1):"alpay"==t.channelname&&(this.group_paychannelweixin.visible=!1,this.group_paychannelzhifubao.visible=!0),this.lab_price.text=t.blockbillprice+""),this.group_success.visible=!1},t.prototype.OnClose=function(){EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_AskMoneyChannel,this.onServerEventData,this),this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer=null},t.prototype.timerFunc=function(){var e=ShopPageManage.ins().data_MoneyChannelInfo,t=e.rl;if(null!=t){var n=new Date(t.blocktime),i=(new Date).getTime()-n.getTime(),o=Math.floor(MClUtil.CHANNEL_BLOCK_TIME-i/1e3);if(o>=0?this.lab_time.text=o+"":(this._btn_back.visible=!0,this.lab_payfail.visible=!0),o>=0&&(new Date).getTime()-this._lasttimeAskServer>6e3){this._lasttimeAskServer=(new Date).getTime();var s=ShopPageManage.ins().data_ShopMakeList;if(null!=s&&s.length>0){var a={company:GameGlobal.CurrentCompany,billnumber:s[0].billnumber},r=FuncUrlUtil.ShopInfo_AskMoneyChannel;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(a),r)}}}},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_AskMoneyChannel:var n=t.obj;"ok"==n.suc&&(ShopPageManage.ins().data_ShopMakeList=n.rl,this.group_timeshow.visible=!1,this.group_success.visible=!0)}},t.prototype._OnClick=function(e){switch(e.target){case this._btn_back_order:EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_MakeShop_BotHit,null)),EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopPay_Close_Sel_MoneyChanel_panel,null)),this.CloseSelf();break;case this._btn_back:this.CloseSelf()}},t.LAYER_LEVEL=LayerManager.UI_Main_1,t}(BaseEuiView);__reflect(ShopPayStateShowPanel.prototype,"ShopPayStateShowPanel");var ShopSelMoneyChannelPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopSelMoneyChannel",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this._btn_pay_weixin,this._OnClick),this._AddClick(this._btn_pay_zhifubao,this._OnClick),this._AddClick(this._btn_pay_huiyuan,this._OnClick),this._AddClick(this._btn_back_message,this._OnClick),this._AddClick(this._btn_back,this._OnClick),this.group_channelmessage.visible=!1},t.prototype.OnOpen=function(){EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_RequestMoneyChannel,this.onServerEventData,this),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_RequestHuiYuanPayInfo,this.onServerEventData,this),EventCenter.Instance.addEventListener(DataTransEvent.Event_ShopPay_Close_Sel_MoneyChanel_panel,this.eventclose,this)},t.prototype.OnClose=function(){EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_RequestMoneyChannel,this.onServerEventData,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_RequestHuiYuanPayInfo,this.onServerEventData,this),EventCenter.Instance.removeEventListener(DataTransEvent.Event_ShopPay_Close_Sel_MoneyChanel_panel,this.eventclose,this)},t.prototype.eventclose=function(e){this.CloseSelf()},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_RequestMoneyChannel:ShopPageManage.ins().data_MoneyChannelInfo=t.obj,this.dealChannelInfo();break;case FuncUrlUtil.ShopInfo_RequestHuiYuanPayInfo:this.setHuiyuanInfo(t)}},t.prototype.dealChannelInfo=function(){var e=ShopPageManage.ins().data_MoneyChannelInfo;if("no"==e.suc){this.group_selmoneychannel.visible=!1,this.group_channelmessage.visible=!0;var t=e.rl,n=new Date(t.blocktime),i=(new Date).getTime()-n.getTime(),o=Math.floor(60-i/1e3);o>=0&&(this.lab_timetest.text=o+"")}else"ok"==e.suc?(ViewManager.ins().open(ShopPayStateShowPanel),this.CloseSelf()):"needbind"==e.suc&&(ViewManager.ins().open(ShopHuiYuanNedPhoneNumberPanel),this.CloseSelf())},t.prototype.setHuiyuanInfo=function(e){var t=e.obj;return"needbind"==t.msg?void ViewManager.ins().open(ShopHuiYuanNedPhoneNumberPanel):(ShopPageManage.ins().data_MyHuiYuanInfo=t.hl,void ViewManager.ins().open(ShopPayHuiYuanSelList))},t.prototype._OnClick=function(e){switch(e.target){case this._btn_back:this.CloseSelf();break;case this._btn_pay_weixin:this.sendRequestMoneyChannel("wxpay");break;case this._btn_pay_zhifubao:this.sendRequestMoneyChannel("alpay");break;case this._btn_pay_huiyuan:this.sendRequesHuiYuanPayInfo("huiyuan");break;case this._btn_back_message:this.group_selmoneychannel.visible=!0,this.group_channelmessage.visible=!1}},t.prototype.sendRequestMoneyChannel=function(e){var t=ShopPageManage.ins().data_ShopMakeList;if(null==t||t.length<=0)return void WarnWin.show("无可用订单",null,null);var n={company:GameGlobal.CurrentCompany,billnumber:t[0].billnumber,type:e},i=FuncUrlUtil.ShopInfo_RequestMoneyChannel;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(n),i)},t.prototype.sendRequesHuiYuanPayInfo=function(e){var t=ShopPageManage.ins().data_ShopMakeList;if(null==t||t.length<=0)return void WarnWin.show("无可用订单",null,null);var n={company:GameGlobal.CurrentCompany,billnumber:t[0].billnumber,type:e},i=FuncUrlUtil.ShopInfo_RequestHuiYuanPayInfo;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(n),i)},t.LAYER_LEVEL=LayerManager.UI_Main_1,t}(BaseEuiView);__reflect(ShopSelMoneyChannelPanel.prototype,"ShopSelMoneyChannelPanel");var ShopServingBillDetialPanel=function(e){function t(){var t=e.call(this)||this;return t._showmore=!1,t.skinName="ShopHistoryBillListIDetailSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){0==this._showmore?(this._btn_showmore.visible=!0,this._btn_showless.visible=!1):(this._btn_showmore.visible=!1,this._btn_showless.visible=!0),this._AddClick(this._btn_showmore,this._OnClick),this._AddClick(this._btn_showless,this._OnClick),this._AddClick(this._btn_goback,this._OnClick)},t.prototype.OnOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this._data=e[0],!this._data)return WarnWin.show("数据异常 data_systemrole 为空",null,this),void this.CloseSelf();var n=this._data;if(!(n.length<=0)){var i=n[0];this.gethistoryinfoDetail(i),EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_GetHistoryShopInfoDetail,this.onServerEventData,this),EventCenter.Instance.addEventListener(DataTransEvent.Event_ShopInfo_ShowState_O_SelGuke,this.onShowSelGuke,this),EventCenter.Instance.addEventListener(DataTransEvent.Event_ShopInfo_MakeShop__O_AddNew,this.onAddNewShop,this),this.scrollMy.addEventListener(egret.Event.CHANGE,this.onScrollerChange,this)}},t.prototype.OnClose=function(){this.scrollMy.removeEventListener(egret.Event.CHANGE,this.onScrollerChange,this),EventCenter.Instance.removeEventListener(DataTransEvent.Event_ShopInfo_ShowState_O_SelGuke,this.onShowSelGuke,this),EventCenter.Instance.removeEventListener(DataTransEvent.Event_ShopInfo_MakeShop__O_AddNew,this.onAddNewShop,this),EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_GetHistoryShopInfoDetail,this.onServerEventData,this)},t.prototype.gethistoryinfoDetail=function(e){var t=GameGlobal.CurrentCompany,n={name:t,bill:e.billnumber},i=FuncUrlUtil.ShopInfo_GetHistoryShopInfoDetail;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(n),i)},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_GetHistoryShopInfoDetail:ShopPageManage.ins().data_ShopHistoryListDetail=t.obj,this.setShopInfoList()}},t.prototype.setShopInfoList=function(){var e=ShopPageManage.ins().data_ShopHistoryListDetail;if(!(e.length<=0)){var t=0;e[0].workstate<=2?(this.lab_orderstate.text="订单进行中...",this.lab_orderstate.textColor=6595365):(this.lab_orderstate.text="订单已完成>",this.lab_orderstate.textColor=3487029);for(var n=0;n<e.length;n++){var i=e[n];i.gukenum>t&&(t=i.gukenum)}for(var o=[],s=0,n=0;t>n;n++){for(var a=[],r=0;r<e.length;r++){var i=e[r];i.gukeidx==n&&(a.push({idx:r,d:i}),s++)}var h="第 "+n+" 位同伴";if(0==n&&(h="我自己"),o.push({idx:n,title:h,d:a}),s++,0==this._showmore&&s>3)break}var _=this.scrollMy.viewport.scrollV,l=new eui.ArrayCollection(o);this.listGuke.dataProvider=l,this.listGuke.itemRenderer=listShopHistoryDetalInfoItem,this.listGuke.validateNow(),_>this.scrollMy.viewport.height&&(_=this.scrollMy.viewport.height-500),this.scrollMy.viewport.scrollV=_,this.group_buttoninfo.y=this.group_shoplist.y+this.group_shoplist.height}},t.prototype._on_Show=function(){this.visible=!0},t.prototype._on_hide=function(){},t.prototype._OnClick=function(e){switch(e.target){case this._btn_showmore:this._showmore=!0,this._btn_showmore.visible=!1,this._btn_showless.visible=!0,this.setShopInfoList();break;case this._btn_showless:this._showmore=!1,this._btn_showmore.visible=!0,this._btn_showless.visible=!1,this.setShopInfoList();break;case this._btn_goback:this.CloseSelf()}},t.prototype.onScrollerChange=function(){for(var e=0;e<this.listGuke.$indexToRenderer.length;e++)this.listGuke.$indexToRenderer[e]&&this.listGuke.$indexToRenderer[e].doSomeChange()},t.prototype.onShowSelGuke=function(){this.onScrollerChange()},t.prototype.onAddNewShop=function(){this._on_hide()},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ShopServingBillDetialPanel.prototype,"ShopServingBillDetialPanel");var listShopHistoryDetalInfoItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_thisTap,this),this._btn_addnew.visible=!1},t.prototype._on_thisTap=function(e){ShopPageManage.ins()._selGukeIdx!=this.data.idx&&(ShopPageManage.ins()._selGukeIdx=this.data.idx,EventCenter.Instance.dispatchEvent(new DataTransEvent(DataTransEvent.Event_ShopInfo_ShowState_O_SelGuke,null)))},t.prototype.dataChanged=function(){this.setData()},t.prototype.setData=function(){var e=this.data;this._radio_sevidx.label=""+e.title;for(var t=[],n=e.d,i=0;i<n.length;i++){var o=n[i];o.d.sid>0&&t.push({idx:i,d:o.d,allnum:n.length}),this.lab_waitestate.text=""}var s=new eui.ArrayCollection(t);this.listShopGukeIdx.dataProvider=s,this.listShopGukeIdx.itemRenderer=listGukeHistroyDetailIdxItem,this.setRectSize()},t.prototype.setView=function(){var e=this.data;this._radio_sevidx.label=""+e.title;for(var t=e.d,n=0;n<t.length;n++){t[n];this.lab_waitestate.text=""}this.rect_back3.visible=!1,t.length<=0?(this.height=160,this.rect_back3.visible=!0,this.rect_back3.height=10):this.height=66+150*t.length+this.group_addNew.height+20,this.group_addNew.y=this.listShopGukeIdx.y+this.listShopGukeIdx.height+20,ShopPageManage.ins()._selGukeIdx==e.idx?(this._radio_sevidx.selected=!0,this.rect_back1.strokeColor=15250960,this.rect_back1.strokeWeight=5,this.rect_back2.strokeColor=15250960,this.rect_back2.strokeWeight=5):(this._radio_sevidx.selected=!1,this.rect_back1.strokeColor=15250960,this.rect_back1.strokeWeight=0,this.rect_back2.strokeColor=16777215,this.rect_back2.strokeWeight=0),this.rect_back2.height=this.rect_back1.height-60},t.prototype.setRectSize=function(){this.rect_back3.visible=!1;var e=this.data.d;e.length<=0?(this.height=160,this.rect_back3.visible=!0,this.rect_back3.height=10):this.height=66+150*e.length+this.group_addNew.height+20,this.group_addNew.y=this.listShopGukeIdx.y+this.listShopGukeIdx.height+20,ShopPageManage.ins()._selGukeIdx==this.data.idx?(this._radio_sevidx.selected=!0,this.rect_back1.strokeColor=4949897,this.rect_back1.strokeWeight=5,this.rect_back2.strokeColor=4949897,this.rect_back2.strokeWeight=5):(this._radio_sevidx.selected=!1,this.rect_back1.strokeColor=4949897,this.rect_back1.strokeWeight=0,this.rect_back2.strokeColor=16777215,this.rect_back2.strokeWeight=0),this.rect_back2.height=this.rect_back1.height-60},t.prototype.doSomeChange=function(){this.setRectSize();for(var e=0;e<this.listShopGukeIdx.$indexToRenderer.length;e++)this.listShopGukeIdx.$indexToRenderer[e]&&this.listShopGukeIdx.$indexToRenderer[e].doSomeChange()},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_thisTap,this)},t}(eui.ItemRenderer);__reflect(listShopHistoryDetalInfoItem.prototype,"listShopHistoryDetalInfoItem");var listGukeHistroyDetailIdxItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this._btn_del.visible=!1,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype.dataChanged=function(){this.setData()},t.prototype.setData=function(){var e=this.data;this.lab_itemname.text=e.d.sname;var t=ShopPageManage.ins().getServiceItemBySid(e.d.sid),n="";0==e.d.wtype?n="店家安排":1==e.d.wtype?n="要男技师":2==e.d.wtype?n="要女技师":3==e.d.wtype&&(n="点钟 "+e.d.hcode+" 号技师");var i="";0==e.d.wlev?i="等级无要求":1==e.d.wlev?i="初级技师":2==e.d.wlev?i="中级技师":3==e.d.wlev?i="高级技师":4==e.d.wlev?i="特级技师":5==e.d.wlev&&(i="专家坐诊"),3==e.d.wtype&&(i=""),this.lab_itemtime.text=t.timelong+"分钟 "+n+" "+i,this.lab_itemprice.text=""+t.price*e.d.clocknumyy;var o=new Date(e.d.waittime);this.lab_waitetime.text=this.formatTime_lab(o),this.lab_num.text=e.d.clocknumyy+"个",sproto.sprotoRequest.loadURLImgOnThisDress(this.data.d.headpic,function(e){var t=e.target,n=t.data,i=new egret.Bitmap(n);i.width=this.group_img.width,i.height=this.group_img.height,this.group_img.addChild(i)},this)},t.prototype.doSomeChange=function(){},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype.formatTime_lab=function(e){var t,n,i=(e.getFullYear(),e.getMonth()+1),o=e.getDate();t=10>i?"0"+i:i,n=10>o?"0"+o:o;var s,a,r,h=e.getHours(),_=e.getMinutes(),l=e.getSeconds();s=10>h?"0"+h:h,a=10>_?"0"+_:_,r=10>l?"0"+l:l;var u=i+"月"+o+"日"+h+"点"+_+"分";return u},t}(eui.ItemRenderer);__reflect(listGukeHistroyDetailIdxItem.prototype,"listGukeHistroyDetailIdxItem");var ShopServingBillListPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="ShopHistoryBillListSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this._AddClick(this._btn_goshop,this._OnClick)},t.prototype.OnOpen=function(){EventCenter.Instance.addEventListener(FuncUrlUtil.ShopInfo_GetHistoryShopInfo,this.onServerEventData,this),this.gethistoryinfo()},t.prototype.OnClose=function(){EventCenter.Instance.removeEventListener(FuncUrlUtil.ShopInfo_GetHistoryShopInfo,this.onServerEventData,this)},t.prototype.gethistoryinfo=function(){var e=GameGlobal.CurrentCompany,t={name:e},n=FuncUrlUtil.ShopInfo_GetHistoryShopInfo;sproto.sprotoRequest.sendPostRequestJson(JSON.stringify(t),n)},t.prototype.onServerEventData=function(e){var t=e.data;switch(t.msg){case FuncUrlUtil.ShopInfo_GetHistoryShopInfo:ShopPageManage.ins().data_ShopHistoryList=t.obj,this.onList_wait_Update()}},t.prototype.onList_wait_Update=function(){var e=ShopPageManage.ins().data_ShopHistoryList;if(!(e.length<=0)){var t=[],n=[];n.push(e[0]);for(var i=0,o=1;o<e.length;o++){var s=e[o];s.billnumber!=n[0].billnumber?(t.push({idx:i,d:n}),n=[],n.push(s),i++):n.push(s)}n.length>0&&t.push({idx:i,d:n});var a=new eui.ArrayCollection(t);this.listorder.dataProvider=a,this.listorder.itemRenderer=listHistoryBillInfoItem,this.listorder.validateNow()}},t.prototype._OnClick=function(e){switch(e.target){case this._btn_goshop:this.CloseSelf()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(ShopServingBillListPanel.prototype,"ShopServingBillListPanel");var listHistoryBillInfoItem=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._point={x:0,y:0},t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._on_touch_begin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this._on_touch_end,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_tap_this,this),this._btn_likethisagin.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_order_again,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype._on_touch_begin=function(e){var t={x:e.stageX,y:e.stageY};this._point=t},t.prototype._on_touch_end=function(e){var t={x:e.stageX,y:e.stageY};Math.abs(this._point.x-t.x)<=10&&Math.abs(this._point.y-t.y)<=10&&ViewManager.ins().open(ShopServingBillDetialPanel,this.data.d)},t.prototype._on_order_again=function(e){},t.prototype._on_tap_this=function(e){},t.prototype.dataChanged=function(){var e=this.data.d;if(!(e.length<=0)){this.lab_itemstate.text="已完成";var t=e[0],n=decodeURI(t.cmcname);n.length>12&&(n=n.substr(0,11)+"..."),this.lab_itemcompany.text=n;for(var i=0,o=0;o<e.length;o++)i+=e[o].money;this.lab_itemprice.text=""+i,this.lab_itemnum.text="共 "+e.length+" 项",sproto.sprotoRequest.loadURLImgOnThisDress(t.cpic,function(e){var t=e.target,n=t.data,i=new egret.Bitmap(n);i.width=this.group_companypic.width,i.height=this.group_companypic.height,this.group_companypic.addChild(i)},this);for(var s=[],o=0;o<e.length;o++){var a=e[o];s.push({idx:o,d:a})}var r=new eui.ArrayCollection(s);this.listorder.dataProvider=r,this.listorder.itemRenderer=listHistoryBillInfoItemChild,this.listorder.validateNow()}},t.prototype.doSomeChange=function(){},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this._btn_likethisagin.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_order_again,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_tap_this,this)},t}(eui.ItemRenderer);__reflect(listHistoryBillInfoItem.prototype,"listHistoryBillInfoItem");var listHistoryBillInfoItemChild=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype._on_order_again=function(e){},t.prototype.dataChanged=function(){var e=this.data.d,t=e.sname;t.length>7&&(t=t.substr(0,6)+"..."),this.lab_name.text=t,sproto.sprotoRequest.loadURLImgOnThisDress(e.spic,function(e){var t=e.target,n=t.data,i=new egret.Bitmap(n);i.width=this.group_img.width,i.height=this.group_img.height,this.group_img.addChild(i)},this)},t.prototype.doSomeChange=function(){},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t}(eui.ItemRenderer);__reflect(listHistoryBillInfoItemChild.prototype,"listHistoryBillInfoItemChild");var WariSelHuiYuanPayWin=function(e){function t(){var t=e.call(this)||this;return t.closeExecuteCallFun2=!0,t}return __extends(t,e),t.show=function(e,n,i,o,s,a,r){void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a="normal"),void 0===r&&(r=null),TimerManager.ins().doNext(function(){var h=ViewManager.ins().open(t);h.setWarnLabel(e,{func:n,thisObj:i},{func:o,thisObj:s},a,r)},null)},t.prototype.setWarnLabel=function(e,t,n,i,o){void 0===n&&(n=null),void 0===i&&(i="normal"),void 0===o&&(o=null),this.lab_typecname.text=e.hy.typecname+"",this.lab_cardid.text=e.hy.cardid+"",this.lab_price.text=Number(e.price).toFixed(2)+"",this.lab_pricedis.text=Number(e.pricedis).toFixed(2)+"",e.disrate>=1?this.lab_disrate.text="无":this.lab_disrate.text=Number(10*e.disrate)+" 折",this.lab_rmoney.text=Number(e.rmoney).toFixed(2)+"",e.rmoney<0&&(this.sureBtn.label="余额不足",this.sureBtn.enabled=!1),this.callBack=t,this.calback2=n,this.currentState=i},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="WarmSelHuiYuanPay",this.validateNow()},t.prototype.OnOpen=function(){this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.notBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.animGroup.scaleX=this.animGroup.scaleY=.5,this.animGroup.alpha=0,egret.Tween.get(this.animGroup).to({scaleX:1,scaleY:1,alpha:1},200,egret.Ease.backOut)},t.prototype.OnClose=function(){this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.notBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.callBack=null,this.calback2=null,egret.Tween.removeTweens(this.animGroup)},t.prototype.onTap=function(e){var t=this.callBack,n=this.calback2;switch(e.currentTarget){case this.sureBtn:if(t&&null!=t.func){t.func.call(t.thisObj)}break;case this.notBtn:n&&n.func&&n.func.call(n.thisObj)}this.CloseSelf()},Object.defineProperty(t.prototype,"isShowWin",{get:function(){return this._isShowWin},set:function(e){this._isShowWin!=e&&(this._isShowWin=e)},enumerable:!0,configurable:!0}),t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(WariSelHuiYuanPayWin.prototype,"WariSelHuiYuanPayWin");var WarmCheckCode=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.show=function(e,n,i){void 0===i&&(i=null),TimerManager.ins().doNext(function(){var o=ViewManager.ins().open(t);o.setwin(e,n,i)},null)},t.prototype.setwin=function(e,t,n){void 0===n&&(n=null),this.callfunc=e,this.callthisobj=t,this.calldata=n},t.prototype.erroUserMedio=function(e){},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="WarmCodeCheck",this._input_code.restrict="0-9",this.validateNow()},t.prototype.OnOpen=function(){this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.OnClose=function(){this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.callfunc=null,this.callthisobj=null,this.calldata=null},t.prototype.onCodeInputAndCallBack=function(e){var t=e.data.m;null!=this.callfunc&&this.callfunc.call(this.callthisobj,this.calldata,t),this.CloseSelf()},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sureBtn:var t=this._input_code.text;if(4!=this._input_code.text.length)break;null!=this.callfunc&&this.callfunc.call(this.callthisobj,this.calldata,t),this.CloseSelf();break;case this.closeBtn:this.CloseSelf()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(WarmCheckCode.prototype,"WarmCheckCode");var WarmPriceSet=function(e){function t(){var t=e.call(this)||this;return t._finalPrice=0,t._priceone=0,t._num=1,t._Pricename="",t._PriceTypeList=[],t}return __extends(t,e),t.show=function(e,n,i){void 0===i&&(i=null),TimerManager.ins().doNext(function(){var o=ViewManager.ins().open(t);o.setwin(e,n,i)},null)},t.prototype.setwin=function(e,t,n){void 0===n&&(n=null),this.callfunc=e,this.callthisobj=t,this.calldata=n,this._priceone=this.calldata.itembillyf,this._num=this.calldata.clocknumyf,this.onPriceListUpdate(),this.lab_priceone.text=this._priceone+"",this.lab_num.text=this._num+"",this.onSetText()},t.prototype.onPriceListUpdate=function(){},t.prototype.onSelPriceType=function(e){null!=e&&(this._priceone=e.price,this._Pricename=e.tpname,this.onSetText(),this.GetfinalPrice())},t.prototype.GetfinalPrice=function(){this._finalPrice=Number((this._num*this._priceone).toFixed(2)),this.lab_allprice.text=this._finalPrice+""},t.prototype.onAddDelPriceOne=function(e){this._priceone+=e,this._priceone<0&&(this._priceone=0),this.lab_priceone.text=this._priceone+"",this.GetfinalPrice()},t.prototype.onSetText=function(){this.lab_priceone.text=this._priceone.toFixed(2)+"",this.lab_price_10yuan.text=10*Math.floor(this._priceone/10)+"";var e=10*Math.floor(this._priceone/10);e=this._priceone-e,this.lab_price_yuan.text=Math.floor(e)+"",e=Math.floor(this._priceone),e=this._priceone-e,this.lab_price_jiao.text=e.toFixed(2)+"",this.lab_num.text=this._num+""},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="WarmPriceSkin",this.lab_priceone.restrict="0-9.",this.lab_allprice.restrict="0-9.",this.lab_num.restrict="0-9",this.lab_price_10yuan.restrict="0-9",this.lab_price_yuan.restrict="0-9",this.lab_price_jiao.restrict="0-9",this.validateNow()},t.prototype.OnOpen=function(){this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_delprice_10yuan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_addprice_10yuan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_delprice_yuan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_addprice_yuan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_delprice_jiao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_addprice_jiao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_del_num.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_add_num.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.scrollMy_price.addEventListener(egret.Event.CHANGE,this.onPriceTypeScrollerChange,this),this.listItem_price.addEventListener(egret.Event.CHANGE,this._onPriceTypeItemChange,this)},t.prototype.OnClose=function(){this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_delprice_10yuan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_addprice_10yuan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_delprice_yuan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_addprice_yuan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_delprice_jiao.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_addprice_jiao.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_del_num.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_add_num.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.scrollMy_price.removeEventListener(egret.Event.CHANGE,this.onPriceTypeScrollerChange,this),this.listItem_price.removeEventListener(egret.Event.CHANGE,this._onPriceTypeItemChange,this),this.callfunc=null,this.callthisobj=null,this.calldata=null},t.prototype.onPriceTypeScrollerChange=function(){for(var e=0;e<this.listItem_price.$indexToRenderer.length;e++)this.listItem_price.$indexToRenderer[e]&&this.listItem_price.$indexToRenderer[e].doSomeChange()},t.prototype._onPriceTypeItemChange=function(e){for(var t=0;t<this.listItem_price.$indexToRenderer.length;t++)this.listItem_price.$indexToRenderer[t]&&this.listItem_price.$indexToRenderer[t].doSomeChange()},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sureBtn:if(null!=this.callfunc){""==this._Pricename&&(this._Pricename="现付");var t={num:this._num,price:this._finalPrice,name:this._Pricename};this.callfunc.call(this.callthisobj,t)}this.CloseSelf();break;case this.closeBtn:this.CloseSelf();break;case this.btn_delprice_10yuan:this.onAddDelPriceOne(-10),this.onSetText();break;case this.btn_addprice_10yuan:this.onAddDelPriceOne(10),this.onSetText();break;case this.btn_delprice_yuan:this.onAddDelPriceOne(-1),this.onSetText();break;case this.btn_addprice_yuan:this.onAddDelPriceOne(1),this.onSetText();break;case this.btn_delprice_jiao:this.onAddDelPriceOne(-.1),this.onSetText();break;case this.btn_addprice_jiao:this.onAddDelPriceOne(.1),this.onSetText();break;case this.btn_del_num:this._num-=.5,this.onSetText(),this.GetfinalPrice();break;case this.btn_add_num:this._num+=.5,this.onSetText(),this.GetfinalPrice()}},t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(WarmPriceSet.prototype,"WarmPriceSet");
var listPriceTypeListItem=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this._on_touch_begin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this._on_touch_end,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this._on_btn_tap,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype._on_touch_begin=function(){this._rect_back.fillColor=7367267},t.prototype._on_touch_end=function(){this._rect_back.fillColor=10064780,this.doSomeChange()},t.prototype._on_btn_tap=function(e){this.data.selfunc.call(this.data.thisobj,this.data.d)},t.prototype.dataChanged=function(){var e=this.data,t=e.d.tpname;this.lab_pname.text=t.substring(0,4);var n=e.d.price;this.lab_price.text=n+"",this.doSomeChange()},t.prototype.doSomeChange=function(){this._img_check.visible=!1,this._rect_back.fillColor=10064780,this.selected&&(this._img_check.visible=!0,this._rect_back.fillColor=10187847)},t.prototype.onRemove=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this._on_touch_begin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this._on_touch_end,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._on_btn_tap,this)},t}(eui.ItemRenderer);__reflect(listPriceTypeListItem.prototype,"listPriceTypeListItem");var WarmTimeSet=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.show=function(e,n,i){void 0===i&&(i=null),TimerManager.ins().doNext(function(){var o=ViewManager.ins().open(t);o.setwin(e,n,i)},null)},t.prototype.setwin=function(e,t,n){void 0===n&&(n=null),this.callfunc=e,this.callthisobj=t,this._data=n;var i=new Date(n.time);this.calldata=i.getTime(),this.callnum=n.num,this.formatTme(this.calldata),n.hid>0?this.btn_querrywork.visible=!0:this.btn_querrywork.visible=!1,this.lab_wntm.visible=!1,this.lab_wnnum.visible=!1},t.prototype.formatTme=function(e){var t,n,i,o=new Date(e),s=o.getDate(),a=o.getHours(),r=o.getMinutes(),h=o.getSeconds();t=10>a?"0"+a:a,n=10>r?"0"+r:r,i=10>h?"0"+h:h,this.lab_hour.text=t+"",this.lab_sec.text=n+"",this.lab_time.text=s+"日 "+t+":"+n,this.lab_num.text=this.callnum,this.lab_numset.text=this.callnum,this.lab_time.textColor=7169124,this.lab_num.textColor=7169124;var _={time:e,num:this.callnum};this.lab_wntm.visible=!1,this.lab_wnnum.visible=!1,this._data.hid>0&&(1==ShopPageManage.ins()._ifWorkerItemTimeisOverEachOther(_)&&(this.lab_time.textColor=13706019,this.lab_wntm.visible=!0),ShopPageManage.ins()._ifWorkerItemTimeisOverEachOther(_)>=2&&(this.lab_num.textColor=13706019,this.lab_wnnum.visible=!0))},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="WarmTimeSkin",this.validateNow()},t.prototype.OnOpen=function(){this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_add_hour.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_del_hour.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_add_sec.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_del_sec.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_add_num.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_del_num.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_querrywork.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.OnClose=function(){this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_add_hour.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_del_hour.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_add_sec.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_del_sec.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_add_num.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_del_num.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.btn_querrywork.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.callfunc=null,this.callthisobj=null,this.calldata=null},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sureBtn:if(null!=this.callfunc){var t={time:this.calldata,num:this.callnum};this.callfunc.call(this.callthisobj,t)}this.CloseSelf();break;case this.closeBtn:this.CloseSelf();break;case this.btn_del_hour:this.calldata=this.calldata-36e5,this.formatTme(this.calldata);break;case this.btn_add_hour:this.calldata=this.calldata+36e5,this.formatTme(this.calldata);break;case this.btn_del_sec:this.calldata=this.calldata-6e4,this.formatTme(this.calldata);break;case this.btn_add_sec:this.calldata=this.calldata+6e4,this.formatTme(this.calldata);break;case this.btn_del_num:this.callnum=this.callnum-.5,this.formatTme(this.calldata);break;case this.btn_add_num:this.callnum=this.callnum+.5,this.formatTme(this.calldata);break;case this.btn_querrywork:ViewManager.ins().open(normalTimeSetPanel,ShopPageManage.ins().data_listWorkTile,ShopPageManage.ins().data_listWorkItems,null,this)}},t.LAYER_LEVEL=LayerManager.UI_Main,t}(BaseEuiView);__reflect(WarmTimeSet.prototype,"WarmTimeSet");var WarnWin=function(e){function t(){var t=e.call(this)||this;return t.closeExecuteCallFun2=!0,t}return __extends(t,e),t.show=function(e,n,i,o,s,a,r){void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a="normal"),void 0===r&&(r=null),TimerManager.ins().doNext(function(){var h=ViewManager.ins().open(t);h.setWarnLabel(e,{func:n,thisObj:i},{func:o,thisObj:s},a,r)},null)},t.prototype.setWarnLabel=function(e,t,n,i,o){void 0===n&&(n=null),void 0===i&&(i="normal"),void 0===o&&(o=null),"string"==typeof e?this.warnLabel.textFlow=TextFlowMaker.generateTextFlow(e):this.warnLabel.textFlow=e,this.callBack=t,this.calback2=n,this.currentState=i},t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="warnFrameSkin",this.validateNow()},t.prototype.OnOpen=function(){this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.notBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.animGroup.scaleX=this.animGroup.scaleY=.5,this.animGroup.alpha=0,egret.Tween.get(this.animGroup).to({scaleX:1,scaleY:1,alpha:1},200,egret.Ease.backOut)},t.prototype.OnClose=function(){this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.notBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.callBack=null,this.calback2=null,egret.Tween.removeTweens(this.animGroup)},t.prototype.onTap=function(e){var t=this.callBack,n=this.calback2;switch(e.currentTarget){case this.sureBtn:t&&null!=t.func&&t.func.call(t.thisObj);break;case this.notBtn:n&&n.func&&n.func.call(n.thisObj);break;case this.closeBtn:}this.CloseSelf()},Object.defineProperty(t.prototype,"isShowWin",{get:function(){return this._isShowWin},set:function(e){this._isShowWin!=e&&(this._isShowWin=e)},enumerable:!0,configurable:!0}),t.LAYER_LEVEL=LayerManager.UI_Popup,t}(BaseEuiView);__reflect(WarnWin.prototype,"WarnWin");